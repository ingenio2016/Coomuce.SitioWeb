Ext.define("CoomuceMod.model.ActualizacionBd.FuanAfiliado",{extend:"Ext.data.Model",fields:[{name:"idFuanAfiliado",type:"int"},{name:"primerApellidoFuanAfiliado",type:"string"},{name:"segundoApellidoFuanAfiliado",type:"string"},{name:"primerNombreFuanAfiliado",type:"string"},{name:"segundoNombreFuanAfiliado",type:"string"},{name:"codigoTipoIdentificacion",type:"string"},{name:"identificacionFuanAfiliado",type:"string"},{name:"fechaNacimientoFuanAfiliado",type:"date",convert:Coomuce.Util.parseDate},{name:"edadFuanAfiliado",type:"int"},{name:"compDepartamento",type:"string"},{name:"compCiudad",type:"string"},{name:"puntajeSisbenFuanAfiliado",type:"string"},{name:"direccionFuanAfiliado",type:"string"},{name:"telefonoFuanAfiliado",type:"string"},{name:"celularFuanAfiliado",type:"string"},{name:"emailFuanAfiliado",type:"string"},{name:"nombreTipoEtnia",type:"string"},{name:"nombreTipoZona",type:"string"},{name:"nombreTipoSexo",type:"string"},{name:"compAfiliado",convert:function(c,d){return d.get("identificacionFuanAfiliado")+" - "+d.get("primerApellidoFuanAfiliado")+" "+d.get("segundoApellidoFuanAfiliado")+" "+d.get("primerNombreFuanAfiliado")+" "+d.get("segundoNombreFuanAfiliado")}},{name:"nombreCompletoAfiliado",convert:function(c,d){return d.get("primerApellidoFuanAfiliado")+" "+d.get("segundoApellidoFuanAfiliado")+" "+d.get("primerNombreFuanAfiliado")+" "+d.get("segundoNombreFuanAfiliado")}}]});Ext.define("CoomuceMod.model.Administracion.Ciudad",{extend:"Ext.data.Model",fields:[{name:"idDepartamento",type:"int"},{name:"idCiudad",type:"int"},{name:"codigoCiudad",type:"string"},{name:"nombreCiudad",type:"string"},{name:"compCiudad",convert:function(c,d){return"("+d.get("codigoCiudad")+") "+d.get("nombreCiudad")}}],validators:[{type:"presence",allowEmpty:false,field:"codigoCiudad"},{type:"presence",allowEmpty:false,field:"nombreCiudad"}]});Ext.define("CoomuceMod.model.Administracion.Departamento",{extend:"Ext.data.Model",fields:[{name:"idDepartamento",type:"int"},{name:"codigoDepartamento",type:"string"},{name:"nombreDepartamento",type:"string"},{name:"compDepartamento",convert:function(c,d){return"("+d.get("codigoDepartamento")+") "+d.get("nombreDepartamento")}}],validators:[{type:"presence",allowEmpty:false,field:"codigoDepartamento"},{type:"presence",allowEmpty:false,field:"nombreDepartamento"}]});Ext.define("CoomuceMod.model.Administracion.PermisosRol",{extend:"Ext.data.Model",fields:[{name:"idRol",type:"int"},{name:"nombreRol",type:"string"},{name:"idMenu",type:"int"},{name:"nombreMenu",type:"string"},{name:"habilitadoRolMenu",type:"bool"}],validators:[{type:"presence",allowEmpty:false,field:"nombreMenu"}]});Ext.define("CoomuceMod.model.Administracion.Usuario",{extend:"Ext.data.Model",fields:[{name:"idUsuario",type:"int"},{name:"idTipoIdentificacion",type:"int"},{name:"nombreTipoIdentificacion",type:"string"},{name:"identificacionUsuario",type:"string"},{name:"primerApellidoUsuario",type:"string"},{name:"segundoApellidoUsuario",type:"string"},{name:"primerNombreUsuario",type:"string"},{name:"segundoNombreUsuario",type:"string"},{name:"emailUsuario",type:"string"},{name:"celularUsuario",type:"string"},{name:"idRol",type:"int"},{name:"nombreRol",type:"string"},{name:"esTemporalUsuario",type:"bool"},{name:"estaHabilitadoUsuario",type:"bool"}],validators:[{type:"presence",allowEmpty:false,field:"nombreTipoIdentificacion"},{type:"presence",allowEmpty:false,field:"identificacionUsuario"},{type:"presence",allowEmpty:false,field:"primerApellidoUsuario"},{type:"presence",allowEmpty:false,field:"primerNombreUsuario"},{type:"presence",allowEmpty:false,field:"emailUsuario"},{type:"presence",allowEmpty:false,field:"nombreRol"}]});Ext.define("CoomuceMod.model.Parametros.ActualizacionBd.CondicionDiscapacidad",{extend:"Ext.data.Model",fields:[{name:"idCondicionDiscapacidad",type:"int"},{name:"codigoCondicionDiscapacidad",type:"string"},{name:"nombreCondicionDiscapacidad",type:"string"},{name:"compCondicionDiscapacidad",convert:function(c,d){return"("+d.get("codigoCondicionDiscapacidad")+") "+d.get("nombreCondicionDiscapacidad")}}],validators:[{type:"presence",allowEmpty:false,field:"codigoCondicionDiscapacidad"},{type:"presence",allowEmpty:false,field:"nombreCondicionDiscapacidad"}]});Ext.define("CoomuceMod.model.Parametros.ActualizacionBd.DeclaracionAutorizacion",{extend:"Ext.data.Model",fields:[{name:"idDeclaracionAutorizacion",type:"int"},{name:"codigoDeclaracionAutorizacion",type:"string"},{name:"descripcionDeclaracionAutorizacion",type:"string"},{name:"compDeclaracionAutorizacion",convert:function(c,d){return d.get("codigoDeclaracionAutorizacion")+". "+d.get("descripcionDeclaracionAutorizacion")}}],validators:[{type:"presence",allowEmpty:false,field:"codigoDeclaracionAutorizacion"},{type:"presence",allowEmpty:false,field:"descripcionDeclaracionAutorizacion"}]});Ext.define("CoomuceMod.model.Parametros.ActualizacionBd.GrupoPoblacional",{extend:"Ext.data.Model",fields:[{name:"idGrupoPoblacional",type:"int"},{name:"codigoGrupoPoblacional",type:"string"},{name:"nombreGrupoPoblacional",type:"string"},{name:"compGrupoPoblacional",convert:function(c,d){return"("+d.get("codigoGrupoPoblacional")+") "+d.get("nombreGrupoPoblacional")}}],validators:[{type:"presence",allowEmpty:false,field:"codigoGrupoPoblacional"},{type:"presence",allowEmpty:false,field:"nombreGrupoPoblacional"}]});Ext.define("CoomuceMod.model.Parametros.ActualizacionBd.MotivoTraslado",{extend:"Ext.data.Model",fields:[{name:"idMotivoTraslado",type:"int"},{name:"codigoMotivoTraslado",type:"string"},{name:"descripcionMotivoTraslado",type:"string"},{name:"compMotivoTraslado",convert:function(c,d){return"("+d.get("codigoMotivoTraslado")+") "+d.get("descripcionMotivoTraslado")}}],validators:[{type:"presence",allowEmpty:false,field:"codigoMotivoTraslado"},{type:"presence",allowEmpty:false,field:"descripcionMotivoTraslado"}]});Ext.define("CoomuceMod.model.Parametros.ActualizacionBd.TipoAfiliacion",{extend:"Ext.data.Model",fields:[{name:"idTipoAfiliacion",type:"int"},{name:"codigoTipoAfiliacion",type:"string"},{name:"nombreTipoAfiliacion",type:"string"},{name:"compTipoAfiliacion",convert:function(c,d){return"("+d.get("codigoTipoAfiliacion")+") "+d.get("nombreTipoAfiliacion")}}],validators:[{type:"presence",allowEmpty:false,field:"codigoTipoAfiliacion"},{type:"presence",allowEmpty:false,field:"nombreTipoAfiliacion"}]});Ext.define("CoomuceMod.model.Parametros.ActualizacionBd.TipoAfiliado",{extend:"Ext.data.Model",fields:[{name:"idTipoAfiliado",type:"int"},{name:"codigoTipoAfiliado",type:"string"},{name:"nombreTipoAfiliado",type:"string"},{name:"compTipoAfiliado",convert:function(c,d){return"("+d.get("codigoTipoAfiliado")+") "+d.get("nombreTipoAfiliado")}}],validators:[{type:"presence",allowEmpty:false,field:"codigoTipoAfiliado"},{type:"presence",allowEmpty:false,field:"nombreTipoAfiliado"}]});Ext.define("CoomuceMod.model.Parametros.ActualizacionBd.TipoCotizante",{extend:"Ext.data.Model",fields:[{name:"idTipoCotizante",type:"int"},{name:"codigoTipoCotizante",type:"string"},{name:"nombreTipoCotizante",type:"string"},{name:"compTipoCotizante",convert:function(c,d){return"("+d.get("codigoTipoCotizante")+") "+d.get("nombreTipoCotizante")}}],validators:[{type:"presence",allowEmpty:false,field:"codigoTipoCotizante"},{type:"presence",allowEmpty:false,field:"nombreTipoCotizante"}]});Ext.define("CoomuceMod.model.Parametros.ActualizacionBd.TipoDiscapacidad",{extend:"Ext.data.Model",fields:[{name:"idTipoDiscapacidad",type:"int"},{name:"codigoTipoDiscapacidad",type:"string"},{name:"nombreTipoDiscapacidad",type:"string"},{name:"compTipoDiscapacidad",convert:function(c,d){return"("+d.get("codigoTipoDiscapacidad")+") "+d.get("nombreTipoDiscapacidad")}}],validators:[{type:"presence",allowEmpty:false,field:"codigoTipoDiscapacidad"},{type:"presence",allowEmpty:false,field:"nombreTipoDiscapacidad"}]});Ext.define("CoomuceMod.model.Parametros.ActualizacionBd.TipoEtnia",{extend:"Ext.data.Model",fields:[{name:"idTipoEtnia",type:"int"},{name:"codigoTipoEtnia",type:"string"},{name:"nombreTipoEtnia",type:"string"},{name:"compTipoEtnia",convert:function(c,d){return"("+d.get("codigoTipoEtnia")+") "+d.get("nombreTipoEtnia")}}],validators:[{type:"presence",allowEmpty:false,field:"codigoTipoEtnia"},{type:"presence",allowEmpty:false,field:"nombreTipoEtnia"}]});Ext.define("CoomuceMod.model.Parametros.ActualizacionBd.TipoNovedad",{extend:"Ext.data.Model",fields:[{name:"idTipoNovedad",type:"int"},{name:"codigoTipoNovedad",type:"string"},{name:"nombreTipoNovedad",type:"string"},{name:"tipoValorCampoTipoNovedad",type:"string"},{name:"valorCampoTipoNovedad",type:"string"},{name:"compTipoNovedad",convert:function(c,d){return d.get("codigoTipoNovedad")+". "+d.get("nombreTipoNovedad")}}],validators:[{type:"presence",allowEmpty:false,field:"codigoTipoNovedad"},{type:"presence",allowEmpty:false,field:"nombreTipoNovedad"}]});Ext.define("CoomuceMod.model.Parametros.ActualizacionBd.TipoParentesco",{extend:"Ext.data.Model",fields:[{name:"idTipoParentesco",type:"int"},{name:"codigoTipoParentesco",type:"string"},{name:"nombreTipoParentesco",type:"string"},{name:"descripcionTipoParentesco",type:"string"},{name:"compTipoParentesco",convert:function(c,d){return"("+d.get("codigoTipoParentesco")+") "+d.get("nombreTipoParentesco")}}],validators:[{type:"presence",allowEmpty:false,field:"codigoTipoParentesco"},{type:"presence",allowEmpty:false,field:"nombreTipoParentesco"}]});Ext.define("CoomuceMod.model.Parametros.ActualizacionBd.TipoRegimen",{extend:"Ext.data.Model",fields:[{name:"idTipoRegimen",type:"int"},{name:"codigoTipoRegimen",type:"string"},{name:"nombreTipoRegimen",type:"string"},{name:"compTipoRegimen",convert:function(c,d){return"("+d.get("codigoTipoRegimen")+") "+d.get("nombreTipoRegimen")}}],validators:[{type:"presence",allowEmpty:false,field:"codigoTipoRegimen"},{type:"presence",allowEmpty:false,field:"nombreTipoRegimen"}]});Ext.define("CoomuceMod.model.Parametros.ActualizacionBd.TipoTramite",{extend:"Ext.data.Model",fields:[{name:"idTipoTramite",type:"int"},{name:"codigoTipoTramite",type:"string"},{name:"nombreTipoTramite",type:"string"},{name:"compTipoTramite",convert:function(c,d){return"("+d.get("codigoTipoTramite")+") "+d.get("nombreTipoTramite")}}],validators:[{type:"presence",allowEmpty:false,field:"codigoTipoTramite"},{type:"presence",allowEmpty:false,field:"nombreTipoTramite"}]});Ext.define("CoomuceMod.model.Parametros.CaracterizacionPoblacional.CicloVital",{extend:"Ext.data.Model",fields:[{name:"idCicloVital",type:"int"},{name:"edadMinCicloVital",type:"int"},{name:"edadMaxCicloVital",type:"int"},{name:"compFactorRiesgo",convert:function(c,d){return d.get("edadMinCicloVital")+" - "+d.get("edadMaxCicloVital")}}],validators:[{type:"presence",allowEmpty:false,field:"edadMinCicloVital"},{type:"presence",allowEmpty:false,field:"edadMaxCicloVital"}]});Ext.define("CoomuceMod.model.Parametros.CaracterizacionPoblacional.CondicionesSocioambientales.TipoAnimal",{extend:"Ext.data.Model",fields:[{name:"idTipoAnimal",type:"int"},{name:"codigoTipoAnimal",type:"string"},{name:"nombreTipoAnimal",type:"string"},{name:"compTipoAnimal",convert:function(c,d){return"("+d.get("codigoTipoAnimal")+") "+d.get("nombreTipoAnimal")}}],validators:[{type:"presence",allowEmpty:false,field:"codigoTipoAnimal"},{type:"presence",allowEmpty:false,field:"nombreTipoAnimal"}]});Ext.define("CoomuceMod.model.Parametros.CaracterizacionPoblacional.CondicionesVivienda.CondicionVivienda",{extend:"Ext.data.Model",fields:[{name:"idCondicionVivienda",type:"int"},{name:"nombreCondicionVivienda",type:"string"}],validators:[{type:"presence",allowEmpty:false,field:"idCondicionVivienda"},{type:"presence",allowEmpty:false,field:"nombreCondicionVivienda"}]});Ext.define("CoomuceMod.model.Parametros.CaracterizacionPoblacional.CondicionesVivienda.DisposicionBasura",{extend:"Ext.data.Model",fields:[{name:"idDisposicionBasura",type:"int"},{name:"codigoDisposicionBasura",type:"string"},{name:"nombreDisposicionBasura",type:"string"},{name:"compDisposicionBasura",convert:function(c,d){return"("+d.get("codigoDisposicionBasura")+") "+d.get("nombreDisposicionBasura")}}],validators:[{type:"presence",allowEmpty:false,field:"codigoDisposicionBasura"},{type:"presence",allowEmpty:false,field:"nombreDisposicionBasura"}]});Ext.define("CoomuceMod.model.Parametros.CaracterizacionPoblacional.CondicionesVivienda.DisposicionExcreta",{extend:"Ext.data.Model",fields:[{name:"idDisposicionExcreta",type:"int"},{name:"codigoDisposicionExcreta",type:"string"},{name:"nombreDisposicionExcreta",type:"string"},{name:"compDisposicionExcreta",convert:function(c,d){return"("+d.get("codigoDisposicionExcreta")+") "+d.get("nombreDisposicionExcreta")}}],validators:[{type:"presence",allowEmpty:false,field:"codigoDisposicionExcreta"},{type:"presence",allowEmpty:false,field:"nombreDisposicionExcreta"}]});Ext.define("CoomuceMod.model.Parametros.CaracterizacionPoblacional.CondicionesVivienda.Tenencia",{extend:"Ext.data.Model",fields:[{name:"idTenencia",type:"int"},{name:"codigoTenencia",type:"string"},{name:"nombreTenencia",type:"string"},{name:"compTenencia",convert:function(c,d){return"("+d.get("codigoTenencia")+") "+d.get("nombreTenencia")}}],validators:[{type:"presence",allowEmpty:false,field:"codigoTenencia"},{type:"presence",allowEmpty:false,field:"nombreTenencia"}]});Ext.define("CoomuceMod.model.Parametros.CaracterizacionPoblacional.CondicionesVivienda.TipoCombustible",{extend:"Ext.data.Model",fields:[{name:"idTipoCombustible",type:"int"},{name:"codigoTipoCombustible",type:"string"},{name:"nombreTipoCombustible",type:"string"},{name:"compTipoCombustible",convert:function(c,d){return"("+d.get("codigoTipoCombustible")+") "+d.get("nombreTipoCombustible")}}],validators:[{type:"presence",allowEmpty:false,field:"codigoTipoCombustible"},{type:"presence",allowEmpty:false,field:"nombreTipoCombustible"}]});Ext.define("CoomuceMod.model.Parametros.CaracterizacionPoblacional.CondicionesVivienda.TipoVivienda",{extend:"Ext.data.Model",fields:[{name:"idTipoVivienda",type:"int"},{name:"codigoTipoVivienda",type:"string"},{name:"nombreTipoVivienda",type:"string"},{name:"compTipoVivienda",convert:function(c,d){return"("+d.get("codigoTipoVivienda")+") "+d.get("nombreTipoVivienda")}}],validators:[{type:"presence",allowEmpty:false,field:"codigoTipoVivienda"},{type:"presence",allowEmpty:false,field:"nombreTipoVivienda"}]});Ext.define("CoomuceMod.model.Parametros.CaracterizacionPoblacional.CondicionesVivienda.TratamientoAgua",{extend:"Ext.data.Model",fields:[{name:"idTratamientoAgua",type:"int"},{name:"codigoTratamientoAgua",type:"string"},{name:"nombreTratamientoAgua",type:"string"},{name:"compTratamientoAgua",convert:function(c,d){return"("+d.get("codigoTratamientoAgua")+") "+d.get("nombreTratamientoAgua")}}],validators:[{type:"presence",allowEmpty:false,field:"codigoTratamientoAgua"},{type:"presence",allowEmpty:false,field:"nombreTratamientoAgua"}]});Ext.define("CoomuceMod.model.Parametros.CaracterizacionPoblacional.FactorRiesgo",{extend:"Ext.data.Model",fields:[{name:"idFactorRiesgo",type:"int"},{name:"codigoFactorRiesgo",type:"string"},{name:"nombreFactorRiesgo",type:"string"},{name:"compFactorRiesgo",convert:function(c,d){return"("+d.get("codigoFactorRiesgo")+") "+d.get("nombreFactorRiesgo")}}],validators:[{type:"presence",allowEmpty:false,field:"codigoFactorRiesgo"},{type:"presence",allowEmpty:false,field:"nombreFactorRiesgo"}]});Ext.define("CoomuceMod.model.Parametros.CaracterizacionPoblacional.NivelEducativo",{extend:"Ext.data.Model",fields:[{name:"idNivelEducativo",type:"int"},{name:"codigoNivelEducativo",type:"string"},{name:"nombreNivelEducativo",type:"string"},{name:"compNivelEducativo",convert:function(c,d){return"("+d.get("codigoNivelEducativo")+") "+d.get("nombreNivelEducativo")}}],validators:[{type:"presence",allowEmpty:false,field:"codigoNivelEducativo"},{type:"presence",allowEmpty:false,field:"nombreNivelEducativo"}]});Ext.define("CoomuceMod.model.Parametros.CaracterizacionPoblacional.PreguntasSubFactorRiesgo",{extend:"Ext.data.Model",fields:[{name:"idPreguntasSubFactorRiesgo",type:"int"},{name:"idSubFactorRiesgo",type:"int"},{name:"codigoPreguntasSubFactorRiesgo",type:"string"},{name:"descripcionPreguntasSubFactorRiesgo",type:"string"},{name:"compPreguntasSubFactorRiesgo",convert:function(c,d){return"("+d.get("codigoPreguntasSubFactorRiesgo")+") "+d.get("descripcionPreguntasSubFactorRiesgo")}}],validators:[{type:"presence",allowEmpty:false,field:"codigoPreguntasSubFactorRiesgo"},{type:"presence",allowEmpty:false,field:"nombrePreguntasSubFactorRiesgo"}]});Ext.define("CoomuceMod.model.Parametros.CaracterizacionPoblacional.Procedencia",{extend:"Ext.data.Model",fields:[{name:"idProcedencia",type:"int"},{name:"codigoProcedencia",type:"string"},{name:"nombreProcedencia",type:"string"},{name:"compProcedencia",convert:function(c,d){return"("+d.get("codigoProcedencia")+") "+d.get("nombreProcedencia")}}],validators:[{type:"presence",allowEmpty:false,field:"codigoProcedencia"},{type:"presence",allowEmpty:false,field:"nombreProcedencia"}]});Ext.define("CoomuceMod.model.Parametros.CaracterizacionPoblacional.SubFactorRiesgo",{extend:"Ext.data.Model",fields:[{name:"idSubFactorRiesgo",type:"int"},{name:"idSubFactorRiesgo",type:"int"},{name:"codigoSubFactorRiesgo",type:"string"},{name:"nombreSubFactorRiesgo",type:"string"},{name:"compSubFactorRiesgo",convert:function(c,d){return"("+d.get("codigoSubFactorRiesgo")+") "+d.get("nombreSubFactorRiesgo")}}],validators:[{type:"presence",allowEmpty:false,field:"codigoSubFactorRiesgo"},{type:"presence",allowEmpty:false,field:"nombreSubFactorRiesgo"}]});Ext.define("CoomuceMod.model.Parametros.DemandaInducida.GrupoInteres",{extend:"Ext.data.Model",fields:[{name:"idGrupoInteres",type:"int"},{name:"codigoGrupoInteres",type:"string"},{name:"descripcionGrupoInteres",type:"string"},{name:"compGrupoInteres",convert:function(c,d){return"("+d.get("codigoGrupoInteres")+") "+d.get("descripcionGrupoInteres")}}],validators:[{type:"presence",allowEmpty:false,field:"codigoGrupoInteres"},{type:"presence",allowEmpty:false,field:"descripcionGrupoInteres"}]});Ext.define("CoomuceMod.model.Parametros.DemandaInducida.MotivoConsulta",{extend:"Ext.data.Model",fields:[{name:"idMotivoConsulta",type:"int"},{name:"codigoMotivoConsulta",type:"string"},{name:"descripcionMotivoConsulta",type:"string"},{name:"compMotivoConsulta",convert:function(c,d){return"("+d.get("codigoMotivoConsulta")+") "+d.get("descripcionMotivoConsulta")}}],validators:[{type:"presence",allowEmpty:false,field:"codigoMotivoConsulta"},{type:"presence",allowEmpty:false,field:"descripcionMotivoConsulta"}]});Ext.define("CoomuceMod.model.Parametros.DemandaInducida.MotivoContacto",{extend:"Ext.data.Model",fields:[{name:"idMotivoContacto",type:"int"},{name:"codigoMotivoContacto",type:"string"},{name:"descripcionMotivoContacto",type:"string"},{name:"compMotivoContacto",convert:function(c,d){return"("+d.get("codigoMotivoContacto")+") "+d.get("descripcionMotivoContacto")}}],validators:[{type:"presence",allowEmpty:false,field:"codigoMotivoContacto"},{type:"presence",allowEmpty:false,field:"descripcionMotivoContacto"}]});Ext.define("CoomuceMod.model.Parametros.DemandaInducida.PiezasInformativas",{extend:"Ext.data.Model",fields:[{name:"idPiezasInformativas",type:"int"},{name:"codigoPiezasInformativas",type:"string"},{name:"descripcionPiezasInformativas",type:"string"},{name:"compPiezasInformativas",convert:function(c,d){return"("+d.get("codigoPiezasInformativas")+") "+d.get("descripcionPiezasInformativas")}}],validators:[{type:"presence",allowEmpty:false,field:"codigoPiezasInformativas"},{type:"presence",allowEmpty:false,field:"descripcionPiezasInformativas"}]});Ext.define("CoomuceMod.model.Parametros.DemandaInducida.ProgramaResolucion412",{extend:"Ext.data.Model",fields:[{name:"idProgramaResolucion412",type:"int"},{name:"codigoProgramaResolucion412",type:"string"},{name:"descripcionProgramaResolucion412",type:"string"},{name:"compProgramaResolucion412",convert:function(c,d){return"("+d.get("codigoProgramaResolucion412")+") "+d.get("descripcionProgramaResolucion412")}}],validators:[{type:"presence",allowEmpty:false,field:"codigoProgramaResolucion412"},{type:"presence",allowEmpty:false,field:"descripcionProgramaResolucion412"}]});Ext.define("CoomuceMod.model.Parametros.DemandaInducida.SeguimientoProgramasIntervencionRiesgo",{extend:"Ext.data.Model",fields:[{name:"idSeguimientoProgramasIntervencionRiesgo",type:"int"},{name:"codigoSeguimientoProgramasIntervencionRiesgo",type:"string"},{name:"nombreSeguimientoProgramasIntervencionRiesgo",type:"string"},{name:"compSeguimientoProgramasIntervencionRiesgo",convert:function(c,d){return"("+d.get("codigoSeguimientoProgramasIntervencionRiesgo")+") "+d.get("nombreSeguimientoProgramasIntervencionRiesgo")}}],validators:[{type:"presence",allowEmpty:false,field:"codigoSeguimientoProgramasIntervencionRiesgo"},{type:"presence",allowEmpty:false,field:"nombreSeguimientoProgramasIntervencionRiesgo"}]});Ext.define("CoomuceMod.model.Parametros.DemandaInducida.TipoVisitaDomiciliaria",{extend:"Ext.data.Model",fields:[{name:"idTipoVisitaDomiciliaria",type:"int"},{name:"codigoTipoVisitaDomiciliaria",type:"string"},{name:"nombreTipoVisitaDomiciliaria",type:"string"},{name:"compTipoVisitaDomiciliaria",convert:function(c,d){return"("+d.get("codigoTipoVisitaDomiciliaria")+") "+d.get("nombreTipoVisitaDomiciliaria")}}],validators:[{type:"presence",allowEmpty:false,field:"codigoTipoVisitaDomiciliaria"},{type:"presence",allowEmpty:false,field:"nombreTipoVisitaDomiciliaria"}]});Ext.define("CoomuceMod.model.Parametros.Generales.GruposFocales",{extend:"Ext.data.Model",fields:[{name:"idGruposFocales",type:"int"},{name:"codigoGruposFocales",type:"string"},{name:"nombreGruposFocales",type:"string"},{name:"compGruposFocales",convert:function(c,d){return"("+d.get("codigoGruposFocales")+") "+d.get("nombreGruposFocales")}}],validators:[{type:"presence",allowEmpty:false,field:"codigoGruposFocales"},{type:"presence",allowEmpty:false,field:"nombreGruposFocales"}]});Ext.define("CoomuceMod.model.Parametros.Generales.Ips",{extend:"Ext.data.Model",fields:[{name:"idIps",type:"int"},{name:"codigoIps",type:"string"},{name:"razonIps",type:"string"},{name:"idTipoIdentificacion",type:"int"},{name:"compTipoIdentificacion",type:"string"},{name:"identificacionIps",type:"string"},{name:"direccionIps",type:"string"},{name:"telefonoIps",type:"string"},{name:"idDepartamento",type:"int"},{name:"compDepartamento",type:"string"},{name:"idCiudad",type:"int"},{name:"compCiudad",type:"string"},{name:"representanteIps",type:"string"},{name:"nivelIps",type:"string"},{name:"contactoIps",type:"string"},{name:"emailIps",type:"string"}],validators:[{type:"presence",allowEmpty:false,field:"codigoIps"},{type:"presence",allowEmpty:false,field:"razonIps"},{type:"presence",allowEmpty:false,field:"idTipoIdentificacion"},{type:"presence",allowEmpty:false,field:"compTipoIdentificacion"},{type:"presence",allowEmpty:false,field:"identificacionIps"},{type:"presence",allowEmpty:false,field:"direccionIps"},{type:"presence",allowEmpty:false,field:"idDepartamento"},{type:"presence",allowEmpty:false,field:"compDepartamento"},{type:"presence",allowEmpty:false,field:"idCiudad"},{type:"presence",allowEmpty:false,field:"compCiudad"}]});Ext.define("CoomuceMod.model.Parametros.Generales.TipoIdentificacion",{extend:"Ext.data.Model",fields:[{name:"idTipoIdentificacion",type:"int"},{name:"codigoTipoIdentificacion",type:"string"},{name:"nombreTipoIdentificacion",type:"string"},{name:"compTipoIdentificacion",convert:function(c,d){return"("+d.get("codigoTipoIdentificacion")+") "+d.get("nombreTipoIdentificacion")}}],validators:[{type:"presence",allowEmpty:false,field:"codigoTipoIdentificacion"},{type:"presence",allowEmpty:false,field:"nombreTipoIdentificacion"}]});Ext.define("CoomuceMod.model.Parametros.Generales.TipoSexo",{extend:"Ext.data.Model",fields:[{name:"idTipoSexo",type:"int"},{name:"codigoTipoSexo",type:"string"},{name:"nombreTipoSexo",type:"string"},{name:"compTipoSexo",convert:function(c,d){return"("+d.get("codigoTipoSexo")+") "+d.get("nombreTipoSexo")}}],validators:[{type:"presence",allowEmpty:false,field:"codigoTipoSexo"},{type:"presence",allowEmpty:false,field:"nombreTipoSexo"}]});Ext.define("CoomuceMod.model.Parametros.Generales.TipoZona",{extend:"Ext.data.Model",fields:[{name:"idTipoZona",type:"int"},{name:"codigoTipoZona",type:"string"},{name:"nombreTipoZona",type:"string"},{name:"compTipoZona",convert:function(c,d){return"("+d.get("codigoTipoZona")+") "+d.get("nombreTipoZona")}}],validators:[{type:"presence",allowEmpty:false,field:"codigoTipoZona"},{type:"presence",allowEmpty:false,field:"nombreTipoZona"}]});Ext.define("CoomuceMod.model.Parametros.InformacionOrientacion.EncuestaCategoria",{extend:"Ext.data.Model",fields:[{name:"idEncuestaCategoria",type:"int"},{name:"idDomVista",type:"string"},{name:"codigoEncuestaCategoria",type:"string"},{name:"nombreEncuestaCategoria",type:"string"},{name:"ordenEncuestaCategoria",type:"int"},{name:"compEncuestaCategoria",convert:function(c,d){return"("+d.get("codigoEncuestaCategoria")+") "+d.get("nombreEncuestaCategoria")}}],validators:[{type:"presence",allowEmpty:false,field:"codigoEncuestaCategoria"},{type:"presence",allowEmpty:false,field:"nombreEncuestaCategoria"}]});Ext.define("CoomuceMod.model.Parametros.InformacionOrientacion.EncuestaLiteral",{extend:"Ext.data.Model",fields:[{name:"idEncuestaLiteral",type:"int"},{name:"idEncuestaPregunta",type:"int"},{name:"liteEncuestaLiteral",type:"string"},{name:"textoEncuestaLiteral",type:"string"},{name:"valorEncuestaLiteral",type:"int"},{name:"checkedEncuestaLiteral",type:"bool"},{name:"compEncuestaLiteral",convert:function(c,d){return"("+d.get("liteEncuestaLiteral")+") "+d.get("textoEncuestaLiteral")}}],validators:[{type:"presence",allowEmpty:false,field:"liteEncuestaLiteral"},{type:"presence",allowEmpty:false,field:"textoEncuestaLiteral"},{type:"presence",allowEmpty:false,field:"valorEncuestaLiteral"}]});Ext.define("CoomuceMod.model.Parametros.InformacionOrientacion.EncuestaPregunta",{extend:"Ext.data.Model",fields:[{name:"idEncuestaPregunta",type:"int"},{name:"idEncuestaCategoria",type:"int"},{name:"codigoEncuestaPregunta",type:"string"},{name:"textoEncuestaPregunta",type:"string"},{name:"tipoPreEncuestaPregunta",type:"int"},{name:"valorEncuestaPregunta",type:"int"},{name:"compEncuestaPregunta",convert:function(c,d){return"("+d.get("codigoEncuestaPregunta")+") "+d.get("textoEncuestaPregunta")}}],validators:[{type:"presence",allowEmpty:false,field:"codigoEncuestaPregunta"},{type:"presence",allowEmpty:false,field:"textoEncuestaPregunta"}]});Ext.define("CoomuceMod.model.Parametros.ParticipacionSocial.Eje",{extend:"Ext.data.Model",fields:[{name:"idEje",type:"int"},{name:"codigoEje",type:"string"},{name:"nombreEje",type:"string"},{name:"compEje",convert:function(c,d){return"("+d.get("codigoEje")+") "+d.get("nombreEje")}}],validators:[{type:"presence",allowEmpty:false,field:"codigoEje"},{type:"presence",allowEmpty:false,field:"nombreEje"}]});Ext.define("CoomuceMod.model.Parametros.ParticipacionSocial.Modulo",{extend:"Ext.data.Model",fields:[{name:"idUnidad",type:"int"},{name:"idModulo",type:"int"},{name:"codigoModulo",type:"string"},{name:"nombreModulo",type:"string"},{name:"compModulo",convert:function(c,d){return"("+d.get("codigoModulo")+") "+d.get("nombreModulo")}}],validators:[{type:"presence",allowEmpty:false,field:"codigoModulo"},{type:"presence",allowEmpty:false,field:"nombreModulo"}]});Ext.define("CoomuceMod.model.Parametros.ParticipacionSocial.Unidad",{extend:"Ext.data.Model",fields:[{name:"idEje",type:"int"},{name:"idUnidad",type:"int"},{name:"codigoUnidad",type:"string"},{name:"nombreUnidad",type:"string"},{name:"compUnidad",convert:function(c,d){return"("+d.get("codigoUnidad")+") "+d.get("nombreUnidad")}}],validators:[{type:"presence",allowEmpty:false,field:"codigoUnidad"},{type:"presence",allowEmpty:false,field:"nombreUnidad"}]});Ext.define("CoomuceMod.view.ActualizacionBd.AfiliacionController",{extend:"Ext.app.ViewController",alias:"controller.actualizacionbd-afiliacion",onAfterRender:function(){var c=this.lookupReference("ibcFuanAfiliado");var d=this.lookupReference("ibcFuanAfiliadoCurrency");c.setValue(Coomuce.Util.DatosUsuario.salarioMinimo);d.setValue(Coomuce.Util.DatosUsuario.salarioMinimo)},getTitleView:function(){return this.getView().getTitle()},onBotonSiguienteClick:function(e){var g=this;var h=Ext.getCmp(e.form);if(!h.getForm().isValid()){Coomuce.Util.ShowMessage({type:"ERROR",msg:"Debe rellenar todos los campos obligatorios."});return false}var f=Ext.getCmp(e.nextForm);f.setDisabled(false);Ext.getCmp("tabFuan").setActiveTab(f)},onSelectionChange:function(i,g,h){var k=this;var j=i.selected.items;var l=Ext.getStore("declaracionAutorizacionStore").data.items;_.forEach(l,function(a){a.data.valorFuanDeclaracionAutorizacion=false;_.forEach(j,function(b){if(b.data.idDeclaracionAutorizacion==a.data.idDeclaracionAutorizacion){a.data.valorFuanDeclaracionAutorizacion=true}})})},onBlurNumber:function(f,d,e){f.setRawValue(Ext.util.Format.usMoney(f.getValue()))},onDecimalNumber:function(f,d,e){f.setRawValue(Ext.util.Format.decimals(f.getValue()))},onSelectCombo:function(s,p,o){var n=this;if(s.ubicacion!==undefined){var i=n.lookupReference(s.ciudadReference);i.getStore().load({params:{idDepartamento:p.get("idDepartamento")}})}else{if(s.regimen){for(var q=0;q<s.componentReference.length;q++){var t=n.lookupReference(s.componentReference[q]);t.setValue(null);t.setReadOnly(p.get("idTipoRegimen")==1?false:true);if(p.get("idTipoRegimen")==1){var m=this.lookupReference("ibcFuanAfiliado");m.setValue(Coomuce.Util.DatosUsuario.salarioMinimo);var l=this.lookupReference("ibcFuanAfiliadoCurrency");l.setValue(Coomuce.Util.DatosUsuario.salarioMinimo)}}}else{var r=Ext.getCmp("Grid-Beneficiarios").selModel.getSelection();r[0].set(s.idCampo,p.get(s.idCampo))}}},onFocusCombo:function(k,n,p){if(k.checkRecord!==undefined){var j=Ext.getCmp("Grid-TipoNovedad").selModel.getSelection()[0];if(!Ext.isEmpty(j.get("tipoValorCampoTipoNovedad"))){k.setReadOnly(false);if(j.get("tipoValorCampoTipoNovedad")==="Lista"){var l=j.get("valorCampoTipoNovedad").split(";");var m=[];for(var i=0;i<l.length;i++){var o=[];o.push(l[i]);m.push(o)}k.setHideTrigger(false);k.getStore().loadData(m)}else{k.setHideTrigger(true)}}else{k.setReadOnly(true)}}else{var j=Ext.getCmp("Grid-Beneficiarios").selModel.getSelection()[0];k.getStore().load({params:{idDepartamento:j.get("idDepartamento")}})}},onToolBeneficiarioAdicionarClick:function(){var d=Ext.getCmp("Grid-Beneficiarios").getStore();var c=[{idFuanAfiliado:0,idFuan:0,tipoFuanAfiliado:"Beneficiario",primerApellidoFuanAfiliado:"",segundoApellidoFuanAfiliado:"",primerNombreFuanAfiliado:"",segundoNombreFuanAfiliado:"",idTipoIdentificacion:0,compTipoIdentificacion:"",identificacionFuanAfiliado:"",idTipoSexo:1,compTipoSexo:"",fechaNacimientoFuanAfiliado:"",idTipoParentesco:0,compTipoParentesco:"",idTipoEtnia:1,compTipoEtnia:"",idTipoDiscapacidad:0,compTipoDiscapacidad:"",idCondicionDiscapacidad:0,compCondicionDiscapacidad:"",numCarnetFuanAfiliado:"",idGrupoPoblacional:null,arlFuanAfiliado:"",pensionFuanAfiliado:"",ibcFuanAfiliado:0,direccionFuanAfiliado:"",telefonoFuanAfiliado:"",celularFuanAfiliado:"",emailFuanAfiliado:"",idDepartamento:0,compDepartamento:"",idCiudad:0,compCiudad:"",idTipoZona:0,compTipoZona:"",barrioFuanAfiliado:"",primerApellidoConyugueFuanAfiliado:"",segundoApellidoConyugueFuanAfiliado:"",primerNombreConyugueFuanAfiliado:"",segundoNombreConyugueFuanAfiliado:"",idTipoIdentificacionConyugue:null,identificacionConyugueFuanAfiliado:"",idTipoSexoConyugue:null,fechaNacimientoConyugueFuanAfiliado:null,upcFuanAfiliado:0,puntajeSisbenFuanAfiliado:"",upcFuanAfiliado:0,firmaFuanAfiliado:"",grupofamiliar:null,identificacionAnexo:"",cabezafamilia:0}];d.insert(0,c)},onToolBeneficiarioRemoverClick:function(){var b=Ext.getCmp("Grid-Beneficiarios");b.getStore().remove(b.selModel.getSelection())},onToolIpsPrimariaAdicionarClick:function(){var e=Ext.getCmp("Grid-IpsPrimaria").getStore();var d=e.max("idFuanIpsPrimariaAfiliado");var f=[{idFuanIpsPrimariaAfiliado:(d==undefined?1:d+1),idFuanAfiliado:0,tipoFuanIpsPrimariaAfiliado:"",nombreFuanIpsPrimariaAfiliado:"",codigoFuanIpsPrimariaAfiliado:""}];e.insert(0,f)},onToolIpsPrimariaRemoverClick:function(){var b=Ext.getCmp("Grid-IpsPrimaria");b.getStore().remove(b.selModel.getSelection())},onBotonGuardarClick:function(){var c=this;var d=c.getTitleView();Ext.Msg.confirm(d,"Desea guardar las modificaciones?",function(x){if(x==="yes"){var y=Ext.getCmp("Form-Afiliacion");var z=y.getForm().getValues();console.log(z);var v={idFuan:0,idTipoTramite:parseInt(z.idTipoTramite),idTipoAfiliacion:z.idTipoAfiliacion,idTipoRegimen:z.idTipoRegimen,idTipoAfiliado:z.idTipoAfiliado,idTipoCotizante:z.idTipoCotizante,codigoCotizanteFuan:z.codigoCotizanteFuan,idUsuario:Coomuce.Util.DatosUsuario.idUsuario,firmaAfiliado:(z.firmaNovedad)?z.firmaNovedad:""};if(v.idTipoAfiliacion==""||v.idTipoAfiliado==""||v.idTipoCotizante==""||v.idTipoRegimen==""){Coomuce.Util.ShowMessage({type:"ATENCION",title:d,msg:"Débe completar correctamente la sección 1. DATOS DEL TRAMITE para continuar"});return false}if(z.primerApellidoFuanAfiliado==""||z.primerNombreFuanAfiliado==""||z.idTipoIdentificacionII==""||z.identificacionFuanAfiliado==""||z.idTipoSexoII==""||z.fechaNacimientoFuanAfiliado==""){Coomuce.Util.ShowMessage({type:"ATENCION",title:d,msg:"Débe completar correctamente la sección 2. DATOS BÁSICOS DE IDENTIFICACIÓN para continuar"});return false}if(z.idTipoEtnia==""||z.idTipoDiscapacidad==""||z.idCondicionDiscapacidad==""||z.idTipoZona==""||z.idGrupoPoblacional==""||z.idDepartamento==""||z.idCiudadIII==""){Coomuce.Util.ShowMessage({type:"ATENCION",title:d,msg:"Débe completar correctamente la sección 3. DATOS COMPLEMENTARIOS para continuar"});return false}var s=[];s.push({idFuanAfiliado:0,idFuan:0,tipoFuanAfiliado:"Cotizante",primerApellidoFuanAfiliado:z.primerApellidoFuanAfiliado,segundoApellidoFuanAfiliado:z.segundoApellidoFuanAfiliado,primerNombreFuanAfiliado:z.primerNombreFuanAfiliado,segundoNombreFuanAfiliado:z.segundoNombreFuanAfiliado,idTipoIdentificacion:z.idTipoIdentificacionII,identificacionFuanAfiliado:z.identificacionFuanAfiliado,idTipoSexo:z.idTipoSexoII,fechaNacimientoFuanAfiliado:z.fechaNacimientoFuanAfiliado,idTipoEtnia:z.idTipoEtnia,idTipoDiscapacidad:(z.idTipoDiscapacidad!=null)?z.idTipoDiscapacidad:null,idCondicionDiscapacidad:(z.idCondicionDiscapacidad!=null)?z.idCondicionDiscapacidad:null,puntajeSisbenFuanAfiliado:(z.puntajeSisbenFuanAfiliado)?z.puntajeSisbenFuanAfiliado:0,numCarnetFuanAfiliado:z.numCarnetFuanAfiliado,idGrupoPoblacional:(z.idGrupoPoblacional!=null)?z.idGrupoPoblacional:null,arlFuanAfiliado:z.arlFuanAfiliado,pensionFuanAfiliado:z.pensionFuanAfiliado,ibcFuanAfiliado:(z.ibcFuanAfiliado!=null)?z.ibcFuanAfiliado:"",direccionFuanAfiliado:z.direccionFuanAfiliado,telefonoFuanAfiliado:z.telefonoFuanAfiliado,celularFuanAfiliado:z.celularFuanAfiliado,emailFuanAfiliado:z.emailFuanAfiliado,idCiudad:(z.idCiudadIII!=null)?z.idCiudadIII:null,idTipoZona:z.idTipoZona,barrioFuanAfiliado:z.barrioFuanAfiliado,primerApellidoConyugueFuanAfiliado:z.primerApellidoConyugueFuanAfiliado,segundoApellidoConyugueFuanAfiliado:z.segundoApellidoConyugueFuanAfiliado,primerNombreConyugueFuanAfiliado:z.primerNombreConyugueFuanAfiliado,segundoNombreConyugueFuanAfiliado:z.segundoNombreConyugueFuanAfiliado,idTipoIdentificacionConyugue:(z.idTipoIdentificacionConyugue!="")?z.idTipoIdentificacionConyugue:null,identificacionConyugueFuanAfiliado:z.identificacionConyugueFuanAfiliado,idTipoSexoConyugue:(z.idTipoSexoConyugueFuanAfiliado!="")?z.idTipoSexoConyugueFuanAfiliado:null,fechaNacimientoConyugueFuanAfiliado:(z.fechaNacimientoConyugueFuanAfiliado!="")?z.fechaNacimientoConyugueFuanAfiliado:null,upcFuanAfiliado:0,cabezafamilia:1,grupofamiliar:(z.identificacionFuanAfiliado!="")?parseInt(z.identificacionFuanAfiliado):null,identificacionAnexo:z.documentoNovedad,firmaFuanAfiliado:(z.firmaNovedad)?z.firmaNovedad:"",idTipoParentesco:null});var w={idFuanEmpleadorAfiliado:0,idFuanAfiliado:0,nombreFuanEmpleadorAfiliado:z.nombreFuanEmpleadorAfiliado,idTipoIdentificacion:(z.idTipoIdentificacion!="")?z.idTipoIdentificacion:4,identificacionFuanEmpleadorAfiliado:z.identificacionFuanEmpleadorAfiliado,tipoPagadorFuanEmpleadorAfiliado:z.tipoPagadorFuanEmpleadorAfiliado,direccionFuanEmpleadorAfiliado:z.direccionFuanEmpleadorAfiliado,telefonoFuanEmpleadorAfiliado:z.telefonoFuanEmpleadorAfiliado,emailFuanEmpleadorAfiliado:z.emailFuanEmpleadorAfiliado,idCiudad:(z.idCiudadV!="")?z.idCiudadV:1};var t=Ext.getCmp("Grid-Beneficiarios");var p=Ext.getCmp("Grid-IpsPrimaria");var b=Ext.getCmp("Grid-DeclaracionAutorizacion");Ext.each(t.getStore().data.items,function(h,g,e){var f=h.data;f.cabezafamilia=0;f.grupofamiliar=z.identificacionFuanAfiliado;if(f.primerApellidoFuanAfiliado!=""||f.primerNombreFuanAfiliado!=""||f.idTipoIdentificacionII!=""||f.identificacionFuanAfiliado!=""||f.idTipoSexoII!=""||f.fechaNacimientoFuanAfiliado!=""){if(f.idTipoEtnia!=""||f.idTipoDiscapacidad!=""||f.idCondicionDiscapacidad!=""||f.idTipoZona!=""||f.idGrupoPoblacional!=""||f.idDepartamento!=""||f.idCiudadIII==""){s.push(f)}else{Coomuce.Util.ShowMessage({type:"ATENCION",title:d,msg:"Débe completar correctamente la sección de beneficiarios para continuar"});return false}}else{Coomuce.Util.ShowMessage({type:"ATENCION",title:d,msg:"Débe completar correctamente la sección de beneficiarios para continuar"});return false}});var a=[];Ext.each(p.getStore().data.items,function(h,g,e){var f=h.data;a.push(f)});var q=[];Ext.each(b.getStore().data.items,function(h,g,e){var f=h.data;q.push(f)});var u={idFuan:0,totalAnexo56FuanAnexos:(z.TotalQuantity!="")?parseInt(z.TotalQuantity):0,totalAnexo56CNFuanAnexos:(z.CNQuantity!="")?z.CNQuantity:0,totalAnexo56RCFuanAnexos:(z.RCQuantity!="")?z.RCQuantity:0,totalAnexo56TIFuanAnexos:(z.TIQuantity!="")?z.TIQuantity:0,totalAnexo56CCFuanAnexos:(z.CCQuantity!="")?z.CCQuantity:0,totalAnexo56PAFuanAnexos:(z.PAQuantity!="")?z.PAQuantity:0,totalAnexo56CEFuanAnexos:(z.CEQuantity!="")?z.CEQuantity:0,totalAnexo56CDFuanAnexos:(z.CDQuantity!="")?z.CDQuantity:0,totalAnexo56CSFuanAnexos:(z.CSQuantity!="")?z.CSQuantity:0,anexo57:z.incapacidadPermanenteNovedad,anexo58:z.registroCivilNovedad,anexo59:z.escrituraPublicaNovedad,anexo60:z.certificadoAdopcionNovedad,anexo61:z.ordenJudicialNovedad,anexo62:z.perdidaPPNovedad,anexo63:z.authTrasladoNovedad,anexo64:z.certificadoVinculacionNovedad,anexo65:z.actoAdministrativoNovedad};var r={url:Coomuce.Url.Funciones+"AfiliacionGuardar",data:{infoFuan:v,afiliado:s,ips:a,declaracion:q,anexos:u,empleador:w},targetMask:y,msgMask:"Guardando datos...",fnSuccess:function(e){c.onBotonCancelarClick()}};console.log(r.data);Coomuce.Util.EnviarPost(r)}})},onBotonCancelarClick:function(){Ext.getCmp("Form-Afiliacion").getForm().reset();var b=Ext.getCmp("CoomuceAfiliacion");b.destroy()},onUploadDataComplete:function(j,m){var n=this.getTitleView();var h=j.getWidgetRecord();var i=h.get("idTipoIdentificacion");h.set("identificacionAnexo",m.data);if(i!=null){if(i==1){var k=this.lookupReference("CNQuantity");var l=this.lookupReference("TotalQuantity");k.setValue(k.getValue()+1);l.setValue(l.getValue()+1)}if(i==2){var k=this.lookupReference("RCQuantity");var l=this.lookupReference("TotalQuantity");k.setValue(k.getValue()+1);l.setValue(l.getValue()+1)}if(i==3){var k=this.lookupReference("TIQuantity");var l=this.lookupReference("TotalQuantity");k.setValue(k.getValue()+1);l.setValue(l.getValue()+1)}if(i==4){var k=this.lookupReference("CCQuantity");var l=this.lookupReference("TotalQuantity");k.setValue(k.getValue()+1);l.setValue(l.getValue()+1)}if(i==5){var k=this.lookupReference("CEQuantity");var l=this.lookupReference("TotalQuantity");k.setValue(k.getValue()+1);l.setValue(l.getValue()+1)}if(i==6){var k=this.lookupReference("PAQuantity");var l=this.lookupReference("TotalQuantity");k.setValue(k.getValue()+1);l.setValue(l.getValue()+1)}if(i==7){var k=this.lookupReference("CDQuantity");var l=this.lookupReference("TotalQuantity");k.setValue(k.getValue()+1);l.setValue(l.getValue()+1)}}Coomuce.Util.ShowMessage({type:"INFO",title:n,msg:"Archivo de firma importado correctamente."})},onUploadFirmaDataComplete:function(h,i){var j=this.getTitleView();var g=this.lookupReference("botonEliminarFirma");var f=this.lookupReference("firmaNovedad");g.setText(i.data);f.setValue(i.data);Coomuce.Util.ShowMessage({type:"INFO",title:j,msg:"Archivo de firma importado correctamente."})},onUploadDocumentoDataComplete:function(k,n){var i=this.lookupReference("idTipoIdentificacionII").getValue();var o=this.getTitleView();var j=this.lookupReference("botonEliminarDocumento");var p=this.lookupReference("documentoNovedad");if(i!=null){if(i==1){var l=this.lookupReference("CNQuantity");var m=this.lookupReference("TotalQuantity");l.setValue(l.getValue()+1);m.setValue(m.getValue()+1)}if(i==2){var l=this.lookupReference("RCQuantity");var m=this.lookupReference("TotalQuantity");l.setValue(l.getValue()+1);m.setValue(m.getValue()+1)}if(i==3){var l=this.lookupReference("TIQuantity");var m=this.lookupReference("TotalQuantity");l.setValue(l.getValue()+1);m.setValue(m.getValue()+1)}if(i==4){var l=this.lookupReference("CCQuantity");var m=this.lookupReference("TotalQuantity");l.setValue(l.getValue()+1);m.setValue(m.getValue()+1)}if(i==5){var l=this.lookupReference("CEQuantity");var m=this.lookupReference("TotalQuantity");l.setValue(l.getValue()+1);m.setValue(m.getValue()+1)}if(i==6){var l=this.lookupReference("PAQuantity");var m=this.lookupReference("TotalQuantity");l.setValue(l.getValue()+1);m.setValue(m.getValue()+1)}if(i==7){var l=this.lookupReference("CDQuantity");var m=this.lookupReference("TotalQuantity");l.setValue(l.getValue()+1);m.setValue(m.getValue()+1)}}j.setText(n.data);p.setValue(n.data);Coomuce.Util.ShowMessage({type:"INFO",title:o,msg:"Documento importado correctamente."})},onUploadIncapacidadPermanenteDataComplete:function(h,j){var f=this.getTitleView();var g=this.lookupReference("botonEliminarIncapacidadPermanente");var i=this.lookupReference("incapacidadPermanenteNovedad");g.setText(j.data);i.setValue(j.data);Coomuce.Util.ShowMessage({type:"INFO",title:f,msg:"Documento importado correctamente."})},onUploadEscrituraPublicaDataComplete:function(h,j){var f=this.getTitleView();var g=this.lookupReference("botonEliminarEscrituraPublica");var i=this.lookupReference("escrituraPublicaNovedad");g.setText(j.data);i.setValue(j.data);Coomuce.Util.ShowMessage({type:"INFO",title:f,msg:"Documento importado correctamente."})},onUploadOrdenJudicialDataComplete:function(h,i){var j=this.getTitleView();var g=this.lookupReference("botonEliminarOrdenJudicial");var f=this.lookupReference("ordenJudicialNovedad");g.setText(i.data);f.setValue(i.data);Coomuce.Util.ShowMessage({type:"INFO",title:j,msg:"Documento importado correctamente."})},onUploadCertificadoAdopcionDataComplete:function(h,j){var f=this.getTitleView();var g=this.lookupReference("botonEliminarCertificadoAdopcion");var i=this.lookupReference("certificadoAdopcionNovedad");g.setText(j.data);i.setValue(j.data);Coomuce.Util.ShowMessage({type:"INFO",title:f,msg:"Documento importado correctamente."})},onUploadPerdidaPPDataComplete:function(h,i){var j=this.getTitleView();var g=this.lookupReference("botonEliminarPerdidaPP");var f=this.lookupReference("perdidaPPNovedad");g.setText(i.data);f.setValue(i.data);Coomuce.Util.ShowMessage({type:"INFO",title:j,msg:"Documento importado correctamente."})},onUploadAuthTrasladoDataComplete:function(h,i){var j=this.getTitleView();var f=this.lookupReference("botonEliminarAuthTraslado");var g=this.lookupReference("authTrasladoNovedad");f.setText(i.data);g.setValue(i.data);Coomuce.Util.ShowMessage({type:"INFO",title:j,msg:"Documento importado correctamente."})},onUploadCertificadoVinculacionDataComplete:function(h,i){var j=this.getTitleView();var g=this.lookupReference("botonEliminarCertificadoVinculacion");var f=this.lookupReference("certificadoVinculacionNovedad");g.setText(i.data);f.setValue(i.data);Coomuce.Util.ShowMessage({type:"INFO",title:j,msg:"Documento importado correctamente."})},onUploadActoAdministrativoDataComplete:function(h,j){var f=this.getTitleView();var g=this.lookupReference("botonEliminarActoAdministrativo");var i=this.lookupReference("actoAdministrativoNovedad");g.setText(j.data);i.setValue(j.data);Coomuce.Util.ShowMessage({type:"INFO",title:f,msg:"Documento importado correctamente."})},onUploadRegistroCivilDataComplete:function(h,i){var j=this.getTitleView();var g=this.lookupReference("botonEliminarRegistroCivil");var f=this.lookupReference("registroCivilNovedad");g.setText(i.data);f.setValue(i.data);Coomuce.Util.ShowMessage({type:"INFO",title:j,msg:"Documento importado correctamente."})},onUploadFirmaError:function(h,j){var f=this;var g=f.getTitleView();var i="ErrorType: "+j.errorType;switch(j.errorType){case"FileSize":i="Este archivo es demasiado grande: "+Ext.util.Format.fileSize(j.fileSize)+". El tamaño máximo de subida es "+Ext.util.Format.fileSize(j.maxFileSize)+".";break;case"QueueLength":i="La longitud de la cola es demasiado larga: "+j.queueLength+". La longitud máxima de la cola es "+j.maxQueueLength+".";break}Coomuce.Util.ShowMessage({type:"ERROR",title:g,msg:i})},onBotonEliminarFirmaClick:function(c){c.setText("");var d=this.lookupReference("firmaNovedad");d.setValue("")},onBotonEliminarDocumentoClick:function(c){c.setText("");var d=this.lookupReference("documentoNovedad");d.setValue("")},onBotonEliminarIncapacidadPermanenteClick:function(d){d.setText("");var c=this.lookupReference("incapacidadPermanenteNovedad");c.setValue("")},onBotonEliminarEscrituraPublicaClick:function(d){d.setText("");var c=this.lookupReference("escrituraPublicaNovedad");c.setValue("")},onBotonEliminarCertificadoAdopcionClick:function(d){d.setText("");var c=this.lookupReference("certificadoAdopcionNovedad");c.setValue("")},onBotonEliminarOrdenJudicialClick:function(c){c.setText("");var d=this.lookupReference("ordenJudicialNovedad");d.setValue("")},onBotonEliminarPerdidaPPClick:function(c){c.setText("");var d=this.lookupReference("perdidaPPNovedad");d.setValue("")},onBotonEliminarAuthTrasladoClick:function(c){c.setText("");var d=this.lookupReference("authTrasladoNovedad");d.setValue("")},onBotonEliminarCertificadoVinculacionClick:function(c){c.setText("");var d=this.lookupReference("certificadoVinculacionNovedad");certificadoVinculacionNovedad.setValue("")},onBotonEliminarActoAdministrativoClick:function(d){d.setText("");var c=this.lookupReference("actoAdministrativoNovedad");c.setValue("")},onBotonEliminarRegistroCivilClick:function(c){c.setText("");var d=this.lookupReference("registroCivilNovedad");d.setValue("")}});Ext.define("CoomuceMod.view.ActualizacionBd.AfiliacionModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.actualizacionbd-afiliacion",stores:{getTipoTramite:{autoLoad:true,model:"CoomuceMod.model.Parametros.ActualizacionBd.TipoTramite",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetTipoTramiteAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getTipoAfiliacion:{autoLoad:true,model:"CoomuceMod.model.Parametros.ActualizacionBd.TipoAfiliacion",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetTipoAfiliacionAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getTipoRegimen:{autoLoad:true,model:"CoomuceMod.model.Parametros.ActualizacionBd.TipoRegimen",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetTipoRegimenAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getTipoAfiliado:{autoLoad:true,model:"CoomuceMod.model.Parametros.ActualizacionBd.TipoAfiliado",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetTipoAfiliadoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getTipoCotizante:{autoLoad:true,model:"CoomuceMod.model.Parametros.ActualizacionBd.TipoCotizante",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetTipoCotizanteAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getTipoIdentificacion:{autoLoad:true,model:"CoomuceMod.model.Parametros.Generales.TipoIdentificacion",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetTipoIdentificacionAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getTipoSexo:{autoLoad:true,model:"CoomuceMod.model.Parametros.Generales.TipoSexo",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetTipoSexoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getTipoEtnia:{autoLoad:true,model:"CoomuceMod.model.Parametros.ActualizacionBd.TipoEtnia",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetTipoEtniaAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getTipoDiscapacidad:{autoLoad:true,model:"CoomuceMod.model.Parametros.ActualizacionBd.TipoDiscapacidad",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetTipoDiscapacidadAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getCondicionDiscapacidad:{autoLoad:true,model:"CoomuceMod.model.Parametros.ActualizacionBd.CondicionDiscapacidad",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetCondicionDiscapacidadAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getGrupoPoblacional:{autoLoad:true,model:"CoomuceMod.model.Parametros.ActualizacionBd.GrupoPoblacional",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetGrupoPoblacionalAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getArl:{autoLoad:true,proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Funciones+"GetArlAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getAfp:{autoLoad:true,proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Funciones+"GetAfpAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getCiudad:{autoLoad:false,model:"CoomuceMod.model.Administracion.Ciudad",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Administracion+"GetCiudadAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getDepartamento:{autoLoad:true,model:"CoomuceMod.model.Administracion.Departamento",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Administracion+"GetDepartamentoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getTipoZona:{autoLoad:true,model:"CoomuceMod.model.Parametros.Generales.TipoZona",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetTipoZonaAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getTipoParentesco:{autoLoad:true,model:"CoomuceMod.model.Parametros.ActualizacionBd.TipoParentesco",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetTipoParentescoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getTipoNovedad:{autoLoad:true,fields:["idFuan","idTipoNovedad","compTipoNovedad","tipoValorCampoTipoNovedad","valorCampoTipoNovedad","selFuanTipoNovedad","valorFuanTipoNovedad"],proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Funciones+"GetTipoNovedadAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getMotivoTraslado:{autoLoad:true,model:"CoomuceMod.model.Parametros.ActualizacionBd.MotivoTraslado",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetMotivoTrasladoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getDeclaracionAutorizacion:{storeId:"declaracionAutorizacionStore",autoLoad:true,fields:["idFuan","idDeclaracionAutorizacion","compDeclaracionAutorizacion","valorFuanDeclaracionAutorizacion"],proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Funciones+"GetDeclaracionAutorizacionAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},setFuanBeneficiario:{fields:["primerApellidoFuanBeneficiariosAfiliado","segundoApellidoFuanBeneficiariosAfiliado","primerNombreFuanBeneficiariosAfiliado","segundoNombreFuanBeneficiariosAfiliado","idTipoIdentificacion","compTipoIdentificacion","identificacionFuanBeneficiariosAfiliado","idTipoSexo","compTipoSexo","fechaNacimientoFuanBeneficiariosAfiliado","idTipoParentesco","compTipoParentesco","idTipoEtnia","compTipoEtnia","idTipoDiscapacidad","compTipoDiscapacidad","idCondicionDiscapacidad","compCondicionDiscapacidad","idDepartamento","compDepartamento","idCiudad","compCiudad","idTipoZona","compTipoZona","telefonoFuanBeneficiariosAfiliado","upcFuanBeneficiariosAfiliado","firmaBeneficiario"]},setFuanIpsPrimaria:{storeId:"ipsAfiliadoStore",fields:["tipoFuanIpsPrimariaAfiliado","nombreCompletoIps","nombreFuanIpsPrimariaAfiliado","codigoFuanIpsPrimariaAfiliado"]},getConfData:{storeId:"confDataStore",autoLoad:true,fields:["idConfiguracionGeneral","tiempoInactividadConfiguracionGeneral","salarioConfiguracionGeneral","emailSalienteConfiguracionGeneral","pswEmailConfiguracionGeneral","ccConfiguracionGeneral","csConfiguracionGeneral","hostConfiguracionGeneral","portConfiguracionGeneral","sslConfiguracionGeneral"],proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Administracion+"GetConfiguracionGeneralAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.ActualizacionBd.Afiliacion",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.ActualizacionBd.AfiliacionController","CoomuceMod.view.ActualizacionBd.AfiliacionModel"],controller:"actualizacionbd-afiliacion",viewModel:{type:"actualizacionbd-afiliacion"},layout:"fit",listeners:{afterrender:"onAfterRender"},dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick",reference:"botonGuardar"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick",reference:"botonCancelar"}]}],items:[{xtype:"form",bodyPadding:10,id:"Form-Afiliacion",scrollable:true,items:[{xtype:"fieldset",defaults:{allowBlank:false,anchor:"100%",labelWidth:150},items:[{xtype:"numberfield",hidden:true,name:"idTipoTramite",value:1},{xtype:"combo",bind:{store:"{getTipoAfiliacion}"},displayField:"compTipoAfiliacion",editable:false,fieldLabel:"Tipo de Afiliación",name:"idTipoAfiliacion",queryMode:"local",valueField:"idTipoAfiliacion"},{xtype:"combo",bind:{store:"{getTipoRegimen}"},componentReference:["arlFuanAfiliado","pensionFuanAfiliado","ibcFuanAfiliado"],displayField:"compTipoRegimen",editable:false,fieldLabel:"Régimen",listeners:{select:"onSelectCombo"},name:"idTipoRegimen",regimen:true,queryMode:"local",valueField:"idTipoRegimen"},{xtype:"combo",bind:{store:"{getTipoAfiliado}"},displayField:"compTipoAfiliado",editable:false,fieldLabel:"Tipo de Afiliado",name:"idTipoAfiliado",queryMode:"local",valueField:"idTipoAfiliado"},{xtype:"combo",bind:{store:"{getTipoCotizante}"},displayField:"compTipoCotizante",editable:false,fieldLabel:"Tipo de Cotizante",name:"idTipoCotizante",queryMode:"local",valueField:"idTipoCotizante"},{xtype:"textfield",fieldLabel:"Código<br />(A registrar por la EPS.)",allowBlank:true,name:"codigoCotizanteFuan",value:""}],title:"I. DATOS DEL TRAMITE"},{xtype:"fieldset",defaults:{allowBlank:false,anchor:"100%",labelWidth:150},items:[{xtype:"textfield",fieldLabel:"Primer apellido",name:"primerApellidoFuanAfiliado"},{xtype:"textfield",allowBlank:true,fieldLabel:"Segundo apellido",name:"segundoApellidoFuanAfiliado"},{xtype:"textfield",fieldLabel:"Primer nombre",name:"primerNombreFuanAfiliado"},{xtype:"textfield",allowBlank:true,fieldLabel:"Segundo nombre",name:"segundoNombreFuanAfiliado"},{xtype:"combo",bind:{store:"{getTipoIdentificacion}"},displayField:"compTipoIdentificacion",editable:false,fieldLabel:"Tipo documento de identidad",name:"idTipoIdentificacionII",reference:"idTipoIdentificacionII",queryMode:"local",valueField:"idTipoIdentificacion"},{xtype:"numberfield",fieldLabel:"Número de documento de identidad",name:"identificacionFuanAfiliado",value:0},{xtype:"combo",bind:{store:"{getTipoSexo}"},displayField:"compTipoSexo",editable:false,fieldLabel:"Sexo",name:"idTipoSexoII",queryMode:"local",valueField:"idTipoSexo"},{xtype:"datefield",fieldLabel:"Fecha de nacimiento",name:"fechaNacimientoFuanAfiliado"}],title:"II. DATOS BÁSICOS DE IDENTIFICACIÓN<br />(del cotizante o cabeza de familia)"},{xtype:"fieldset",defaults:{allowBlank:false,anchor:"100%",labelWidth:150},items:[{xtype:"label",html:"<b>Datos Personales</b>"},{xtype:"combo",bind:{store:"{getTipoEtnia}"},displayField:"compTipoEtnia",editable:false,fieldLabel:"Etnia",name:"idTipoEtnia",queryMode:"local",valueField:"idTipoEtnia"},{xtype:"combo",allowBlank:true,bind:{store:"{getTipoDiscapacidad}"},displayField:"compTipoDiscapacidad",editable:false,fieldLabel:"Tipo discapacidad",name:"idTipoDiscapacidad",queryMode:"local",valueField:"idTipoDiscapacidad"},{xtype:"combo",allowBlank:true,bind:{store:"{getCondicionDiscapacidad}"},displayField:"compCondicionDiscapacidad",editable:false,fieldLabel:"Condición discapacidad",name:"idCondicionDiscapacidad",queryMode:"local",valueField:"idCondicionDiscapacidad"},{xtype:"textfield",fieldLabel:"Puntaje SISBEN",listeners:{blur:"onDecimalNumber"},name:"puntajeSisbenFuanAfiliado"},{xtype:"numberfield",fieldLabel:"No. Carnet",name:"numCarnetFuanAfiliado"},{xtype:"combo",bind:{store:"{getGrupoPoblacional}"},displayField:"compGrupoPoblacional",editable:false,fieldLabel:"Grupo de población especial",name:"idGrupoPoblacional",queryMode:"local",valueField:"idGrupoPoblacional"},{xtype:"combo",bind:{store:"{getArl}"},displayField:"nombreCompleto",editable:false,fieldLabel:"Administradora de Riesgos Laborales - ARL",name:"arlFuanAfiliado",reference:"arlFuanAfiliado",queryMode:"local",valueField:"nombreCompleto",allowBlank:true},{xtype:"combo",bind:{store:"{getAfp}"},displayField:"nombreCompleto",editable:false,fieldLabel:"Administradora de Pensiones",name:"pensionFuanAfiliado",reference:"pensionFuanAfiliado",queryMode:"local",valueField:"nombreCompleto",allowBlank:true},{xtype:"numberfield",hidden:true,allowBlank:true,name:"ibcFuanAfiliado",reference:"ibcFuanAfiliado",readOnly:true,value:Coomuce.Util.DatosUsuario.salarioMinimo},{xtype:"numberfield",allowBlank:true,fieldLabel:"Ingreso Base de Cotización - IBC",listeners:{blur:"onBlurNumber"},name:"ibcFuanAfiliadoCurrency",reference:"ibcFuanAfiliadoCurrency",readOnly:true,value:Coomuce.Util.DatosUsuario.salarioMinimo},{xtype:"textfield",fieldLabel:"Dirección residencia",name:"direccionFuanAfiliado"},{xtype:"numberfield",allowBlank:true,fieldLabel:"Teléfono Fijo",name:"telefonoFuanAfiliado",value:0},{xtype:"numberfield",allowBlank:true,fieldLabel:"Teléfono Celular",name:"celularFuanAfiliado",value:0},{xtype:"textfield",allowBlank:true,fieldLabel:"Correo Electrónico",name:"emailFuanAfiliado",vtype:"email"},{xtype:"combo",bind:{store:"{getDepartamento}"},ciudadReference:"idCiudadfIII",displayField:"compDepartamento",editable:false,fieldLabel:"Departamento",listeners:{select:"onSelectCombo"},name:"idDepartamento",queryMode:"local",ubicacion:true,valueField:"idDepartamento"},{xtype:"combo",bind:{store:"{getCiudad}"},displayField:"compCiudad",editable:false,fieldLabel:"Municipio/Distrito",name:"idCiudadIII",queryMode:"local",reference:"idCiudadfIII",valueField:"idCiudad"},{xtype:"combo",bind:{store:"{getTipoZona}"},displayField:"compTipoZona",editable:false,fieldLabel:"Zona",name:"idTipoZona",queryMode:"local",valueField:"idTipoZona"},{xtype:"textfield",allowBlank:true,fieldLabel:"Localidad / Comuna",name:"barrioFuanAfiliado"}],title:"III. DATOS COMPLEMENTARIOS"},{xtype:"fieldset",defaults:{allowBlank:true,anchor:"100%",labelWidth:150},items:[{xtype:"label",html:"<b>Datos básicos de Identificación del cónyuge o compañero(a) permanente cotizante</b>"},{xtype:"textfield",fieldLabel:"Primer apellido",name:"primerApellidoConyugueFuanAfiliado"},{xtype:"textfield",fieldLabel:"Segundo apellido",name:"segundoApellidoConyugueFuanAfiliado"},{xtype:"textfield",fieldLabel:"Primer nombre",name:"primerNombreConyugueFuanAfiliado"},{xtype:"textfield",fieldLabel:"Segundo nombre",name:"segundoNombreConyugueFuanAfiliado"},{xtype:"combo",bind:{store:"{getTipoIdentificacion}"},displayField:"compTipoIdentificacion",editable:false,fieldLabel:"Tipo documento de identidad",name:"idTipoIdentificacionConyugue",queryMode:"local",valueField:"idTipoIdentificacion"},{xtype:"numberfield",fieldLabel:"Número de documento de identidad",name:"identificacionConyugueFuanAfiliado",value:0},{xtype:"combo",bind:{store:"{getTipoSexo}"},displayField:"compTipoSexo",editable:false,fieldLabel:"Sexo",name:"idTipoSexoConyugueFuanAfiliado",queryMode:"local",valueField:"idTipoSexo"},{xtype:"datefield",fieldLabel:"Fecha de nacimiento",name:"fechaNacimientoConyugueFuanAfiliado"},{xtype:"grid",bind:{store:"{setFuanBeneficiario}"},border:true,columns:[{dataIndex:"primerApellidoFuanAfiliado",header:"Primer apellido",width:160,editor:{allowBlank:false}},{dataIndex:"segundoApellidoFuanAfiliado",header:"Segundo apellido",width:160,editor:{allowBlank:true}},{dataIndex:"primerNombreFuanAfiliado",header:"Primer nombre",width:160,editor:{allowBlank:false}},{dataIndex:"segundoNombreFuanAfiliado",header:"Segundo nombre",width:160,editor:{allowBlank:true}},{dataIndex:"idTipoIdentificacion",header:"Id Identificación",hidden:true},{dataIndex:"compTipoIdentificacion",header:"Tipo de documento de identidad",width:250,editor:{xtype:"combo",bind:{store:"{getTipoIdentificacion}"},displayField:"compTipoIdentificacion",editable:false,idCampo:"idTipoIdentificacion",listeners:{select:"onSelectCombo"},queryMode:"local",valueField:"compTipoIdentificacion"}},{dataIndex:"identificacionFuanAfiliado",header:"Número de documento de identidad",width:200,editor:{xtype:"numberfield",allowBlank:true}},{dataIndex:"idTipoSexo",header:"Id Tipo Sexo",hidden:true},{dataIndex:"compTipoSexo",header:"Sexo",width:160,editor:{xtype:"combo",bind:{store:"{getTipoSexo}"},displayField:"compTipoSexo",editable:false,idCampo:"idTipoSexo",listeners:{select:"onSelectCombo"},queryMode:"local",valueField:"compTipoSexo"}},{dataIndex:"fechaNacimientoFuanAfiliado",header:"Fecha de nacimiento",width:160,editor:{xtype:"datefield",format:"d/m/Y"}},{text:"DATOS COMPLEMENTARIOS",columns:[{dataIndex:"idTipoParentesco",header:"Id Tipo Parentesco",hidden:true},{dataIndex:"compTipoParentesco",header:"Parentesco",width:160,editor:{xtype:"combo",bind:{store:"{getTipoParentesco}"},displayField:"compTipoParentesco",editable:false,idCampo:"idTipoParentesco",listeners:{select:"onSelectCombo"},queryMode:"local",valueField:"compTipoParentesco"}},{dataIndex:"idTipoEtnia",header:"Id Tipo Etnia",hidden:true},{dataIndex:"compTipoEtnia",header:"Etnia",width:160,editor:{xtype:"combo",bind:{store:"{getTipoEtnia}"},displayField:"compTipoEtnia",editable:false,idCampo:"idTipoEtnia",listeners:{select:"onSelectCombo"},queryMode:"local",valueField:"compTipoEtnia"}},{text:"Discapacidad",columns:[{dataIndex:"idTipoDiscapacidad",header:"Id Tipo Discapacidad",hidden:true},{dataIndex:"compTipoDiscapacidad",header:"Tipo",width:160,editor:{xtype:"combo",bind:{store:"{getTipoDiscapacidad}"},displayField:"compTipoDiscapacidad",editable:false,idCampo:"idTipoDiscapacidad",listeners:{select:"onSelectCombo"},queryMode:"local",valueField:"compTipoDiscapacidad"}},{dataIndex:"idCondicionDiscapacidad",header:"Id Condición Discapacidad",hidden:true},{dataIndex:"compCondicionDiscapacidad",header:"Condición",width:160,editor:{xtype:"combo",bind:{store:"{getCondicionDiscapacidad}"},displayField:"compCondicionDiscapacidad",editable:false,idCampo:"idCondicionDiscapacidad",listeners:{select:"onSelectCombo"},queryMode:"local",valueField:"compCondicionDiscapacidad"}}]},{text:"Datos de Residencia",columns:[{dataIndex:"idDepartamento",header:"Id Departamento",hidden:true},{dataIndex:"compDepartamento",header:"Departamento",width:160,editor:{xtype:"combo",bind:{store:"{getDepartamento}"},displayField:"compDepartamento",editable:false,idCampo:"idDepartamento",listeners:{select:"onSelectCombo"},queryMode:"local",valueField:"compDepartamento"}},{dataIndex:"idCiudad",header:"Id Ciudad",hidden:true},{dataIndex:"compCiudad",header:"Municipio/Distrito",width:160,editor:{xtype:"combo",allowBlank:false,bind:{store:"{getCiudad}"},displayField:"compCiudad",editable:false,idCampo:"idCiudad",listeners:{focus:"onFocusCombo",select:"onSelectCombo"},queryMode:"local",valueField:"compCiudad"}},{dataIndex:"idTipoZona",header:"Id Tipo Zona",hidden:true},{dataIndex:"compTipoZona",header:"Zona",width:160,editor:{xtype:"combo",bind:{store:"{getTipoZona}"},displayField:"compTipoZona",editable:false,idCampo:"idTipoZona",listeners:{select:"onSelectCombo"},queryMode:"local",valueField:"compTipoZona"}},{dataIndex:"telefonoFuanAfiliado",header:"Teléfono Fijo y/o Celular",width:200,editor:{xtype:"numberfield",allowBlank:true}},{dataIndex:"upcFuanAfiliado",header:"Valor de la UPC del afiliado adicional",width:250,editor:{xtype:"numberfield",decimalPrecision:0}},{xtype:"widgetcolumn",header:"",width:60,widget:{xtype:"uploader",uploadConfig:{uploadUrl:Coomuce.Url.Funciones+"ImportarFirma",maxFileSize:10*1024*1024},inputAttrTpl:"data-qtip='Seleccione el archivo.'",listeners:{uploaddatacomplete:"onUploadDataComplete",uploaderror:"onUploadError"}}},{xtype:"widgetcolumn",dataIndex:"identificacionAnexo",header:"Anexo documento",width:200,widget:{xtype:"button",iconCls:"x-fa fa-minus-circle",textAlign:"left",handler:"onBotonEliminarArchivoClick"}}]}]}],columnLines:true,height:250,id:"Grid-Beneficiarios",plugins:{ptype:"cellediting",clicksToEdit:1},sortableColumns:false,title:"Datos básicos de identificación de los beneficiarios y los afiliados adicionales",tools:[{handler:"onToolBeneficiarioAdicionarClick",tooltip:"Adicionar beneficiario",type:"plus"},{handler:"onToolBeneficiarioRemoverClick",tooltip:"Remover beneficiario",type:"minus"}]},{xtype:"label",html:"&nbsp;"},{xtype:"grid",bind:{store:"{setFuanIpsPrimaria}"},border:true,columns:[{text:"Nombre de la Institución Prestadora de Servicios de Salud - IPS",columns:[{dataIndex:"tipoFuanIpsPrimariaAfiliado",header:"Tipo",width:160,editor:{xtype:"combo",displayField:"nombre",editable:false,queryMode:"local",store:Ext.create("Ext.data.ArrayStore",{fields:["nombre"],data:[["C"],["B"]]}),valueField:"nombre"}},{dataIndex:"nombreCompletoIps",name:"nombreCompletoIps",header:"",readOnly:true,width:400,editor:{allowBlank:false,readOnly:true}}]},{dataIndex:"codigoFuanIpsPrimariaAfiliado",header:"Código de la IPS<br />(A registrar por la EPS)",width:300,editor:{allowBlank:true}},{xtype:"widgetcolumn",header:"",width:40,widget:{xtype:"button",componentReference:["nombreCompletoIps"],handler:Coomuce.Util.buscarIpsAfiliacion,inGrid:true,iconCls:"x-fa fa-list-alt",tooltip:"Lista de Ips"}}],columnLines:true,height:200,id:"Grid-IpsPrimaria",plugins:{ptype:"cellediting",clicksToEdit:1},sortableColumns:false,title:"Selección de la EPS primaria",tools:[{handler:"onToolIpsPrimariaAdicionarClick",tooltip:"Adicionar IPS",type:"plus"},{handler:"onToolIpsPrimariaRemoverClick",tooltip:"Remover IPS",type:"minus"}]}],title:"IV. DATOS DE IDENTIFICACIÓN DE LOS MIEMBROS DEL NÚCLEO FAMILIAR"},{xtype:"fieldset",defaults:{allowBlank:true,anchor:"100%",labelWidth:150},items:[{xtype:"textfield",fieldLabel:"Nombre o Razón Social",name:"nombreFuanEmpleadorAfiliado"},{xtype:"combo",bind:{store:"{getTipoIdentificacion}"},displayField:"compTipoIdentificacion",editable:false,fieldLabel:"Tipo documento de identidad",name:"idTipoIdentificacion",queryMode:"local",valueField:"idTipoIdentificacion"},{xtype:"numberfield",fieldLabel:"Número de documento de identidad",name:"identificacionFuanEmpleadorAfiliado",value:0},{xtype:"textfield",fieldLabel:"Tipo de aportante o pagador pensiones (A registrar por la EPS)",name:"tipoPagadorFuanEmpleadorAfiliado"},{xtype:"textfield",fieldLabel:"Dirección",name:"direccionFuanEmpleadorAfiliado"},{xtype:"numberfield",fieldLabel:"Teléfono",name:"telefonoFuanEmpleadorAfiliado",value:0},{xtype:"textfield",fieldLabel:"Correo Electrónico",name:"emailFuanEmpleadorAfiliado",vtype:"email"},{xtype:"combo",bind:{store:"{getDepartamento}"},ciudadReference:"idCiudadfV",displayField:"compDepartamento",editable:false,fieldLabel:"Departamento",listeners:{select:"onSelectCombo"},name:"idDepartamento",queryMode:"local",ubicacion:true,valueField:"idDepartamento"},{xtype:"combo",bind:{store:"{getCiudad}"},displayField:"compCiudad",editable:false,fieldLabel:"Municipio/Distrito",name:"idCiudadV",queryMode:"local",reference:"idCiudadfV",valueField:"idCiudad"}],title:"V. DATOS DE IDENTIFICACIÓN DEL EMPLEADOR Y OTROS APORTANTES <br />DE LAS ENTIDADES RESPONSABLES DE LA AFILIACIÓN COLECTIVA, INSTITUCIONAL O DE OFICIO"},{xtype:"fieldset",defaults:{anchor:"100%"},items:[{xtype:"textfield",name:"valorFuanDeclaracionAutorizacion",hidden:true,reference:"valorFuanDeclaracionAutorizacion"},{xtype:"textfield",name:"compDeclaracionAutorizacion",hidden:true,reference:"compDeclaracionAutorizacion"},{xtype:"grid",bind:{store:"{getDeclaracionAutorizacion}"},columns:[{dataIndex:"valorFuanDeclaracionAutorizacion",width:40,hidden:true},{dataIndex:"compDeclaracionAutorizacion",header:"Descripción",width:700}],columnLines:true,height:300,loadMask:true,selModel:{type:"checkboxmodel",checkOnly:true,idCampo:"valorFuanDeclaracionAutorizacion",compCampo:"compDeclaracionAutorizacion",listeners:{selectionchange:"onSelectionChange"}},sortableColumns:false,hideHeaders:true,id:"Grid-DeclaracionAutorizacion"}],title:"VII. DECLARACION Y AUTORIZACIONES"},{xtype:"fieldset",bodyPadding:10,layout:{type:"hbox"},items:[{xtype:"fieldset",width:1000,bodyPadding:10,layout:{type:"hbox"},items:[{xtype:"uploader",fieldLabel:"Firma",uploadConfig:{uploadUrl:Coomuce.Url.Funciones+"ImportarFirma",maxFileSize:10*1024*1024},inputAttrTpl:"data-qtip='Seleccione el archivo.'",listeners:{uploaddatacomplete:"onUploadFirmaDataComplete",uploaderror:"onUploadFirmaError"}},{xtype:"textfield",name:"firmaNovedad",hidden:true,reference:"firmaNovedad"},{xtype:"button",iconCls:"x-fa fa-minus-circle",textAlign:"left",handler:"onBotonEliminarFirmaClick",reference:"botonEliminarFirma",width:250}],title:"El cotizante, beneficiario o cabeza de familia"}],title:"VIII. FIRMAS"},{xtype:"fieldset",bodyPadding:10,layout:{type:"vbox"},items:[{xtype:"fieldset",bodyPadding:10,width:1000,layout:{type:"hbox"},items:[{xtype:"numberfield",fieldLabel:"CN",labelWidth:20,width:70,name:"CNQuantity",reference:"CNQuantity",readOnly:true,value:0},{xtype:"numberfield",fieldLabel:"RC",labelWidth:20,width:70,name:"RCQuantity",reference:"RCQuantity",readOnly:true,value:0},{xtype:"numberfield",fieldLabel:"TI",labelWidth:20,width:70,name:"TIQuantity",reference:"TIQuantity",readOnly:true,value:0},{xtype:"numberfield",fieldLabel:"CC",labelWidth:20,width:70,name:"CCQuantity",reference:"CCQuantity",readOnly:true,value:0},{xtype:"numberfield",fieldLabel:"PA",labelWidth:20,width:70,name:"PAQuantity",reference:"PAQuantity",readOnly:true,value:0},{xtype:"numberfield",fieldLabel:"CE",labelWidth:20,width:70,name:"CEQuantity",reference:"CEQuantity",readOnly:true,value:0},{xtype:"numberfield",fieldLabel:"CD",labelWidth:20,width:70,name:"CDQuantity",reference:"CDQuantity",readOnly:true,value:0},{xtype:"numberfield",fieldLabel:"CS",labelWidth:20,width:70,name:"CSQuantity",reference:"CSQuantity",readOnly:true,value:0},{xtype:"numberfield",fieldLabel:"Total",labelWidth:50,width:100,name:"TotalQuantity",reference:"TotalQuantity",readOnly:true,value:0}],title:"Cantidad:"},{xtype:"fieldset",bodyPadding:10,width:1000,layout:{type:"hbox"},items:[{xtype:"uploader",fieldLabel:"Documento",uploadConfig:{uploadUrl:Coomuce.Url.Funciones+"ImportarDocumento",maxFileSize:10*1024*1024},inputAttrTpl:"data-qtip='Seleccione el archivo.'",listeners:{uploaddatacomplete:"onUploadDocumentoDataComplete",uploaderror:"onUploadFirmaError"}},{xtype:"textfield",name:"documentoNovedad",hidden:true,reference:"documentoNovedad"},{xtype:"button",iconCls:"x-fa fa-minus-circle",textAlign:"left",handler:"onBotonEliminarDocumentoClick",reference:"botonEliminarDocumento",width:250}],title:"Anexo copia del documento de Identidad"},{xtype:"fieldset",bodyPadding:10,width:1000,layout:{type:"hbox"},items:[{xtype:"uploader",fieldLabel:"IncapacidadPermanente",uploadConfig:{uploadUrl:Coomuce.Url.Funciones+"ImportarIncapacidadPermanente",maxFileSize:10*1024*1024},inputAttrTpl:"data-qtip='Seleccione el archivo.'",listeners:{uploaddatacomplete:"onUploadIncapacidadPermanenteDataComplete",uploaderror:"onUploadFirmaError"}},{xtype:"textfield",name:"incapacidadPermanenteNovedad",hidden:true,reference:"incapacidadPermanenteNovedad"},{xtype:"button",iconCls:"x-fa fa-minus-circle",textAlign:"left",handler:"onBotonEliminarIncapacidadPermanenteClick",reference:"botonEliminarIncapacidadPermanente",width:250}],title:"Copia del dictamen de incapacidad permanente emitido por la autoridad competente"},{xtype:"fieldset",bodyPadding:10,width:1000,layout:{type:"hbox"},items:[{xtype:"uploader",fieldLabel:"RegistroCivil",uploadConfig:{uploadUrl:Coomuce.Url.Funciones+"ImportarRegistroCivil",maxFileSize:10*1024*1024},inputAttrTpl:"data-qtip='Seleccione el archivo.'",listeners:{uploaddatacomplete:"onUploadRegistroCivilDataComplete",uploaderror:"onUploadFirmaError"}},{xtype:"textfield",name:"registroCivilNovedad",hidden:true,reference:"registroCivilNovedad"},{xtype:"button",iconCls:"x-fa fa-minus-circle",textAlign:"left",handler:"onBotonEliminarRegistroCivilClick",reference:"botonEliminarRegistroCivil",width:250}],title:"Copia del registro civil de matrimonio, o de la escritura pública, acta de conciliación o sentencia judicial que declare la unión marital"},{xtype:"fieldset",bodyPadding:10,width:1000,layout:{type:"hbox"},items:[{xtype:"uploader",fieldLabel:"EscrituraPublica",uploadConfig:{uploadUrl:Coomuce.Url.Funciones+"ImportarEscrituraPublica",maxFileSize:10*1024*1024},inputAttrTpl:"data-qtip='Seleccione el archivo.'",listeners:{uploaddatacomplete:"onUploadEscrituraPublicaDataComplete",uploaderror:"onUploadFirmaError"}},{xtype:"textfield",name:"escrituraPublicaNovedad",hidden:true,reference:"escrituraPublicaNovedad"},{xtype:"button",iconCls:"x-fa fa-minus-circle",textAlign:"left",handler:"onBotonEliminarEscrituraPublicaClick",reference:"botonEliminarEscrituraPublica",width:250}],title:"Copia de la escritura pública o sentencia judicial que declare el divorcio, sentencia judicial que declare la separación de <br />cuerpos y escritura pública, acta de conciliación o acta judicial que declare la terminación de la unión marital"},{xtype:"fieldset",bodyPadding:10,width:1000,layout:{type:"hbox"},items:[{xtype:"uploader",fieldLabel:"CertificadoAdopcion",uploadConfig:{uploadUrl:Coomuce.Url.Funciones+"ImportarCertificadoAdopcion",maxFileSize:10*1024*1024},inputAttrTpl:"data-qtip='Seleccione el archivo.'",listeners:{uploaddatacomplete:"onUploadCertificadoAdopcionDataComplete",uploaderror:"onUploadFirmaError"}},{xtype:"textfield",name:"certificadoAdopcionNovedad",hidden:true,reference:"certificadoAdopcionNovedad"},{xtype:"button",iconCls:"x-fa fa-minus-circle",textAlign:"left",handler:"onBotonEliminarCertificadoAdopcionClick",reference:"botonEliminarCertificadoAdopcion",width:250}],title:"Copia del certificado de adopción o acta de entrega del menor"},{xtype:"fieldset",bodyPadding:10,width:1000,layout:{type:"hbox"},items:[{xtype:"uploader",fieldLabel:"OrdenJudicial",uploadConfig:{uploadUrl:Coomuce.Url.Funciones+"ImportarOrdenJudicial",maxFileSize:10*1024*1024},inputAttrTpl:"data-qtip='Seleccione el archivo.'",listeners:{uploaddatacomplete:"onUploadOrdenJudicialDataComplete",uploaderror:"onUploadFirmaError"}},{xtype:"textfield",name:"ordenJudicialNovedad",hidden:true,reference:"ordenJudicialNovedad"},{xtype:"button",iconCls:"x-fa fa-minus-circle",textAlign:"left",handler:"onBotonEliminarOrdenJudicialClick",reference:"botonEliminarOrdenJudicial",width:250}],title:"Copia de la órden judicial o del acto administrativo de custodia"},{xtype:"fieldset",bodyPadding:10,width:1000,layout:{type:"hbox"},items:[{xtype:"uploader",fieldLabel:"PerdidaPP",uploadConfig:{uploadUrl:Coomuce.Url.Funciones+"ImportarPerdidaPP",maxFileSize:10*1024*1024},inputAttrTpl:"data-qtip='Seleccione el archivo.'",listeners:{uploaddatacomplete:"onUploadPerdidaPPDataComplete",uploaderror:"onUploadFirmaError"}},{xtype:"textfield",name:"perdidaPPNovedad",hidden:true,reference:"perdidaPPNovedad"},{xtype:"button",iconCls:"x-fa fa-minus-circle",textAlign:"left",handler:"onBotonEliminarPerdidaPPClick",reference:"botonEliminarPerdidaPP",width:250}],title:"Documento en que conste la pérdida de la pátria potestad, o el certificado de defunción de los padres o la declaración suscrita <br />por el cotizante sobre la ausencia de los padres"},{xtype:"fieldset",bodyPadding:10,width:1000,layout:{type:"hbox"},items:[{xtype:"uploader",fieldLabel:"AuthTraslado",uploadConfig:{uploadUrl:Coomuce.Url.Funciones+"ImportarAuthTraslado",maxFileSize:10*1024*1024},inputAttrTpl:"data-qtip='Seleccione el archivo.'",listeners:{uploaddatacomplete:"onUploadAuthTrasladoDataComplete",uploaderror:"onUploadFirmaError"}},{xtype:"textfield",name:"authTrasladoNovedad",hidden:true,reference:"authTrasladoNovedad"},{xtype:"button",iconCls:"x-fa fa-minus-circle",textAlign:"left",handler:"onBotonEliminarAuthTrasladoClick",reference:"botonEliminarAuthTraslado",width:250}],title:"Copia de la autorización de traslado por parte de la Superintendencia Nacional de Salúd"},{xtype:"fieldset",bodyPadding:10,width:1000,layout:{type:"hbox"},items:[{xtype:"uploader",fieldLabel:"CertificadoVinculacion",uploadConfig:{uploadUrl:Coomuce.Url.Funciones+"ImportarCertificadoVinculacion",maxFileSize:10*1024*1024},inputAttrTpl:"data-qtip='Seleccione el archivo.'",listeners:{uploaddatacomplete:"onUploadCertificadoVinculacionDataComplete",uploaderror:"onUploadFirmaError"}},{xtype:"textfield",name:"certificadoVinculacionNovedad",hidden:true,reference:"certificadoVinculacionNovedad"},{xtype:"button",iconCls:"x-fa fa-minus-circle",textAlign:"left",handler:"onBotonEliminarCertificadoVinculacionClick",reference:"botonEliminarCertificadoVinculacion",width:250}],title:"Certificado de vinculación a una entidad autorizada para realizar afiliaciones colectivas"},{xtype:"fieldset",bodyPadding:10,width:1000,layout:{type:"hbox"},items:[{xtype:"uploader",fieldLabel:"ActoAdministrativo",uploadConfig:{uploadUrl:Coomuce.Url.Funciones+"ImportarActoAdministrativo",maxFileSize:10*1024*1024},inputAttrTpl:"data-qtip='Seleccione el archivo.'",listeners:{uploaddatacomplete:"onUploadActoAdministrativoDataComplete",uploaderror:"onUploadFirmaError"}},{xtype:"textfield",name:"actoAdministrativoNovedad",hidden:true,reference:"actoAdministrativoNovedad"},{xtype:"button",iconCls:"x-fa fa-minus-circle",textAlign:"left",handler:"onBotonEliminarActoAdministrativoClick",reference:"botonEliminarActoAdministrativo",width:250}],title:"Copia del acto administrativo o providencia de las autoridades competentes en la que conste la calidad del beneficiario o se ordene la afiliación de oficio"}],title:"IX. ANEXOS"}]}]});Ext.define("CoomuceMod.view.ActualizacionBd.ImportarBaseAfiliadosController",{extend:"Ext.app.ViewController",alias:"controller.actualizacionbd-importarbaseafiliados",getTitleView:function(){return this.getView().getTitle()},onBotonGuardarClick:function(){var c=this;var d=c.getTitleView();Ext.Msg.confirm(d,"Desea guardar el archivo e importar los datos?",function(b){if(b==="yes"){var a=Ext.getCmp("Form-ImportarBase");a.getForm().submit({url:Coomuce.Url.Funciones+"ImportarBase",waitMsg:"Cargando el archivo...",success:function(k,i){var l=new Ext.XTemplate("Archivo procesado en el servidor.<br />","Nombre: {fileName}<br />","Tamaño: {fileSize:fileSize}");Ext.Msg.alert("Success",l.apply(i.result));var j=Ext.getCmp("CoomuceImportarBaseAfiliados");j.destroy()}})}})},onBotonCancelarClick:function(){Ext.getCmp("Form-ImportarBase").getForm().reset();var b=Ext.getCmp("CoomuceImportarBaseAfiliados");b.destroy()}});Ext.define("CoomuceMod.view.ActualizacionBd.ImportarBaseAfiliadosModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.actualizacionbd-importarbaseafiliados",stores:{}});Ext.define("CoomuceMod.view.ActualizacionBd.ImportarBaseAfiliados",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.ActualizacionBd.ImportarBaseAfiliadosController","CoomuceMod.view.ActualizacionBd.ImportarBaseAfiliadosModel"],controller:"actualizacionbd-importarbaseafiliados",viewModel:{type:"actualizacionbd-importarbaseafiliados"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick",reference:"botonGuardar"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick",reference:"botonCancelar"}]}],items:[{xtype:"form",bodyPadding:10,id:"Form-ImportarBase",scrollable:true,items:[{xtype:"label",html:"Seleccione el archivo con extension .xlsx que desea importar.<br />El archivo debe contener la siguiente estructura de columnas.<br /><br />Carnet, primerApellidoFuanAfiliado, segundoApellidoFuanAfiliado, primerNombreFuanAfiliado, segundoNombreFuanAfiliado,\tidTipoIdentificacion,  identificacionFuanAfiliado, idTipoSexo, fechaNacimientoFuanAfiliado, idTipoEtnia, idTipoDiscapacidad, idCondicionDiscapacidad, puntajeSisbenFuanAfiliado, idGrupoPoblacional, arlFuanAfiliado, pensionFuanAfiliado, ibcFuanAfiliado, direccionFuanAfiliado, telefonoFuanAfiliado, celularFuanAfiliado, emailFuanAfiliado, CodDep, CodMun, idTipoZona, barrioFuanAfiliado, primerApellidoConyugueFuanAfiliado, segundoApellidoConyugueFuanAfiliado, primerNombreConyugueFuanAfiliado, segundoNombreConyugueFuanAfiliado, idTipoIdentificacionConyugue, identificacionConyugueFuanAfiliado, idTipoSexoConyugue, fechaNacimientoConyugueFuanAfiliado, TipoIdCabezaFamilia, NumidCabezaFamilia"},{xtype:"filefield",emptyText:"Seleccione el archivo .xlsx",fieldLabel:"Archivo",name:"archivo",buttonConfig:{iconCls:"x-fa fa-upload",text:""},width:500}]}]});Ext.define("CoomuceMod.view.ActualizacionBd.NovedadesController",{extend:"Ext.app.ViewController",alias:"controller.actualizacionbd-novedades",getTitleView:function(){return this.getView().getTitle()},onBotonGuardarClick:function(){var c=this;var d=c.getTitleView();Ext.Msg.confirm(d,"Desea guardar las modificaciones?",function(w){if(w==="yes"){var x=Ext.getCmp("Form-Novedades");var z=x.getForm().getValues();var v=parseInt(z.idFuanAfiliado);var s=[];var a=Ext.getCmp("Grid-TipoNovedad");Ext.each(a.getStore().data.items,function(h,g,e){var f=h.data;s.push(f)});var u=c.lookupReference("idTipoIdentificacion");var q=c.lookupReference("idTipoSexo");var y=c.lookupReference("idMotivoTraslado");var b=c.lookupReference("idDepartamento");var p=c.lookupReference("idCiudad");var r={primerApellidoFuanAfiliado:z.primerApellidoFuanAfiliado,segundoApellidoFuanAfiliado:z.segundoApellidoFuanAfiliado,primerNombreFuanAfiliado:z.primerNombreFuanAfiliado,segundoNombreFuanAfiliado:z.segundoNombreFuanAfiliado,idTipoIdentificacion:z.idTipoIdentificacion,compTipoIdentificacion:u.getRawValue(),identificacionFuanAfiliado:z.identificacionFuanAfiliado,idTipoSexo:z.idTipoSexo,compTipoSexo:q.getRawValue(),fechaNacimientoFuanAfiliado:z.fechaNacimientoFuanAfiliado,epsAnteriorFuanAfiliado:z.epsAnteriorFuanAfiliado,idMotivoTraslado:z.idMotivoTraslado,compMotivoTraslado:y.getRawValue(),pensionFuanAfiliado:z.pensionFuanAfiliado,idDepartamento:z.idDepartamento,compDepartamento:b.getRawValue(),idCiudad:z.idCiudad,compCiudad:p.getRawValue(),firmaNovedad:z.firmaNovedad};var t={url:Coomuce.Url.Funciones+"NovedadesGuardar",data:{idFuanAfiliado:v,idUsuario:Coomuce.Util.DatosUsuario.idUsuario,tipoNovedad:s,novedad:r},targetMask:x,msgMask:"Guardando datos...",fnSuccess:function(e){c.onBotonCancelarClick()}};Coomuce.Util.EnviarPost(t)}})},onBotonCancelarClick:function(){Ext.getCmp("Form-Novedades").getForm().reset();var b=Ext.getCmp("CoomuceImportarBaseAfiliados");b.destroy()},onFocusCombo:function(k,n,p){if(k.checkRecord!==undefined){var j=Ext.getCmp("Grid-TipoNovedad").selModel.getSelection()[0];if(!Ext.isEmpty(j.get("tipoValorCampoTipoNovedad"))){k.setReadOnly(false);if(j.get("tipoValorCampoTipoNovedad")==="Lista"){var l=j.get("valorCampoTipoNovedad").split(";");var m=[];for(var i=0;i<l.length;i++){var o=[];o.push(l[i]);m.push(o)}k.setHideTrigger(false);k.getStore().loadData(m)}else{k.setHideTrigger(true)}}else{k.setReadOnly(true)}}},onSelectCombo:function(h,g,f){var i=this;if(h.ubicacion!==undefined){var j=i.lookupReference(h.ciudadReference);j.getStore().load({params:{idDepartamento:g.get("idDepartamento")}})}},onUploadFirmaDataComplete:function(h,i){var j=this.getTitleView();var g=this.lookupReference("botonEliminarFirma");var f=this.lookupReference("firmaNovedad");g.setText(i.data);f.setValue(i.data);Coomuce.Util.ShowMessage({type:"INFO",title:j,msg:"Archivo de firma importado correctamente."})},onUploadFirmaError:function(h,j){var f=this;var g=f.getTitleView();var i="ErrorType: "+j.errorType;switch(j.errorType){case"FileSize":i="Este archivo es demasiado grande: "+Ext.util.Format.fileSize(j.fileSize)+". El tamaño máximo de subida es "+Ext.util.Format.fileSize(j.maxFileSize)+".";break;case"QueueLength":i="La longitud de la cola es demasiado larga: "+j.queueLength+". La longitud máxima de la cola es "+j.maxQueueLength+".";break}Coomuce.Util.ShowMessage({type:"ERROR",title:g,msg:i})},onBotonEliminarFirmaClick:function(c){c.setText("");var d=this.lookupReference("firmaNovedad");d.setValue("")}});Ext.define("CoomuceMod.view.ActualizacionBd.NovedadesModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.actualizacionbd-novedades",stores:{getTipoIdentificacion:{autoLoad:true,model:"CoomuceMod.model.Parametros.Generales.TipoIdentificacion",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetTipoIdentificacionAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getTipoSexo:{autoLoad:true,model:"CoomuceMod.model.Parametros.Generales.TipoSexo",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetTipoSexoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getTipoNovedad:{autoLoad:true,fields:["idFuan","idTipoNovedad","compTipoNovedad","tipoValorCampoTipoNovedad","valorCampoTipoNovedad","selFuanTipoNovedad","valorFuanTipoNovedad"],proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Funciones+"GetTipoNovedadAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getCiudad:{autoLoad:false,model:"CoomuceMod.model.Administracion.Ciudad",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Administracion+"GetCiudadAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getDepartamento:{autoLoad:true,model:"CoomuceMod.model.Administracion.Departamento",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Administracion+"GetDepartamentoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getMotivoTraslado:{autoLoad:true,model:"CoomuceMod.model.Parametros.ActualizacionBd.MotivoTraslado",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetMotivoTrasladoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.ActualizacionBd.Novedades",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.ActualizacionBd.NovedadesController","CoomuceMod.view.ActualizacionBd.NovedadesModel"],controller:"actualizacionbd-novedades",viewModel:{type:"actualizacionbd-novedades"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick",reference:"botonGuardar"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick",reference:"botonCancelar"}]}],items:[{xtype:"form",bodyPadding:10,id:"Form-Novedades",scrollable:true,items:[{xtype:"fieldset",defaults:{allowBlank:false,anchor:"100%"},items:[{xtype:"grid",bind:{store:"{getTipoNovedad}"},border:true,columns:[{dataIndex:"idTipoNovedad",header:"Id Tipo Novedad",hidden:true},{xtype:"checkcolumn",dataIndex:"selFuanTipoNovedad",header:"",width:30},{dataIndex:"compTipoNovedad",header:"Novedad",width:450},{dataIndex:"valorFuanTipoNovedad",header:"Valor Selección",width:200,editor:{xtype:"combo",displayField:"nombre",checkRecord:true,listeners:{focus:"onFocusCombo"},queryMode:"local",store:Ext.create("Ext.data.ArrayStore",{fields:["nombre"]}),valueField:"nombre"}}],columnLines:true,height:350,id:"Grid-TipoNovedad",plugins:{ptype:"cellediting",clicksToEdit:1},title:"Tipo de Novedad"},{xtype:"fieldset",defaults:{anchor:"98%",bodyPadding:10,labelWidth:150},height:500,scrollable:true,items:[{xtype:"textfield",fieldLabel:"Primer apellido",name:"primerApellidoFuanAfiliado",reference:"primerApellidoFuanAfiliado"},{xtype:"textfield",fieldLabel:"Segundo apellido",name:"segundoApellidoFuanAfiliado",reference:"segundoApellidoFuanAfiliado"},{xtype:"textfield",fieldLabel:"Primer nombre",name:"primerNombreFuanAfiliado",reference:"primerNombreFuanAfiliado"},{xtype:"textfield",fieldLabel:"Segundo nombre",name:"segundoNombreFuanAfiliado",reference:"segundoNombreFuanAfiliado"},{xtype:"combo",bind:{store:"{getTipoIdentificacion}"},displayField:"compTipoIdentificacion",editable:false,fieldLabel:"Tipo documento de identidad",name:"idTipoIdentificacion",queryMode:"local",reference:"idTipoIdentificacion",valueField:"idTipoIdentificacion"},{layout:{type:"table",columns:2,tableAttrs:{style:{background:"#f6f6f6",width:"100%"}}},defaults:{style:{background:"#f6f6f6"}},items:[{items:[{xtype:"numberfield",hidden:true,name:"idFuanAfiliado",readOnly:true},{xtype:"textfield",anchor:"95%",fieldLabel:"No. Documento de Identidad",labelWidth:150,name:"identificacionFuanAfiliado",width:"95%"}]},{items:[{xtype:"button",componentReference:["idFuanAfiliado","idTipoIdentificacion","identificacionFuanAfiliado","primerApellidoFuanAfiliado","segundoApellidoFuanAfiliado","primerNombreFuanAfiliado","segundoNombreFuanAfiliado","idTipoSexo","fechaNacimientoFuanAfiliado","pensionFuanAfiliado","idDepartamento","idCiudad"],handler:Coomuce.Util.buscarAfiliado,iconCls:"x-fa fa-binoculars",reference:"botonBuscarAfiliado",tooltip:"Lista de Afiliados",width:30}]}]},{xtype:"combo",bind:{store:"{getTipoSexo}"},displayField:"compTipoSexo",editable:false,fieldLabel:"Sexo",name:"idTipoSexo",queryMode:"local",reference:"idTipoSexo",valueField:"idTipoSexo"},{xtype:"datefield",fieldLabel:"Fecha de nacimiento",name:"fechaNacimientoFuanAfiliado",reference:"fechaNacimientoFuanAfiliado"},{xtype:"textfield",fieldLabel:"EPS anterior",name:"epsAnteriorFuanAfiliado",reference:"epsAnteriorFuanAfiliado"},{xtype:"combo",bind:{store:"{getMotivoTraslado}"},displayField:"compMotivoTraslado",editable:false,fieldLabel:"Motivo de traslado (Código)",name:"idMotivoTraslado",queryMode:"local",valueField:"idMotivoTraslado"},{xtype:"textfield",fieldLabel:"Caja de Compesación Familiar o Pagador de Pensiones",name:"pensionFuanAfiliado",referene:"pensionFuanAfiliado"},{xtype:"combo",bind:{store:"{getDepartamento}"},ciudadReference:"idCiudad",displayField:"compDepartamento",editable:false,fieldLabel:"Departamento",listeners:{select:"onSelectCombo"},name:"idDepartamento",queryMode:"local",ubicacion:true,valueField:"idDepartamento"},{xtype:"combo",bind:{store:"{getCiudad}"},displayField:"compCiudad",editable:false,fieldLabel:"Municipio/Distrito",name:"idCiudad",queryMode:"local",reference:"idCiudad",valueField:"idCiudad"},{bodyPadding:10,layout:{type:"table",columns:2},title:"Firma",items:[{items:[{xtype:"uploader",uploadConfig:{uploadUrl:Coomuce.Url.Funciones+"ImportarFirma",maxFileSize:10*1024*1024},inputAttrTpl:"data-qtip='Seleccione el archivo.'",listeners:{uploaddatacomplete:"onUploadFirmaDataComplete",uploaderror:"onUploadFirmaError"}}]},{items:[{xtype:"textfield",name:"firmaNovedad",hidden:true,reference:"firmaNovedad"},{xtype:"button",iconCls:"x-fa fa-minus-circle",textAlign:"left",handler:"onBotonEliminarFirmaClick",reference:"botonEliminarFirma",width:250}]}]}],title:"Reporte de Novedad"}],title:"VI. DATOS PARA EL REPORTE DE LA NOVEDAD"}]}]});Ext.define("CoomuceMod.view.Administracion.CiudadController",{extend:"Ext.app.ViewController",alias:"controller.administracion-ciudad",onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var j=this;var l=j.lookupReference("departamento");if(Ext.isEmpty(l.getValue())){Coomuce.Util.ShowMessage({type:"ERROR",title:"Ciudad",msg:"Debe seleccionar un departamento."});return false}var g=Ext.getCmp("Grid-Ciudad-Principal").getStore();var h=g.max("idCiudad");var k=g.identity;if(h>k){k=h}var i=[{idCiudad:(k==undefined?1:k+1),idDepartamento:l.getValue(),codigoCiudad:"",nombreCiudad:""}];g.insert(0,i)},onBotonCancelarClick:function(){Ext.Msg.confirm("Ciudad","Desea cancelar las modificaciones?",function(d){if(d==="yes"){var e=Ext.getCmp("Grid-Ciudad-Principal").getStore();e.rejectChanges();var f=Ext.getCmp("CoomuceCiudad");f.destroy()}})},onBotonGuardarClick:function(){Ext.Msg.confirm("Ciudad","Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-Ciudad-Principal");var k=r.getStore();var m=[];var p=[];var j=[];var n=[];Ext.each(k.data.items,function(c,b,a){if(c.dirty){if(c.phantom){m.push(c.data)}else{p.push(c.data)}n.push(c)}});Ext.each(k.getRemovedRecords(),function(b,a){if(!b.phantom){j.push(b.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:"Ciudad",msg:q.msg});return false}}var l={url:Coomuce.Url.Administracion+"CiudadCUD",data:{nuevos:m,viejos:p,eliminados:j},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(b){k.load();var a=Ext.getCmp("CoomuceCiudad");a.destroy()}};Coomuce.Util.EnviarPost(l)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-Ciudad-Principal");b.getStore().remove(b.selModel.getSelection())},onSelectDepartamento:function(g,f,h){var e=Ext.getCmp("Grid-Ciudad-Principal");e.getStore().proxy.setUrl(Coomuce.Url.Administracion+"GetCiudadAll?idDepartamento="+f.data.idDepartamento);e.getStore().load()}});Ext.define("CoomuceMod.view.Administracion.CiudadModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.administracion-ciudad",stores:{getDepartamento:{autoLoad:true,model:"CoomuceMod.model.Administracion.Departamento",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Administracion+"GetDepartamentoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getCiudad:{autoLoad:false,model:"CoomuceMod.model.Administracion.Ciudad",listeners:{load:function(l,g,i,h,j){var k=Ext.decode(h._response.responseText);l.identity=k.identity}},identity:0,proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Administracion+"GetCiudadAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Administracion.Ciudad",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Administracion.CiudadController","CoomuceMod.view.Administracion.CiudadModel"],controller:"administracion-ciudad",viewModel:{type:"administracion-ciudad"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"top",ui:"footer",items:[{xtype:"combo",bind:{store:"{getDepartamento}"},displayField:"nombreDepartamento",emptyText:"-- Seleccione departamento --",listeners:{select:"onSelectDepartamento"},queryMode:"local",reference:"departamento",valueField:"idDepartamento",width:250}]},{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getCiudad}"},columns:[{dataIndex:"idDepartamento",header:"Id Departamento",hidden:true},{dataIndex:"idCiudad",header:"Id Ciudad",hidden:true},{dataIndex:"codigoCiudad",header:"Código",width:100,editor:{allowBlank:false}},{dataIndex:"nombreCiudad",header:"Nombre",width:300,editor:{allowBlank:false}}],columnLines:true,id:"Grid-Ciudad-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Administracion.ConfiguracionCuerpoCorreoController",{extend:"Ext.app.ViewController",alias:"controller.administracion-configuracioncuerpocorreo",cargarInformacion:function(g){var h=this;var e=Ext.getCmp("Form-ConfiguracionCuerpoCorreo-Principal");var f=new Ext.LoadMask({msg:"Cargando datos de configuración cuerpo de correo",target:e});f.show();h.getViewModel().getStore("getConfiguracionCuerpoCorreo").load({params:{tipo:g}});h.getViewModel().getStore("getConfiguracionCuerpoCorreo").on("load",function(c,d,a,b){e.getForm().loadRecord(d[0]);f.hide()})},onBotonCancelarClick:function(){var b=Ext.getCmp("CoomuceConfiguracionCuerpoCorreo");b.destroy()},onBotonGuardarClick:function(){var g=this;var h=Ext.getCmp("Form-ConfiguracionCuerpoCorreo-Principal");var e=h.getForm().getValues();var f={url:Coomuce.Url.Administracion+"ConfiguracionCuerpoCorreoU",data:{datos:e},targetMask:h,msgMask:"Guardando datos...",fnSuccess:function(b){g.cargarInformacion(e.tipoConfiguracionCuerpoCorreo);var a=Ext.getCmp("CoomuceConfiguracionCuerpoCorreo");a.destroy()}};Coomuce.Util.EnviarPost(f)},onSelectCombo:function(g,f,e){var h=this;h.cargarInformacion(f.get("id"))}});Ext.define("CoomuceMod.view.Administracion.ConfiguracionCuerpoCorreoModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.administracion-configuracioncuerpocorreo",stores:{getTipoConfiguracionCuerpoCorreo:{fields:["id","nombre"],data:[[0,"Cuerpo Correo"],[1,"Reenvío Cuerpo Correo"]]},getConfiguracionCuerpoCorreo:{autoLoad:false,fields:["idConfiguracionCuerpoCorreo","tipoConfiguracionCuerpoCorreo","tituloConfiguracionCuerpoCorreo","mensajeConfiguracionCuerpoCorreo"],proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Administracion+"GetConfiguracionCuerpoCorreoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Administracion.ConfiguracionCuerpoCorreo",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Administracion.ConfiguracionCuerpoCorreoController","CoomuceMod.view.Administracion.ConfiguracionCuerpoCorreoModel"],controller:"administracion-configuracioncuerpocorreo",viewModel:{type:"administracion-configuracioncuerpocorreo"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]}],items:[{xtype:"form",bodyPadding:10,defaults:{anchor:"50%"},defaultType:"textfield",id:"Form-ConfiguracionCuerpoCorreo-Principal",items:[{hidden:true,name:"idConfiguracionCuerpoCorreo"},{xtype:"combo",bind:{store:"{getTipoConfiguracionCuerpoCorreo}"},displayField:"nombre",editable:false,emptyText:"-- Seleccione tipo de cuerpo --",listeners:{select:"onSelectCombo"},name:"tipoConfiguracionCuerpoCorreo",queryMode:"local",reference:"tipoConfiguracionCuerpoCorreo",valueField:"id"},{allowBlank:false,emptyText:"Titulo o asunto de correo",fieldLabel:"Titulo/Asunto",name:"tituloConfiguracionCuerpoCorreo"},{xtype:"label",html:"Cuerpo"},{xtype:"htmleditor",height:300,name:"mensajeConfiguracionCuerpoCorreo"},{xtype:"label",html:"Variables: {0} = Primer Nombre, {1} = Segundo Nombre, {2} = Primer Apellido, {3} = Segundo Apellido, {4} = Usuario, {5} = Contraseña<br />Para incrustar las variables se debe digitar el digito correspondiente a la variable tal cual como se muestra."}]}]});Ext.define("CoomuceMod.view.Administracion.ConfiguracionGeneralController",{extend:"Ext.app.ViewController",alias:"controller.administracion-configuraciongeneral",cargarInformacion:function(){var f=this;var d=Ext.getCmp("Form-ConfiguracionGeneral-Principal");var e=new Ext.LoadMask({msg:"Cargando datos de configuración general",target:d});e.show();f.getViewModel().getStore("getConfiguracionGeneral").load();f.getViewModel().getStore("getConfiguracionGeneral").on("load",function(c,h,a,b){d.getForm().loadRecord(h[0]);e.hide()})},onAfterRender:function(e,d){var f=this;f.cargarInformacion()},onBotonCancelarClick:function(){var b=Ext.getCmp("CoomuceConfiguracionGeneral");b.destroy()},onBotonGuardarClick:function(){var g=this;var h=Ext.getCmp("Form-ConfiguracionGeneral-Principal");var e=h.getForm().getValues();e.sslConfiguracionGeneral=(e.sslConfiguracionGeneral=="on")?true:false;console.log(e);var f={url:Coomuce.Url.Administracion+"ConfiguracionGeneralU",data:{datos:e},targetMask:h,msgMask:"Guardando datos...",fnSuccess:function(b){g.cargarInformacion();var a=Ext.getCmp("CoomuceConfiguracionGeneral");a.destroy()}};Coomuce.Util.EnviarPost(f)}});Ext.define("CoomuceMod.view.Administracion.ConfiguracionGeneralModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.administracion-configuraciongeneral",stores:{getConfiguracionGeneral:{storeId:"configuracionGeneralStore",autoLoad:false,fields:["idConfiguracionGeneral","tiempoInactividadConfiguracionGeneral","salarioConfiguracionGeneral","emailSalienteConfiguracionGeneral","pswEmailConfiguracionGeneral","ccConfiguracionGeneral","csConfiguracionGeneral","hostConfiguracionGeneral","portConfiguracionGeneral","sslConfiguracionGeneral"],proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Administracion+"GetConfiguracionGeneralAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Administracion.ConfiguracionGeneral",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Administracion.ConfiguracionGeneralController","CoomuceMod.view.Administracion.ConfiguracionGeneralModel"],controller:"administracion-configuraciongeneral",viewModel:{type:"administracion-configuraciongeneral"},layout:"fit",listeners:{afterrender:"onAfterRender"},dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]}],items:[{xtype:"form",bodyPadding:10,defaults:{anchor:"50%"},id:"Form-ConfiguracionGeneral-Principal",items:[{xtype:"numberfield",hidden:true,name:"idConfiguracionGeneral"},{xtype:"numberfield",fieldLabel:"Tiempo inactividad (minutos)",labelWidth:150,name:"tiempoInactividadConfiguracionGeneral"},{xtype:"numberfield",fieldLabel:"Salario minimo legal vigente",hideTrigger:true,labelWidth:150,name:"salarioConfiguracionGeneral"},{xtype:"fieldset",anchor:"60%",defaults:{xtype:"textfield",anchor:"100%",labelWidth:150},height:350,items:[{allowBlank:false,emptyText:"Dirección de correo eletrónico",fieldLabel:"Dirección de correo eletrónico",name:"emailSalienteConfiguracionGeneral",vtype:"email"},{allowBlank:false,emptyText:"Contraseña correo",fieldLabel:"Contraseña correo",inputType:"password",name:"pswEmailConfiguracionGeneral"},{allowBlank:true,emptyText:"Copia de correo saliente",fieldLabel:"Copia de correo saliente",name:"ccConfiguracionGeneral",vtype:"email"},{allowBlank:true,emptyText:"Correo de soporte",fieldLabel:"Correo de soporte",name:"csConfiguracionGeneral"},{allowBlank:false,emptyText:"Host",fieldLabel:"Host",name:"hostConfiguracionGeneral"},{xtype:"numberfield",allowBlank:false,emptyText:"Puerto",fieldLabel:"Puerto",hideTrigger:true,name:"portConfiguracionGeneral"},{xtype:"checkbox",fieldLabel:"Usa ssl?",name:"sslConfiguracionGeneral"}],title:"Configuración Correo Saliente"}]}]});Ext.define("CoomuceMod.view.Administracion.DepartamentoController",{extend:"Ext.app.ViewController",alias:"controller.administracion-departamento",onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var e=Ext.getCmp("Grid-Departamento-Principal").getStore();var d=e.max("idDepartamento");var f=[{idDepartamento:(d==undefined?1:d+1),codigoDepartamento:"",nombreDepartamento:""}];e.insert(0,f)},onBotonCancelarClick:function(){Ext.Msg.confirm("Departamento","Desea cancelar las modificaciones?",function(d){if(d==="yes"){var e=Ext.getCmp("Grid-Departamento-Principal").getStore();e.rejectChanges();var f=Ext.getCmp("CoomuceDepartamento");f.destroy()}})},onBotonGuardarClick:function(){Ext.Msg.confirm("Departamento","Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-Departamento-Principal");var k=r.getStore();var m=[];var p=[];var j=[];var n=[];Ext.each(k.data.items,function(c,b,a){if(c.dirty){if(c.phantom){m.push(c.data)}else{p.push(c.data)}n.push(c)}});Ext.each(k.getRemovedRecords(),function(b,a){if(!b.phantom){j.push(b.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:"Departamento",msg:q.msg});return false}}var l={url:Coomuce.Url.Administracion+"DepartamentoCUD",data:{nuevos:m,viejos:p,eliminados:j},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(b){k.load();var a=Ext.getCmp("CoomuceDepartamento");a.destroy()}};Coomuce.Util.EnviarPost(l)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-Departamento-Principal");b.getStore().remove(b.selModel.getSelection())}});Ext.define("CoomuceMod.view.Administracion.DepartamentoModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.administracion-departamento",stores:{getDepartamento:{autoLoad:true,model:"CoomuceMod.model.Administracion.Departamento",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Administracion+"GetDepartamentoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Administracion.Departamento",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Administracion.DepartamentoController","CoomuceMod.view.Administracion.DepartamentoModel"],controller:"administracion-departamento",viewModel:{type:"administracion-departamento"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getDepartamento}"},columns:[{dataIndex:"idDepartamento",header:"Id",hidden:true},{dataIndex:"codigoDepartamento",header:"Código",width:100,editor:{allowBlank:false}},{dataIndex:"nombreDepartamento",header:"Nombre",width:300,editor:{allowBlank:false}}],columnLines:true,id:"Grid-Departamento-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Administracion.PermisosRolController",{extend:"Ext.app.ViewController",alias:"controller.administracion-permisosrol",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var e=this;var g=e.lookupReference("rol");if(Ext.isEmpty(departamento.getValue())){Coomuce.Util.ShowMessage({type:"ERROR",title:e.getTitleView(),msg:"Debe seleccionar un rol."});return false}var f=Ext.getCmp("Grid-PermisosRol-Principal").getStore();var h=[{idRol:g.getValue(),idMenu:0,nombreMenu:""}];f.insert(0,h)},onBotonCancelarClick:function(){Ext.Msg.confirm(this.getTitleView(),"Desea cancelar las modificaciones?",function(d){if(d==="yes"){var e=Ext.getCmp("Grid-PermisosRol-Principal").getStore();e.rejectChanges();var f=Ext.getCmp("CoomucePermisosRol");f.destroy()}})},onBotonGuardarClick:function(){var d=this;var e=d.getTitleView();var f=d.lookupReference("rol");Ext.Msg.confirm(e,"Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-PermisosRol-Principal");var b=r.getStore();var m=[];var p=[];var a=[];var n=[];Ext.each(b.data.items,function(g,i,h){if(g.dirty){if(g.phantom){m.push(g.data)}else{p.push(g.data)}n.push(g)}});Ext.each(b.getRemovedRecords(),function(g,h){if(!g.phantom){a.push(g.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:e,msg:q.msg});return false}}var c={url:Coomuce.Url.Administracion+"PermisosRolCUD",data:{nuevos:m,viejos:p,eliminados:a},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(g){b.load({params:{idRol:f.getValue()}});var h=Ext.getCmp("CoomucePermisosRol");h.destroy()}};Coomuce.Util.EnviarPost(c)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-PermisosRol-Principal");b.getStore().remove(b.selModel.getSelection())},onSelectRol:function(g,f,h){var e=Ext.getCmp("Grid-PermisosRol-Principal");e.getStore().load({params:{idRol:f.get("idRol")}})},onSelectCombo:function(h,g,e){var f=Ext.getCmp("Grid-PermisosRol-Principal").selModel.getSelection();f[0].set(h.campoId,g.get(h.campoId))}});Ext.define("CoomuceMod.view.Administracion.PermisosRolModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.administracion-permisosrol",stores:{getRol:{autoLoad:true,fields:[{name:"idRol",type:"int"},{name:"nombreRol",type:"string"}],proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Administracion+"GetRolAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getMenu:{autoLoad:true,fields:["idMenu","nombreMenu"],proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Administracion+"GetMenuAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getPermisos:{autoLoad:false,model:"CoomuceMod.model.Administracion.PermisosRol",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Administracion+"GetPermisoRolAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Administracion.PermisosRol",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Administracion.PermisosRolController","CoomuceMod.view.Administracion.PermisosRolModel"],controller:"administracion-permisosrol",viewModel:{type:"administracion-permisosrol"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"top",ui:"footer",items:[{xtype:"combo",bind:{store:"{getRol}"},displayField:"nombreRol",emptyText:"-- Seleccione rol --",listeners:{select:"onSelectRol"},queryMode:"local",reference:"rol",valueField:"idRol",width:250}]},{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getPermisos}"},columns:[{dataIndex:"idRol",header:"Id Rol",hidden:true},{dataIndex:"idMenu",header:"Id Menu",hidden:true},{dataIndex:"nombreMenu",header:"Menú",width:300,editor:{xtype:"combo",bind:{store:"{getMenu}"},campoId:"idMenu",displayField:"nombreMenu",listeners:{select:"onSelectDepartamento"},queryMode:"local",valueField:"nombreMenu"}},{xtype:"checkcolumn",dataIndex:"habilitadoRolMenu",header:"Habilitado?"}],columnLines:true,id:"Grid-PermisosRol-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Administracion.UsuarioController",{extend:"Ext.app.ViewController",alias:"controller.administracion-usuario",onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0);this.getReferences().reenviarCredencialButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var k=this;var g=Ext.getCmp("Grid-Usuario-Principal");var h=g.getStore();var l=h.max("idUsuario");var i=[{idUsuario:(l==undefined?1:l+1),idTipoIdentificacion:0,nombreTipoIdentificacion:"",primerApellidoUsuario:"",segundoApellidoUsuario:"",primerNombreUsuario:"",segundoNombreUsuario:"",emailUsuario:"",idRol:0,nombreRol:"",esTemporalUsuario:true,estaHabilitadoUsuario:true}];h.insert(0,i);var j=h.getAt(0);g.getView().select(j)},onBotonCancelarClick:function(){Ext.Msg.confirm("Usuario","Desea cancelar las modificaciones?",function(d){if(d==="yes"){var e=Ext.getCmp("Grid-Usuario-Principal").getStore();e.rejectChanges();var f=Ext.getCmp("CoomuceUsuario");f.destroy()}})},onBotonGuardarClick:function(){Ext.Msg.confirm("Usuario","Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-Usuario-Principal");var k=r.getStore();var m=[];var p=[];var j=[];var n=[];Ext.each(k.data.items,function(c,b,a){if(c.dirty){if(c.phantom){m.push(c.data)}else{p.push(c.data)}n.push(c)}});Ext.each(k.getRemovedRecords(),function(b,a){if(!b.phantom){j.push(b.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:"Usuario",msg:q.msg});return false}}var l={url:Coomuce.Url.Administracion+"UsuarioCUD",data:{nuevos:m,viejos:p,eliminados:j},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(b){k.load();var a=Ext.getCmp("CoomuceUsuario");a.destroy()}};Coomuce.Util.EnviarPost(l)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-Usuario-Principal");b.getStore().remove(b.selModel.getSelection())},onBotonReenviarCredencialClick:function(){var c=Ext.getCmp("Grid-Usuario-Principal");var d=c.selModel.getSelection();if(d.length==0){Coomuce.Util.ShowMessage({type:"ERROR",title:"Usuario",msg:"Debe selecconar un registro."});return false}Ext.Msg.confirm("Usuario","¿Esta seguro de reenviar las credenciales del usuario seleccionado?",function(a){if(a==="yes"){var b={url:Coomuce.Url.Administracion+"UsuarioReenviarCredencial",data:{idUsuario:d[0].data.idUsuario},targetMask:c,msgMask:"Reenviando credenciales de usuario...",fnSuccess:function(f){c.getStore().load()}};Coomuce.Util.EnviarPost(b)}})},onSelectCombo:function(h,g,e){var f=Ext.getCmp("Grid-Usuario-Principal").selModel.getSelection();f[0].set(h.campoId,g.data[h.campoId])}});Ext.define("CoomuceMod.view.Administracion.UsuarioModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.administracion-usuario",stores:{getTipoIdentificacion:{autoLoad:true,model:"CoomuceMod.model.Parametros.Generales.TipoIdentificacion",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetTipoIdentificacionAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getRol:{autoLoad:true,fields:[{name:"idRol",type:"int"},{name:"nombreRol",type:"string"}],proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Administracion+"GetRolAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getUsuario:{autoLoad:true,model:"CoomuceMod.model.Administracion.Usuario",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Administracion+"GetUsuarioAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Administracion.Usuario",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Administracion.UsuarioController","CoomuceMod.view.Administracion.UsuarioModel"],controller:"administracion-usuario",viewModel:{type:"administracion-usuario"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true},{text:"Reenviar Credenciales",iconCls:"x-fa fa-key",handler:"onBotonReenviarCredencialClick",reference:"reenviarCredencialButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getUsuario}"},columns:[{dataIndex:"idUsuario",header:"Id",hidden:true},{dataIndex:"idTipoIdentificacion",header:"Id Tipo Identificacion",hidden:true},{dataIndex:"nombreTipoIdentificacion",header:"Tipo Identificación",width:150,editor:{xtype:"combo",allowBlank:false,bind:{store:"{getTipoIdentificacion}"},displayField:"nombreTipoIdentificacion",editable:false,campoId:"idTipoIdentificacion",listeners:{select:"onSelectCombo"},queryMode:"local",valueField:"nombreTipoIdentificacion"}},{dataIndex:"identificacionUsuario",header:"No. Identificación",width:150,editor:{allowBlank:false}},{dataIndex:"primerApellidoUsuario",header:"Primer Apellido",width:150,editor:{allowBlank:false}},{dataIndex:"segundoApellidoUsuario",header:"Segundo Apellido",width:150,editor:{allowBlank:true}},{dataIndex:"primerNombreUsuario",header:"Primer Nombre",width:150,editor:{allowBlank:false}},{dataIndex:"segundoNombreUsuario",header:"Segundo Nombre",width:150,editor:{allowBlank:true}},{dataIndex:"emailUsuario",header:"Email",width:150,editor:{allowBlank:false,vtype:"email"}},{dataIndex:"celularUsuario",header:"Celular",width:150,editor:{allowBlank:true}},{dataIndex:"idRol",header:"Id Rol",hidden:true},{dataIndex:"nombreRol",header:"Rol",width:150,editor:{xtype:"combo",allowBlank:false,bind:{store:"{getRol}"},displayField:"nombreRol",editable:false,campoId:"idRol",listeners:{select:"onSelectCombo"},queryMode:"local",valueField:"nombreRol"}},{xtype:"booleancolumn",dataIndex:"esTemporalUsuario",header:"Tiene clave temporal?",trueText:"Sí",falseText:"No",width:150},{xtype:"checkcolumn",dataIndex:"estaHabilitadoUsuario",header:"Habilitado?"}],columnLines:true,id:"Grid-Usuario-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:false,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.CaracterizacionPoblacional.HfdfrController",{extend:"Ext.app.ViewController",alias:"controller.caracterizacionpoblacional-hfdfr",getTitleView:function(){return this.getView().getTitle()},onBotonCancelarClick:function(){var b=this;Ext.Msg.confirm(this.getTitleView(),"Desea cancelar las modificaciones?",function(a){if(a==="yes"){var f=Ext.getCmp("Form-Hfdfr-Principal");f.getForm().reset();var e=Ext.getCmp("CoomuceHfdfr");e.destroy()}})},onBotonGuardarClick:function(){var c=this;var d=c.getTitleView();Ext.Msg.confirm(d,"Desea guardar las modificaciones?",function(t){if(t==="yes"){var v=Ext.getCmp("Form-Hfdfr-Principal");var a=v.getForm().getValues();var r={idInfoHfdfr:0,tipoDiligenciamientoHfdfr:a.tipoDiligenciamientoHfdfr,fechaVisitaHfdfr:a.fechaVisitaHfdfr,horaInicioHfdfr:"",horaFinHfdfr:"",idFuanAfiliado:parseInt(a.idFuanAfiliado),idCiudad:a.idCiudad,veredaInfoHfdfr:a.veredaInfoHfdfr,barrioInfoHfdfr:a.barrioInfoHfdfr,telefonoInfoHfdfr:a.telefonoInfoHfdfr,firmaHfdfr:a.firmaHfdfr,idUsuario:Coomuce.Util.DatosUsuario.idUsuario};var o={pregunta1:a.pregunta1,pregunta2:a.pregunta2,pregunta3:a.pregunta3,pregunta4:a.pregunta4,pregunta5:a.pregunta5,pregunta6:a.pregunta6,pregunta7:a.pregunta7,pregunta8:{opcionMadre:(a.pregunta8opcionMadre=="on"?true:false),opcionPadre:(a.pregunta8opcionPadre=="on"?true:false),opcionHijos:(a.pregunta8opcionHijos=="on"?true:false),opcionOtros:(a.pregunta8opcionOtros=="on"?true:false)},pregunta9:a.pregunta9,pregunta10:a.pregunta10,pregunta11:a.pregunta11,pregunta12:a.pregunta12,pregunta13:a.pregunta13,pregunta14:[],pregunta15:{opcionA:a.pregunta15opcionA,opcionB:a.pregunta15opcionB,opcionC:a.pregunta15opcionC,opcionD:a.pregunta15opcionD,opcionE:a.pregunta15opcionE,opcionF:a.pregunta15opcionF,opcionG:a.pregunta15opcionG},pregunta16:a.pregunta16,pregunta17:a.pregunta17,pregunta18:a.pregunta18,pregunta19:a.pregunta19,pregunta20:{opcionA:(a.pregunta20opcionA=="on"?true:false),opcionB:(a.pregunta20opcionB=="on"?true:false),opcionC:(a.pregunta20opcionC=="on"?true:false),opcionD:(a.pregunta20opcionD=="on"?true:false),opcionE:(a.pregunta20opcionE=="on"?true:false),opcionF:(a.pregunta20opcionF=="on"?true:false)},pregunta21:a.pregunta21,pregunta22:a.pregunta22,pregunta23:a.pregunta23,pregunta24:{opcionA:(a.pregunta24opcionA=="on"?true:false),opcionB:(a.pregunta24opcionB=="on"?true:false),opcionC:(a.pregunta24opcionC=="on"?true:false),opcionD:(a.pregunta24opcionD=="on"?true:false),opcionE:(a.pregunta24opcionE=="on"?true:false),opcionF1:(a.pregunta24opcionF1=="on"?true:false),opcionF2:(a.pregunta24opcionF2=="on"?true:false),opcionG:(a.pregunta24opcionG=="on"?true:false),opcionH:(a.pregunta24opcionH=="on"?true:false),opcionI:(a.pregunta24opcionI=="on"?true:false),opcionJ:(a.pregunta24opcionJ=="on"?true:false),opcionK:(a.pregunta24opcionK=="on"?true:false),opcionL:(a.pregunta24opcionL=="on"?true:false),opcionM:(a.pregunta24opcionM=="on"?true:false),opcionN:(a.pregunta24opcionN=="on"?true:false),opcionO:(a.pregunta24opcionO=="on"?true:false)},pregunta25:a.pregunta25,pregunta26:[],pregunta27:{opcionA:(a.pregunta27opcionA=="on"?true:false),opcionB:(a.pregunta27opcionB=="on"?true:false),opcionC:(a.pregunta27opcionC=="on"?true:false),opcionD:(a.pregunta27opcionD=="on"?true:false),opcionE:(a.pregunta27opcionE=="on"?true:false),opcionF:(a.pregunta27opcionF=="on"?true:false)},pregunta28:[],pregunta29:a.pregunta29,pregunta30:{personasF:a.pregunta30personasF,personasM:a.pregunta30personasM,personasNA:a.pregunta30personasNA},pregunta31:[],pregunta32:[],pregunta33:[],pregunta34:{opcionA:(a.pregunta34opcionA=="on"?true:false),opcionB:(a.pregunta34opcionB=="on"?true:false),opcionC:(a.pregunta34opcionC=="on"?true:false),opcionD:(a.pregunta34opcionD=="on"?true:false),opcionE:(a.pregunta34opcionE=="on"?true:false),opcionF:(a.pregunta34opcionF=="on"?true:false),opcionG:(a.pregunta34opcionG=="on"?true:false),opcionH:(a.pregunta34opcionH=="on"?true:false)},pregunta35:a.pregunta35,pregunta36:{opcionA:(a.pregunta36opcionA=="on"?true:false),opcionB:(a.pregunta36opcionB=="on"?true:false),opcionC:(a.pregunta36opcionC=="on"?true:false),opcionD:(a.pregunta36opcionD=="on"?true:false),opcionE:(a.pregunta36opcionE=="on"?true:false),opcionF:(a.pregunta36opcionF=="on"?true:false),opcionG:(a.pregunta36opcionG=="on"?true:false),opcionH:(a.pregunta36opcionH=="on"?true:false)},pregunta37:a.pregunta37,pregunta38:{opcionA:(a.pregunta38opcionA=="on"?true:false),opcionB:(a.pregunta38opcionB=="on"?true:false),opcionC:(a.pregunta38opcionC=="on"?true:false),opcionD:(a.pregunta38opcionD=="on"?true:false),opcionE:(a.pregunta38opcionE=="on"?true:false),opcionF:(a.pregunta38opcionF=="on"?true:false)},pregunta39:{opcionA:(a.pregunta39opcionA=="on"?true:false),opcionB:(a.pregunta39opcionB=="on"?true:false),opcionC:(a.pregunta39opcionC=="on"?true:false),opcionD:(a.pregunta39opcionD=="on"?true:false),opcionE:(a.pregunta39opcionE=="on"?true:false),opcionF:(a.pregunta39opcionF=="on"?true:false)},pregunta40:{opcionA:(a.pregunta40opcionA=="on"?true:false),opcionB:(a.pregunta40opcionB=="on"?true:false),opcionC:(a.pregunta40opcionC=="on"?true:false),opcionD:(a.pregunta40opcionD=="on"?true:false),opcionE:(a.pregunta40opcionE=="on"?true:false),opcionF:(a.pregunta40opcionF=="on"?true:false)},pregunta41:{ninguno:(a.pregunta41opcionNinguno=="on"?true:false),opcionMama:a.pregunta41opcionMama,opcionPapa:a.pregunta41opcionPapa,opcionOtro:a.pregunta41opcionOtro},pregunta42:{opcionA:(a.pregunta42opcionA=="on"?true:false),opcionB:(a.pregunta42opcionB=="on"?true:false),opcionC:(a.pregunta42opcionC=="on"?true:false),opcionD:(a.pregunta42opcionD=="on"?true:false),opcionE:(a.pregunta42opcionE=="on"?true:false)},pregunta43:a.pregunta43,pregunta44:{opcionA:(a.pregunta44opcionA=="on"?true:false),opcionB:(a.pregunta44opcionB=="on"?true:false),opcionC:(a.pregunta44opcionC=="on"?true:false)},pregunta45:{edad:a.pregunta45edad,opcionA:(a.pregunta45opcionA=="on"?true:false),opcionB:(a.pregunta45opcionB=="on"?true:false),opcionC:(a.pregunta45opcionC=="on"?true:false),opcionD:(a.pregunta45opcionD=="on"?true:false)}};var b=Ext.getCmp("Grid-Pregunta14");Ext.each(b.getStore().data.items,function(e,g,f){o.pregunta14.push({nivel:e.get("compNivelEducativo"),madre:e.get("madreNivelEducativo"),padre:e.get("padreNivelEducativo")})});var q=Ext.getCmp("Grid-Pregunta26");Ext.each(q.getStore().data.items,function(e,g,f){o.pregunta26.push({nombreAnimal:e.get("compTipoAnimal"),seleccion:e.get("activarTipoAnimal"),numero:e.get("numeroTipoAnimal")})});var s=Ext.getCmp("Grid-Pregunta28");Ext.each(s.getStore().data.items,function(e,g,f){o.pregunta28.push({nombreAfiliado:e.get("nombre"),carnet:e.get("numCarnet"),edad:e.get("edad"),discapacidad:e.get("codDiscapacidad")})});var u=Ext.getCmp("Grid-Pregunta31");Ext.each(u.getStore().data.items,function(e,g,f){o.pregunta31.push({nombreFamiliar:e.get("nombre"),carnet:e.get("numCarnet")})});var w=Ext.getCmp("Grid-Pregunta32");Ext.each(w.getStore().data.items,function(e,g,f){o.pregunta32.push({nombreFamiliar:e.get("nombre"),carnet:e.get("numCarnet")})});var x=Ext.getCmp("Grid-Pregunta33");Ext.each(x.getStore().data.items,function(e,g,f){o.pregunta33.push({nombreFamiliar:e.get("nombre"),carnet:e.get("numCarnet")})});var p={url:Coomuce.Url.Funciones+"HfdfrGuardar",data:{info:r,historia:o},targetMask:v,msgMask:"Guardando datos...",fnSuccess:function(f){var e=Ext.getCmp("CoomuceHfdfr");e.destroy()}};Coomuce.Util.EnviarPost(p)}})},onBlurNumber:function(f,d,e){f.setRawValue(Ext.util.Format.usMoney(f.getValue()))},onSelectCombo:function(k,i,n){var l=this;if(k.dependent){var m=l.lookupReference("idCiudad");m.getStore().load({params:{idDepartamento:i.get("idDepartamento")}})}else{for(var h=0;h<k.componentReference.length;h++){var j=l.lookupReference(k.componentReference[h]);j.setValue(i.get(k.componentReference[h]))}}},onChangeCheckNinguno:function(j,l,i,p){var n=this;var m=n.lookupReference("pregunta41opcionMama");var o=n.lookupReference("pregunta41opcionPapa");var k=n.lookupReference("pregunta41opcionOtro");if(l){m.setValue("");o.setValue("");k.setValue("")}else{m.setValue("NO");o.setValue("NO");k.setValue("NO")}m.setDisabled(l);o.setDisabled(l);k.setDisabled(l)},onChangeCheck:function(h,i,g,l){var k=this;var j=k.lookupReference("pregunta8opcionCual");if(i){j.setReadOnly(h.boxLabel=="OTRO"?false:true)}else{j.setReadOnly(true)}},onChangeOption:function(m,k,i,n){var l=this;var h=Ext.getCmp("Grid-Pregunta26");var j=l.lookupReference("pregunta27");h.setDisabled(m.inputValue=="SI"?true:false);j.setDisabled(m.inputValue=="SI"?true:false)},onBotonAdicionarGrid28Click:function(){var d=Ext.getCmp("Grid-Pregunta28").getStore();var c=[{numCarnet:"",nombre:"",edad:0,codDiscapacidad:""}];d.insert(0,c)},onBotonRemoverGrid28Click:function(){var b=Ext.getCmp("Grid-Pregunta28");b.getStore().remove(b.selModel.getSelection())},onBotonAdicionarGrid31Click:function(){var j=this;var i=j.lookupReference("numeroIntegrantes");var f=Ext.getCmp("Grid-Pregunta31").getStore();for(var g=0;g<i.getValue();g++){var h=[{numCarnet:"",nombre:""}];f.insert(0,h)}},onBotonRemoverGrid31Click:function(){var b=Ext.getCmp("Grid-Pregunta31");b.getStore().remove(b.selModel.getSelection())},onBotonAdicionarGrid32Click:function(){var d=Ext.getCmp("Grid-Pregunta32").getStore();var c=[{numCarnet:"",nombre:""}];d.insert(0,c)},onBotonRemoverGrid32Click:function(){var b=Ext.getCmp("Grid-Pregunta32");b.getStore().remove(b.selModel.getSelection())},onBotonAdicionarGrid33Click:function(){var d=Ext.getCmp("Grid-Pregunta33").getStore();var c=[{numCarnet:"",nombre:""}];d.insert(0,c)},onBotonRemoverGrid33Click:function(){var b=Ext.getCmp("Grid-Pregunta33");b.getStore().remove(b.selModel.getSelection())},onUploadDataComplete:function(g,h){var e=this.getTitleView();var f=g.getWidgetRecord();f.set("archivoAudioHfdfr",h.data);Coomuce.Util.ShowMessage({type:"INFO",title:e,msg:"Archivo de audio importado correctamente."})},onUploadError:function(h,j){var f=this;var g=f.getTitleView();var i="ErrorType: "+j.errorType;switch(j.errorType){case"FileSize":i="Este archivo es demasiado grande: "+Ext.util.Format.fileSize(j.fileSize)+". El tamaño máximo de subida es "+Ext.util.Format.fileSize(j.maxFileSize)+".";break;case"QueueLength":i="La longitud de la cola es demasiado larga: "+j.queueLength+". La longitud máxima de la cola es "+j.maxQueueLength+".";break}Coomuce.Util.ShowMessage({type:"ERROR",title:g,msg:i})},onBotonEliminarArchivoClick:function(c){var d=c.getWidgetRecord();d.set("archivoAudioHfdfr","")},onBotonImportarArchivoClick:function(){var k=this;var h=Ext.create("Ext.data.Store",{autoLoad:true,fields:["idInfoHfdfr","tipoDiligenciamientoHfdfr",{name:"fechaVisitaHfdfr",convert:Coomuce.Util.parseDate},"codigoTipoIdentificacion","identificacionFuanAfiliado","compAfiliado","archivoAudioHfdfr"],proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Funciones+"GetFunHfdfrAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}});var i=Ext.widget("pagingtoolbar",{store:h,displayInfo:true,displayMsg:"Registros {0} - {1} de {2}"});var g=Ext.create("Ext.grid.Panel",{bbar:i,columns:[{dataIndex:"idInfoHfdfr",header:"No. Plantilla"},{dataIndex:"tipoDiligenciamientoHfdfr",header:"Tipo Diligenciamiento"},{xtype:"datecolumn",dataIndex:"fechaVisitaHfdfr",format:"d/m/Y",header:"Fecha"},{dataIndex:"codigoTipoIdentificacion",header:"Tipo Identificación"},{dataIndex:"identificacionFuanAfiliado",header:"Identificación"},{dataIndex:"compAfiliado",header:"Afiliado"},{xtype:"widgetcolumn",header:"",width:60,widget:{xtype:"uploader",uploadConfig:{uploadUrl:Coomuce.Url.Funciones+"ImportarAudioHfdfr",maxFileSize:10*1024*1024},inputAttrTpl:"data-qtip='Seleccione el archivo.'",listeners:{uploaddatacomplete:k.onUploadDataComplete,uploaderror:k.onUploadError}}},{xtype:"widgetcolumn",dataIndex:"archivoAudioHfdfr",header:"Archivo de audio",width:200,widget:{xtype:"button",iconCls:"x-fa fa-minus-circle",textAlign:"left",handler:k.onBotonEliminarArchivoClick}}],columnLines:true,loadMask:true,store:h});var j=function(){var a=[];Ext.each(h.data.items,function(d,c,b){if(d.dirty){if(!d.phantom){a.push({idInfoHfdfr:d.data.idInfoHfdfr,archivoAudioHfdfr:d.data.archivoAudioHfdfr})}}});Ext.Msg.confirm(titleView,"Desea guardar las modificaciones?",function(b){if(b==="yes"){var c={url:Coomuce.Url.Funciones+"HfdfrGuardarCambios",data:{datos:a},targetMask:g,msgMask:"Guardando datos...",fnSuccess:function(d){h.load()}};Coomuce.Util.EnviarPost(c)}})};var l=Ext.create("Ext.window.Window",{height:500,items:g,layout:"fit",modal:true,tbar:{items:[{text:"Guardar cambios",handler:j}]},title:"Importar archivo de audio",width:500});l.show()},onUploadFirmaDataComplete:function(i,j){var f=this.getTitleView();var g=this.lookupReference("botonEliminarFirma");var h=this.lookupReference("firmaHfdfr");g.setText(j.data);h.setValue(j.data);Coomuce.Util.ShowMessage({type:"INFO",title:f,msg:"Archivo de firma importado correctamente."})},onUploadFirmaError:function(h,j){var f=this;var g=f.getTitleView();var i="ErrorType: "+j.errorType;switch(j.errorType){case"FileSize":i="Este archivo es demasiado grande: "+Ext.util.Format.fileSize(j.fileSize)+". El tamaño máximo de subida es "+Ext.util.Format.fileSize(j.maxFileSize)+".";break;case"QueueLength":i="La longitud de la cola es demasiado larga: "+j.queueLength+". La longitud máxima de la cola es "+j.maxQueueLength+".";break}Coomuce.Util.ShowMessage({type:"ERROR",title:g,msg:i})},onBotonEliminarFirmaClick:function(d){d.setText("");var c=this.lookupReference("firmaHfdfr");c.setValue("")}});Ext.define("CoomuceMod.view.CaracterizacionPoblacional.HfdfrModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.caracterizacionpoblacional-hfdfr",stores:{getTipoIdentificacion:{autoLoad:true,model:"CoomuceMod.model.Parametros.Generales.TipoIdentificacion",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetTipoIdentificacionAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getDepartamento:{autoLoad:true,model:"CoomuceMod.model.Administracion.Departamento",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Administracion+"GetDepartamentoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getCiudad:{autoLoad:false,model:"CoomuceMod.model.Administracion.Ciudad",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Administracion+"GetCiudadAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getTipoZona:{autoLoad:true,model:"CoomuceMod.model.Parametros.Generales.TipoZona",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetTipoZonaAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getProcedencia:{autoLoad:true,model:"CoomuceMod.model.Parametros.CaracterizacionPoblacional.Procedencia",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetProcedenciaAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getNivelEducativo:{autoLoad:true,fields:[{name:"idNivelEducativo",type:"int"},{name:"compNivelEducativo",type:"string"},{name:"padreNivelEducativo",type:"bool"},{name:"madreNivelEducativo",type:"bool"}],proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Funciones+"GetNivelEducativoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getCondicionVivienda:{autoLoad:true,model:"CoomuceMod.model.Parametros.CaracterizacionPoblacional.CondicionesVivienda.CondicionVivienda",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetCondicionViviendaAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getTenencia:{autoLoad:true,model:"CoomuceMod.model.Parametros.CaracterizacionPoblacional.CondicionesVivienda.Tenencia",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetTenenciaAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getTipoCombustible:{autoLoad:true,model:"CoomuceMod.model.Parametros.CaracterizacionPoblacional.CondicionesVivienda.TipoCombustible",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetTipoCombustibleAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getTipoVivienda:{autoLoad:true,model:"CoomuceMod.model.Parametros.CaracterizacionPoblacional.CondicionesVivienda.TipoVivienda",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetTipoViviendaAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getTratamientoAgua:{autoLoad:true,model:"CoomuceMod.model.Parametros.CaracterizacionPoblacional.CondicionesVivienda.TratamientoAgua",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetTratamientoAguaAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getDisposicionExcreta:{autoLoad:true,model:"CoomuceMod.model.Parametros.CaracterizacionPoblacional.CondicionesVivienda.DisposicionExcreta",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetDisposicionExcretaAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getDisposicionBasura:{autoLoad:true,model:"CoomuceMod.model.Parametros.CaracterizacionPoblacional.CondicionesVivienda.DisposicionBasura",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetDisposicionBasuraAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getTipoAnimal:{autoLoad:true,fields:[{name:"idTipoAnimal",type:"int"},{name:"compTipoAnimal",type:"string"},{name:"activarTipoAnimal",type:"bool"},{name:"numeroTipoAnimal",type:"int"}],proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Funciones+"GetTipoAnimalAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getOpciones:{fields:["id","nombre"],data:[["SI","A - SI"],["NO","B - NO"],["AVECES","C - A VECES"]]},setPregunta28:{fields:["numCarnet","nombre","edad","codDiscapacidad"]},setPregunta31:{fields:["numCarnet","nombre"]},setPregunta32:{fields:["numCarnet","nombre"]},setPregunta33:{fields:["numCarnet","nombre"]}}});Ext.define("CoomuceMod.view.CaracterizacionPoblacional.Hfdfr",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.CaracterizacionPoblacional.HfdfrController","CoomuceMod.view.CaracterizacionPoblacional.HfdfrModel"],controller:"caracterizacionpoblacional-hfdfr",viewModel:{type:"caracterizacionpoblacional-hfdfr"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick",reference:"botonGuardar"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick",reference:"botonCancelar"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Importar archivo de audio",iconCls:"x-fa fa-file-audio-o",handler:"onBotonImportarArchivoClick",tooltip:"Esta opción permite importar archivos de audio a las plantillas diligenciadas telefonicamente."}]}],items:[{xtype:"form",bodyPadding:10,defaults:{anchor:"100%"},id:"Form-Hfdfr-Principal",scrollable:true,items:[{xtype:"datefield",fieldLabel:"Fecha de Visita",name:"fechaVisitaHfdfr",format:"d/m/Y",maxValue:new Date(),value:new Date()},{xtype:"combo",fieldLabel:"Tipo Diligenciamiento",name:"tipoDiligenciamientoHfdfr",store:["Personal","Telefonico"],value:"Personal"},{layout:{type:"table",columns:6},items:[{items:[{xtype:"label",html:"Departamento: "}]},{items:[{xtype:"numberfield",name:"idDepartamento",hidden:true,reference:"idDepartamento"},{xtype:"textfield",name:"compDepartamento",readOnly:true,reference:"compDepartamento"}]},{items:[{xtype:"label",html:"Municipio: "}]},{items:[{xtype:"numberfield",name:"idCiudad",hidden:true,reference:"idCiudad"},{xtype:"textfield",name:"compCiudad",readOnly:true,reference:"compCiudad"}]},{items:[{xtype:"label",html:"Vereda: "}]},{items:[{xtype:"textfield",hideLabel:true,name:"veredaInfoHfdfr"}]},{items:[{xtype:"label",html:"Barrio: "}]},{items:[{xtype:"textfield",hideLabel:true,name:"barrioInfoHfdfr"}]},{items:[{xtype:"label",html:"Teléfono: "}]},{items:[{xtype:"textfield",hideLabel:true,name:"telefonoInfoHfdfr"}]}]},{xtype:"label",html:"<b>INFORMACIÓN FAMILIAR</b>"},{layout:{type:"table",columns:6},items:[{items:[{xtype:"label",html:"Entrevista A: "}]},{items:[{xtype:"textfield",hideLabel:true,name:"nombreCompletoAfiliado",readOnly:true,reference:"nombreCompletoAfiliado",width:400}]},{items:[{xtype:"label",html:"Tipo documento <br />de identidad: "}]},{items:[{xtype:"textfield",name:"codigoTipoIdentificacion",readOnly:true,reference:"codigoTipoIdentificacion",width:200}]},{items:[{xtype:"label",html:"Documento No.: "}]},{layout:{type:"table",columns:2},items:[{items:[{xtype:"numberfield",hidden:true,name:"idFuanAfiliado"},{xtype:"textfield",hideLabel:true,name:"identificacionFuanAfiliado",readOnly:true}]},{items:[{xtype:"button",componentReference:["idFuanAfiliado","codigoTipoIdentificacion","identificacionFuanAfiliado","nombreCompletoAfiliado","puntajeSisbenFuanAfiliado","numCarnetFuanAfiliado","idDepartamento","compDepartamento","idCiudad","compCiudad"],fechaUltFormato:"fechaUltHistoria",validarFormato:true,handler:Coomuce.Util.buscarAfiliadoHistoria,iconCls:"x-fa fa-binoculars",tooltip:"Lista de Afiliados",width:30}]}]},{colspan:2,html:"&nbsp;"},{items:[{xtype:"label",html:"Carnet: "}]},{items:[{xtype:"textfield",hideLabel:true,name:"numCarnetFuanAfiliado",reference:"numCarnetFuanAfiliado",readOnly:true}]},{items:[{xtype:"label",html:"Sisben: "}]},{items:[{xtype:"textfield",hideLabel:true,name:"puntajeSisbenFuanAfiliado",readOnly:true,reference:"puntajeSisbenFuanAfiliado"}]}]},{xtype:"combo",bind:{store:"{getProcedencia}"},displayField:"compProcedencia",editable:false,fieldLabel:"1. PROCEDENCIA DE LA FAMILIA",labelWidth:200,name:"pregunta1",queryMode:"local",reference:"idProcedencia",valueField:"compProcedencia"},{xtype:"combo",bind:{store:"{getTipoZona}"},displayField:"compTipoZona",editable:false,fieldLabel:"2. UBICACIÓN ACTUAL DE LA FAMILIA",labelWidth:250,name:"pregunta2",queryMode:"local",reference:"idTipoZona",valueField:"compTipoZona"},{layout:{type:"table",columns:4},items:[{items:[{xtype:"label",html:"3. NUMERO DE PERSONAS QUE VIVEN EN EL DOMICILIO: "}]},{items:[{xtype:"textfield",hideLabel:true,name:"pregunta3"}]},{items:[{xtype:"label",html:"9. NUMEROS DE PERSONAS MAYORES DE 65 AÑOS: "}]},{items:[{xtype:"textfield",hideLabel:true,name:"pregunta9"}]},{items:[{xtype:"label",html:"4. NUMERO DE PERSONAS DE 6 A 18 AÑOS: "}]},{items:[{xtype:"textfield",hideLabel:true,name:"pregunta4"}]},{items:[{xtype:"label",html:"10. NUMERO DE PERSONAS MAYORES DE 65 AÑOS QUE TRABAJAN: "}]},{items:[{xtype:"textfield",hideLabel:true,name:"pregunta10"}]},{items:[{xtype:"label",html:"5. NUMERO DE PERSONAS DE 6 A 18 AÑOS QUE ESTUDIAN: "}]},{items:[{xtype:"textfield",hideLabel:true,name:"pregunta5"}]},{items:[{xtype:"label",html:"11. NUMERO DE PERSONAS DE 15 A 65 AÑOS: "}]},{items:[{xtype:"textfield",hideLabel:true,name:"pregunta11"}]},{items:[{xtype:"label",html:"6. NUMERO DE PERSONAS DE 6 A 14 AÑOS: "}]},{items:[{xtype:"textfield",hideLabel:true,name:"pregunta6"}]},{items:[{xtype:"label",html:"12. NUMERO DE PERSONAS DE 15 A 65 AÑOS QUE TRABAJAN: "}]},{items:[{xtype:"textfield",hideLabel:true,name:"pregunta12"}]},{items:[{xtype:"label",html:"7. NUMERO DE PERSONAS DE 6 A 14 AÑOS QUE TRABAJAN: "}]},{items:[{xtype:"textfield",hideLabel:true,name:"pregunta7"}]},{items:[{xtype:"label",html:"13. TOTAL DE INGRESOS MENSUALES EN LA FAMILIA: "}]},{items:[{xtype:"numberfield",hideLabel:true,hideTrigger:true,listeners:{blur:"onBlurNumber"},name:"pregunta13"}]}]},{xtype:"checkboxgroup",fieldLabel:"8. QUIEN APORTA ECONOMICAMENTE EN LA FAMILIA",labelWidth:350,items:[{boxLabel:"MADRE",name:"pregunta8opcionMadre",listeners:{change:"onChangeCheck"}},{boxLabel:"PADRE",name:"pregunta8opcionPadre",listeners:{change:"onChangeCheck"}},{boxLabel:"HIJOS",name:"pregunta8opcionHijos",listeners:{change:"onChangeCheck"}},{boxLabel:"OTRO",name:"pregunta8opcionOtros",listeners:{change:"onChangeCheck"}},{xtype:"textfield",fieldLabel:"CUAL?",name:"pregunta8opcionCual",readOnly:true,reference:"pregunta8opcionCual"}]},{xtype:"grid",bind:{store:"{getNivelEducativo}"},border:true,columns:[{dataIndex:"compNivelEducativo",header:"",width:250},{xtype:"checkcolumn",dataIndex:"madreNivelEducativo",header:"Madre"},{xtype:"checkcolumn",dataIndex:"padreNivelEducativo",header:"Padre"}],columnLines:true,height:300,id:"Grid-Pregunta14",tbar:{items:["14. NIVEL EDUCATIVO PADRES"]}},{xtype:"label",html:"<b>15. CONDICIONES DE LA VIVIENDA</b><br />SEÑALE UNA OPCION"},{xtype:"combo",bind:{store:"{getCondicionVivienda}"},displayField:"nombreCondicionVivienda",editable:false,fieldLabel:"A - EL PISO DE LA VIVIENDA ESTA CONSTRUIDO EN SU MAYOR PORCENTAJE EN",labelWidth:400,name:"pregunta15opcionA",queryMode:"local",valueField:"nombreCondicionVivienda"},{xtype:"combo",bind:{store:"{getCondicionVivienda}"},displayField:"nombreCondicionVivienda",editable:false,fieldLabel:"B - EL TECHO DE LA VIVIENDA ESTA CONSTRUIDO EN SU MAYOR PORCENTAJE EN",labelWidth:400,name:"pregunta15opcionB",queryMode:"local",valueField:"nombreCondicionVivienda"},{xtype:"combo",bind:{store:"{getCondicionVivienda}"},displayField:"nombreCondicionVivienda",editable:false,fieldLabel:"C - LAS PAREDES DE LA VIVIENDA ESTAN CONSTRUIDAS EN SU MAYOR PORCENTAJE EN",labelWidth:400,name:"pregunta15opcionC",queryMode:"local",valueField:"nombreCondicionVivienda"},{xtype:"numberfield",fieldLabel:"D - NUMERO DE HABITACIONES DEL DOMICILIO",labelWidth:300,name:"pregunta15opcionD"},{xtype:"numberfield",fieldLabel:"E - NUMERO DE CAMAS EN EL DOMICILIO",labelWidth:250,name:"pregunta15opcionE"},{xtype:"combo",bind:{store:"{getTipoVivienda}"},displayField:"compTipoVivienda",editable:false,fieldLabel:"F - TIPO DE VIVIENDA",labelWidth:150,name:"pregunta15opcionF",queryMode:"local",valueField:"compTipoVivienda"},{xtype:"combo",bind:{store:"{getTenencia}"},displayField:"compTenencia",editable:false,fieldLabel:"G - TENENCIA",labelWidth:100,name:"pregunta15opcionG",queryMode:"local",valueField:"compTenencia"},{xtype:"radiogroup",fieldLabel:"16. LA FAMILIA COCINA EN EL MISMO SITIO DONDE DUERME",labelWidth:300,name:"pregunta16",items:[{boxLabel:"A - SI",inputValue:"SI"},{boxLabel:"B - NO",inputValue:"NO"},{boxLabel:"C - N.A",inputValue:"N.A",checked:true}]},{xtype:"combo",bind:{store:"{getTipoCombustible}"},displayField:"compTipoCombustible",editable:false,fieldLabel:"17. EL TIPO DE COMBUSTIBLE UTILIZADO PARA COCINAR ES",labelWidth:400,name:"pregunta17",queryMode:"local",valueField:"compTipoCombustible"},{xtype:"combo",bind:{store:"{getTratamientoAgua}"},displayField:"compTratamientoAgua",editable:false,fieldLabel:"18. TIPO DE TRATAMIENTO CASERO DEL AGUA",labelWidth:280,name:"pregunta18",queryMode:"local",valueField:"compTratamientoAgua"},{xtype:"radiogroup",fieldLabel:"19. LOS RECIPIENTES UTILIZADOS PARA EL ALMACENAMIENTO SE DESINFECTAN PERIODICAMENTE",labelWidth:400,name:"pregunta19",items:[{boxLabel:"A - SI",inputValue:"SI"},{boxLabel:"B - NO",inputValue:"NO"},{boxLabel:"C - N.A",inputValue:"N.A",checked:true}]},{xtype:"checkboxgroup",fieldLabel:"20. LA VIVIENDA CUENTA CON SERVICIOS DE",labelWidth:300,items:[{boxLabel:"A - LUZ",name:"pregunta20opcionA"},{boxLabel:"B - AGUA",name:"pregunta20opcionB"},{boxLabel:"C - TELEFONO",name:"pregunta20opcionC"},{boxLabel:"D - ALCANTARILLADO",name:"pregunta20opcionD"},{boxLabel:"E - RECOLECCION BASURAS",name:"pregunta20opcionE"},{boxLabel:"F - NO APLICA",name:"pregunta20opcionF"}]},{xtype:"combo",bind:{store:"{getDisposicionExcreta}"},displayField:"compDisposicionExcreta",editable:false,fieldLabel:"21. LA DISPOSICION DE EXCRETAS SE REALIZA",labelWidth:280,name:"pregunta21",queryMode:"local",valueField:"compDisposicionExcreta"},{xtype:"radiogroup",fieldLabel:"22. EL MANEJO DE BASURAS EN EL HOGAR ES",labelWidth:300,name:"pregunta22",items:[{boxLabel:"A - ADECUADO",inputValue:"ADECUADO"},{boxLabel:"B - INADECUADO",inputValue:"INADECUADO"},{boxLabel:"C - NO APLICA",inputValue:"N.A",checked:true}]},{xtype:"combo",bind:{store:"{getDisposicionBasura}"},displayField:"compDisposicionBasura",editable:false,fieldLabel:"23. LA DISPOSICION FINAL DE LA BASURA SE REALIZA EN",labelWidth:280,name:"pregunta23",queryMode:"local",valueField:"compDisposicionBasura"},{xtype:"label",html:"<b>CONDICIONES SOCIOAMBIENTALES</b>"},{xtype:"checkboxgroup",columns:3,fieldLabel:"24. SEÑALE CUALES FACTORES DE RIESGO AFECTAN A SU FAMILIA EN LA LOCALIDAD, VEREDA, BARRIO EN DONDE VIVE. (SEÑALE UNA O VARIAS)",labelAlign:"top",items:[{boxLabel:"A - DISPOSICION INADECUADA DE BASURAS",name:"pregunta24opcionA"},{boxLabel:"B - CAÑOS, RIOS, LAGUNAS,CONTAMINADAS",name:"pregunta24opcionB"},{boxLabel:"C - DESLIZAMIENTO DE TIERRA",name:"pregunta24opcionC"},{boxLabel:"D - ARENERAS",name:"pregunta24opcionD"},{boxLabel:"E - CARBONERAS",name:"pregunta24opcionE"},{boxLabel:"F - VECTORES (F1-  ROEDORES)",name:"pregunta24opcionF1"},{boxLabel:"F - VECTORES (F2-  INSECTOS)",name:"pregunta24opcionF2"},{boxLabel:"G - INUNDACIONES",name:"pregunta24opcionG"},{boxLabel:"H - INSEGURIDAD",name:"pregunta24opcionH"},{boxLabel:"I - PROSTITUCION",name:"pregunta24opcionI"},{boxLabel:"J - PANDILLISMO",name:"pregunta24opcionJ"},{boxLabel:"K - DROGADICCION",name:"pregunta24opcionK"},{boxLabel:"L - ALCOHOLISMO",name:"pregunta24opcionL"},{boxLabel:"M - VIOLENCIA",name:"pregunta24opcionM"},{boxLabel:"N - OTRO",name:"pregunta24opcionN"},{boxLabel:"O - NINGUNA",name:"pregunta24opcionO"}]},{xtype:"radiogroup",fieldLabel:"25. TIENE LA FAMILIA ANIMALES?",labelWidth:300,name:"pregunta25",items:[{boxLabel:"A - SI",inputValue:"SI",listeners:{change:"onChangeOption"}},{boxLabel:"B - NO",inputValue:"NO",checked:true,listeners:{change:"onChangeOption"}}]},{xtype:"grid",bind:{store:"{getTipoAnimal}"},border:true,columns:[{dataIndex:"compTipoAnimal",header:"",width:250},{xtype:"checkcolumn",dataIndex:"activarTipoAnimal",header:"Seleccionar"},{dataIndex:"numeroTipoAnimal",header:"Número",width:100,editor:{xtype:"numberfield",allowBlank:false}}],columnLines:true,height:200,id:"Grid-Pregunta26",plugins:{ptype:"cellediting",clicksToEdit:1},tbar:{items:["26. SEÑALE CUANTOS: (PUEDE SEÑALAR UNA O VARIAS CON EL NUMERO)"]}},{xtype:"checkboxgroup",fieldLabel:"27. REGISTRE SI SE ENCUENTRAN VACUNADOS (PUEDE SEÑALAR UNA O VARIAS)",labelAlign:"top",items:[{boxLabel:"A - CANINOS",name:"pregunta27opcionA"},{boxLabel:"B - AVES",name:"pregunta27opcionB"},{boxLabel:"C - PORCINOS",name:"pregunta27opcionC"},{boxLabel:"D - OVINOS",name:"pregunta27opcionD"},{boxLabel:"E - EQUINOS",name:"pregunta27opcionE"},{boxLabel:"F - FELINOS",name:"pregunta27opcionF"}],reference:"pregunta27"},{xtype:"grid",bind:{store:"{setPregunta28}"},border:true,columns:[{dataIndex:"nombre",header:"Nombre",width:400,editor:{allowBlank:false}},{dataIndex:"numCarnet",header:"Carnet",width:200,editor:{allowBlank:false}},{dataIndex:"edad",header:"Edad",width:100,editor:{xtype:"numberfield",allowBlank:false}},{dataIndex:"codDiscapacidad",header:"Cód. Discapacidad",width:200,editor:{xtype:"combo",allowBlank:false,store:["S","M","F"]}}],columnLines:true,height:200,id:"Grid-Pregunta28",plugins:{ptype:"cellediting",clicksToEdit:1},tbar:{items:["28. REGISTRE LOS AFILIADOS DISCAPACITADOS DE LA FAMILIA (S:SENSORIAL, M:MENTAL, F: FISICA)","->",{iconCls:"x-fa fa-plus-square",tooltip:"Adicionar",handler:"onBotonAdicionarGrid28Click"},{iconCls:"x-fa fa-minus-square",tooltip:"Remover",handler:"onBotonRemoverGrid28Click"}]}},{xtype:"numberfield",fieldLabel:"29. REGISTRE CUANTOS INTEGRANTES DE LA FAMILIA NO HAN ASISTIDO A CONTROL ODONTOLOGICO EN EL ULTIMO AÑO",labelWidth:600,name:"pregunta29"},{xtype:"checkboxgroup",columns:3,fieldLabel:"30. REGISTRE LAS PERSONAS  MAYORES DE 60 AÑOS QUE NO HAN RECIBIDO CONTROL MEDICO EN EL ULTIMO AÑO",labelWidth:500,items:[{xtype:"numberfield",fieldLabel:"F",labelWidth:50,name:"pregunta30personasF",width:150},{xtype:"numberfield",fieldLabel:"M",labelWidth:50,name:"pregunta30personasM",width:150},{xtype:"numberfield",fieldLabel:"N/A",labelWidth:50,name:"pregunta30personasNA",width:150}]},{xtype:"grid",bind:{store:"{setPregunta31}"},border:true,columns:[{dataIndex:"numCarnet",header:"Carnet",width:200,editor:{allowBlank:false}},{dataIndex:"nombre",header:"Nombre",width:400,editor:{allowBlank:false}}],columnLines:true,height:200,id:"Grid-Pregunta31",plugins:{ptype:"cellediting",clicksToEdit:1},tbar:{items:["31. REGISTRE EL NUMERO DE INTEGRANTES DE LA FAMILIA QUE TENGAN TOS CON ESPECTORACION POR MAS DE 15 DIAS?",{xtype:"numberfield",hideLabel:true,reference:"numeroIntegrantes",width:80},"->",{iconCls:"x-fa fa-plus-square",tooltip:"Adicionar",handler:"onBotonAdicionarGrid31Click"},{iconCls:"x-fa fa-minus-square",tooltip:"Remover",handler:"onBotonRemoverGrid31Click"}]}},{xtype:"grid",bind:{store:"{setPregunta32}"},border:true,columns:[{dataIndex:"numCarnet",header:"Carnet",width:200,editor:{allowBlank:false}},{dataIndex:"nombre",header:"Nombre",width:400,editor:{allowBlank:false}}],columnLines:true,height:200,id:"Grid-Pregunta32",plugins:{ptype:"cellediting",clicksToEdit:1},tbar:{items:["32. REGISTRE LOS  INTEGRANTES DE LA FAMILIA QUE PRESENTAN  MANCHAS, LESIONES, NODULOS O ULCERAS  EN LA PIEL CON O SIN SENSIBILIDAD <br />EN ALGUNA PARTE DEL CUERPO","->",{iconCls:"x-fa fa-plus-square",tooltip:"Adicionar",handler:"onBotonAdicionarGrid32Click"},{iconCls:"x-fa fa-minus-square",tooltip:"Remover",handler:"onBotonRemoverGrid32Click"}]}},{xtype:"grid",bind:{store:"{setPregunta33}"},border:true,columns:[{dataIndex:"numCarnet",header:"Carnet",width:200,editor:{allowBlank:false}},{dataIndex:"nombre",header:"Nombre",width:400,editor:{allowBlank:false}}],columnLines:true,height:200,id:"Grid-Pregunta33",plugins:{ptype:"cellediting",clicksToEdit:1},tbar:{items:["33. ALGUN MIEMBRO DE LA FAMILIA SE ENCUENTRA ENFERMO EN EL MOMENTO DE LA VISITA?",{xtype:"radio",boxLabel:"SI",inputValue:"SI"},{xtype:"radio",boxLabel:"NO",checked:true,inputValue:"NO"},"->",{iconCls:"x-fa fa-plus-square",tooltip:"Adicionar",handler:"onBotonAdicionarGrid33Click"},{iconCls:"x-fa fa-minus-square",tooltip:"Remover",handler:"onBotonRemoverGrid33Click"}]}},{xtype:"checkboxgroup",columns:5,fieldLabel:"34. COMO CORRIGE EL MAL COMPORTAMIENTO DE  SUS HIJOS",labelAlign:"top",items:[{boxLabel:"A - CASTIGO FISICO",name:"pregunta34opcionA"},{boxLabel:"B - REGAÑO",name:"pregunta34opcionB"},{boxLabel:"C - ENCIERRO",name:"pregunta34opcionC"},{boxLabel:"D - ZARANDEO",name:"pregunta34opcionD"},{boxLabel:"E - PRIVACION",name:"pregunta34opcionE"},{boxLabel:"F - DIALOGO",name:"pregunta34opcionF"},{boxLabel:"G - AISLAMIENTO",name:"pregunta34opcionG"},{boxLabel:"H - OTRO",name:"pregunta34opcionH"}]},{xtype:"radiogroup",fieldLabel:"35. HAY NIÑOS MENORES DE 12 AÑOS QUE COCINAN EN LA CASA?",labelWidth:300,name:"pregunta35",items:[{boxLabel:"A - SI",inputValue:"SI"},{boxLabel:"B - NO",inputValue:"NO",checked:true}]},{xtype:"checkboxgroup",columns:5,fieldLabel:"36. COMO SOLUCIONAN LOS CONFLICTOS DE PAREJA?",labelAlign:"top",items:[{boxLabel:"A - DIALOGANDO",name:"pregunta36opcionA"},{boxLabel:"B - AGRESION FISICA",name:"pregunta36opcionB"},{boxLabel:"C - PRIVACION ECONOMICA",name:"pregunta36opcionC"},{boxLabel:"D - AGRESION VERBAL",name:"pregunta36opcionD"},{boxLabel:"E - PRIVACION",name:"pregunta36opcionE"},{boxLabel:"F - AGRESION SEXUAL",name:"pregunta36opcionF"},{boxLabel:"G - OTRO",name:"pregunta36opcionG"},{boxLabel:"H - SIN DATO",name:"pregunta36opcionH"}]},{xtype:"radiogroup",fieldLabel:"37. HA TENIDO CONFLICTOS EN EL HOGAR LLEGANDO A LA AGRESION FISICA O VERBAL",labelWidth:300,name:"pregunta37",items:[{boxLabel:"A - SI",inputValue:"SI"},{boxLabel:"B - NO",inputValue:"NO",checked:true}]},{xtype:"checkboxgroup",columns:6,fieldLabel:"38. QUIEN(ES) NORMALMENTE ES EL QUE AGREDE FISICA O SICOLOGICAMENTE EN LA FAMILIA",labelAlign:"top",items:[{boxLabel:"A - PADRE",name:"pregunta38opcionA"},{boxLabel:"B - MADRE",name:"pregunta38opcionB"},{boxLabel:"C - HIJOS",name:"pregunta38opcionC"},{boxLabel:"D - PADRASTRO",name:"pregunta38opcionD"},{boxLabel:"E - NO ES CLARO",name:"pregunta38opcionE"},{boxLabel:"F - NO APLICA",name:"pregunta38opcionF"}]},{xtype:"checkboxgroup",columns:3,fieldLabel:"39. CUAL(ES) ACTIVIDADES REALIZA LA FAMILIA EN EL TIEMPO LIBRE?",labelAlign:"top",items:[{boxLabel:"A - ACTIVIDADES DEPORTIVAS",name:"pregunt39opcionA"},{boxLabel:"B - ACTIVIDADES  RECREATIVAS(LEER, TV)",name:"pregunt39opcionB"},{boxLabel:"C - ACTIVIDADES ESPIRITUALES",name:"pregunt39opcionC"},{boxLabel:"D - ACTIVIDADES SOCIALES",name:"pregunt39opcionD"},{boxLabel:"E - NO REALIZA NINGUNA",name:"pregunt39opcionE"},{boxLabel:"F - OTRAS",name:"pregunt39opcionF"}]},{xtype:"checkboxgroup",columns:3,fieldLabel:"40. CUALES ACTIVIDADES RECREATIVAS REALIZAN LAS PERSONAS MAYORES DE 60 AÑOS EN SU FAMILIA?",labelAlign:"top",items:[{boxLabel:"A - ACTIVIDADES DEPORTIVAS",name:"pregunta40opcionA"},{boxLabel:"B - ACTIVIDADES  RECREATIVAS(LEER, TV)",name:"pregunta40opcionB"},{boxLabel:"C - ACTIVIDADES ESPIRITUALES",name:"pregunta40opcionC"},{boxLabel:"D - ACTIVIDADES MANUALES",name:"pregunta40opcionD"},{boxLabel:"E - OTRAS",name:"pregunta40opcionE"},{boxLabel:"F - NO REALIZAN NINGUNA",name:"pregunta40opcionF"}]},{xtype:"checkboxgroup",fieldLabel:"41. QUIEN COMPARTE EL TIEMPO LIBRE CON SUS HIJOS",labelAlign:"top",layout:"column",items:[{xtype:"container",columnWidth:0.25,items:[{xtype:"checkboxfield",boxLabel:"NINGUNO",listeners:{change:"onChangeCheckNinguno"},name:"pregunta41opcionNinguno"}]},{xtype:"container",columnWidth:0.6,items:[{xtype:"combo",bind:{store:"{getOpciones}"},displayField:"nombre",editable:false,fieldLabel:"MAMA",name:"pregunta41opcionMama",queryMode:"local",reference:"pregunta41opcionMama",valueField:"id",value:"NO"},{xtype:"combo",bind:{store:"{getOpciones}"},displayField:"nombre",editable:false,fieldLabel:"PAPA",name:"pregunta41opcionPapa",queryMode:"local",reference:"pregunta41opcionPapa",valueField:"id",value:"NO"},{xtype:"combo",bind:{store:"{getOpciones}"},displayField:"nombre",editable:false,fieldLabel:"OTRO",name:"pregunta41opcionOtro",queryMode:"local",reference:"pregunta41opcionOtro",valueField:"id",value:"NO"}]}]},{xtype:"checkboxgroup",columns:3,fieldLabel:"42. CAUSAS POR LAS CUALES NO COMPARTEN PADRES E HIJOS EL TIEMPO LIBRE",labelAlign:"top",items:[{boxLabel:"A - NO LO COMPARTEN POR EXCESO DE TRABAJO",name:"pregunta42opcionA"},{boxLabel:"B - NO LO COMPARTEN POR QUE DESCANSAN EL EL TIEMPO LIBRE",name:"pregunta42opcionB"},{boxLabel:"C - PREFIEREN QUE LOS NIÑOS JUEGUEN SOLOS",name:"pregunta42opcionC"},{boxLabel:"D - NO APLICA",name:"pregunta42opcionD"},{boxLabel:"E - OTRAS",name:"pregunta42opcionE"}]},{xtype:"radiogroup",fieldLabel:"43. HA BRINDADO ORIENTACION SEXUAL A SUS HIJOS?",labelWidth:300,name:"pregunta43",items:[{boxLabel:"A - SI",inputValue:"SI"},{boxLabel:"B - NO",inputValue:"NO",checked:true}]},{xtype:"checkboxgroup",fieldLabel:"44. COMO?",items:[{boxLabel:"A - DIALOGO ENTRE PADRES E HIJOS",name:"pregunta44opcionA"},{boxLabel:"B - LO REALIZAN EN EL COLEGIO",name:"pregunta44opcionB"},{boxLabel:"C - NO LO REALIZA",name:"pregunta44opcionC"}]},{xtype:"checkboxgroup",fieldLabel:"45. CADA CUANTO TIEMPO HACE EJERCICIO LA PERSONA ENTREVISTADA MAYOR DE 18 AÑOS",labelWidth:600,items:[{xtype:"numberfield",colspan:2,fieldLabel:"Edad",name:"pregunta45edad",labelWidth:80,value:18,width:200}]},{xtype:"checkboxgroup",columns:2,items:[{boxLabel:"A - TODOS LOS DIAS 30 MINUTOS O MENOS",name:"pregunta45opcionA"},{boxLabel:"C - MENOS DE 5 DÍAS A LA SEMANA  30 MINUTOS",name:"pregunta45opcionC"},{boxLabel:"B - 5 DÍAS A LA SEMANA MAS O MENOS 30 MINUTOS",name:"pregunta45opcionB"},{boxLabel:"D - EN EL TIEMPO LIBRE NO HA REALIZADO EJERCICIO EN EL ULTIMO MES",name:"pregunta45opcionD"}]},{bodyPadding:10,layout:{type:"table",columns:2},title:"Firma",items:[{items:[{xtype:"uploader",uploadConfig:{uploadUrl:Coomuce.Url.Funciones+"ImportarFirma",maxFileSize:10*1024*1024},inputAttrTpl:"data-qtip='Seleccione el archivo.'",listeners:{uploaddatacomplete:"onUploadFirmaDataComplete",uploaderror:"onUploadFirmaError"}}]},{items:[{xtype:"textfield",name:"firmaHfdfr",hidden:true,reference:"firmaHfdfr"},{xtype:"button",iconCls:"x-fa fa-minus-circle",textAlign:"left",handler:"onBotonEliminarFirmaClick",reference:"botonEliminarFirma",width:250}]}]}]}]});Ext.define("CoomuceMod.view.CaracterizacionPoblacional.IfppirController",{extend:"Ext.app.ViewController",alias:"controller.caracterizacionpoblacional-ifppir",statusComponent:false,components:["nombreCompletoAfiliado","codigoTipoIdentificacion","identificacionFuanAfiliado","numCarnetFuanAfiliado","fechaNacimientoFuanAfiliado","compDepartamento","compCiudad","direccionFuanAfiliado","telefonoFuanAfiliado","celularFuanAfiliado","ipsPrimariaIfppir","edadFuanAfiliado","puntajeSisbenFuanAfiliado","razaIfppir","escolaridadIfppir","nombreTipoZona","nombreTipoSexo","familiarCercanoIfppir","telefonoFamiliarIfppir","gestanteIfppir","fechaAplicacionIfppir","pesoIfppir","tallaIfppir","masaCorporalIfppir","perimetroAbdominalIfppir","sistolicaIfppir","diastolicaIfppir","nacidoVivoIfppir","furIfppir","fppIfppir","colesterolTotalIfppir","colesterolLdlIfppir","colesterolHdlIfppir","glicemiaIfppir","gIfppir","pIfppir","cIfppir","aIfppir","observacionIfppir","botonGuardar","botonCancelar"],getTitleView:function(){return this.getView().getTitle()},fnLimpiarDatos:function(){var c=Ext.getCmp("Form-Ifppir-Principal");c.getForm().reset();var d=Ext.getCmp("Grid-Ifppir-Principal").getStore();d.removeAll()},fnEnableDisableComponent:function(){var j=this;for(var f=0;f<j.components.length;f++){var i=j.lookupReference(j.components[f]);if(j.statusComponent){i.disable()}else{i.enable()}}var g=j.lookupReference("botonNuevaFicha");var h=j.lookupReference("botonBuscarAfiliado");if(j.statusComponent){g.enable();h.disable();j.statusComponent=false}else{g.disable();h.enable();j.fnLimpiarDatos();j.statusComponent=true}},onBotonNuevaFichaClick:function(d){var c=this;c.fnEnableDisableComponent()},onBotonCancelarClick:function(){var b=this;Ext.Msg.confirm(this.getTitleView(),"Desea cancelar las modificaciones?",function(a){if(a==="yes"){b.fnLimpiarDatos();b.fnEnableDisableComponent();var d=Ext.getCmp("CoomuceIfppir");d.destroy()}})},onBotonGuardarClick:function(){var c=this;var d=c.getTitleView();Ext.Msg.confirm(d,"Desea guardar las modificaciones?",function(j){if(j==="yes"){var a=Ext.getCmp("Form-Ifppir-Principal");var b=a.getForm().getValues();if(b.idFuanAfiliado==0||b.idFuanAfiliado==undefined||b.nombreCompletoAfiliado==""){Ext.Msg.alert("Advertencia","Los datos del Usuario estan incompletos. Por favor verifique",Ext.emptyFn);return false}if(b.pesoIfppir==""){Ext.Msg.alert("Advertencia","El campo peso es requerido",Ext.emptyFn);return false}if(b.tallaIfppir==""){Ext.Msg.alert("Advertencia","El campo altura es requerido",Ext.emptyFn);return false}if(b.perimetroAbdominalIfppir==""){Ext.Msg.alert("Advertencia","El campo perimetro abdominal es requerido",Ext.emptyFn);return false}if(b.sistolicaIfppir<100||b.sistolicaIfppir>230){Ext.Msg.alert("Advertencia","El campo sistólica debe ser mayor a 100 y menor a 230",Ext.emptyFn);return false}if(b.diastolicaIfppir<50||b.diastolicaIfppir>140){Ext.Msg.alert("Advertencia","El campo diastólica debe ser mayor a 50 y menor a 140",Ext.emptyFn);return false}if(b.gestanteIfppir){if(b.gestanteIfppir=="on"){if(b.furIfppir==""){Ext.Msg.alert("Advertencia","El campo fecha ultima menstruación es requerido",Ext.emptyFn);return false}if(b.gIfppir==""){Ext.Msg.alert("Advertencia","El campo gestaciones es requerido",Ext.emptyFn);return false}if(b.pIfppir==""){Ext.Msg.alert("Advertencia","El campo partos es requerido",Ext.emptyFn);return false}if(b.cIfppir==""){Ext.Msg.alert("Advertencia","El campo cesareas es requerido",Ext.emptyFn);return false}if(b.aIfppir==""){Ext.Msg.alert("Advertencia","El campo abortos es requerido",Ext.emptyFn);return false}if(b.nacidoVivoIfppir==""){Ext.Msg.alert("Advertencia","El campo nacido vivo es requerido",Ext.emptyFn);return false}}}b.numCarneIfppir=b.numCarnetFuanAfiliado;b.idInfoIfppir=0;b.gestanteIfppir=(b.gestanteIfppir==="on"?true:false);b.pesoIfppir=parseFloat(b.pesoIfppir).toFixed(2);b.tallaIfppir=parseInt(b.tallaIfppir);b.masaCorporalIfppir=parseFloat(b.masaCorporalIfppir).toFixed(2);b.perimetroAbdominalIfppir=parseInt(b.perimetroAbdominalIfppir);b.sistolicaIfppir=parseInt(b.sistolicaIfppir);b.diastolicaIfppir=parseInt(b.diastolicaIfppir);b.colesterolLdlIfppir=(b.colesterolLdlIfppir)?String(b.colesterolLdlIfppir):"0";b.colesterolHdlIfppir=(b.colesterolHdlIfppir)?String(b.colesterolHdlIfppir):"0";b.colesterolTotalIfppir=(b.colesterolTotalIfppir)?String(b.colesterolTotalIfppir):"0";b.idUsuario=Coomuce.Util.DatosUsuario.idUsuario;var k=Ext.getCmp("Grid-Ifppir-Principal");var l=k.getStore();var n=[];Ext.each(l.data.items,function(g,f,e){n.push(g.data)});var m={url:Coomuce.Url.Funciones+"IfppirGuardar",data:{infoIfppir:b,listaIfppirModel:n},targetMask:a,msgMask:"Guardando datos...",fnSuccess:function(f){c.fnLimpiarDatos();c.fnEnableDisableComponent();var e=Ext.getCmp("CoomuceIfppir");e.destroy()}};Coomuce.Util.EnviarPost(m)}})},onSelectCombo:function(p,n,m){var k=this;if(p.dependent){var i=k.lookupReference("idCiudad");i.getStore().load({params:{idDepartamento:n.get("idDepartamento")}})}else{for(var o=0;o<p.componentReference.length;o++){var q=k.lookupReference(p.componentReference[o]);q.setValue(n.get(p.componentReference[o]))}if(n.get("nombreTipoSexo")!="Femenino"){for(var o=0;o<p.disabledBySexo.length;o++){var r=k.lookupReference(p.disabledBySexo[o]);r.setDisabled(true)}}var l=Ext.getCmp("Grid-Ifppir-Principal").getStore();l.load({params:{edad:n.get("edadFuanAfiliado")}})}},onChangeNumber:function(k,l){var m=this;var o=m.lookupReference("pesoIfppir");var i=m.lookupReference("tallaIfppir");var j=m.lookupReference("masaCorporalIfppir");var p=0;o=(o.getValue())?o.getValue():0;i=(i.getValue())?(i.getValue())/100:0;p=Math.pow(i,2);if(p>0){var n=parseFloat(o)/parseFloat(p);j.setValue(n)}},onSelectDate:function(i,j,g){var l=this;var h=l.lookupReference("fppIfppir");var k=new Date(j.valueOf());k.setDate((k.getDate()+280)-7);h.setValue(k)},onChangeCheck:function(k,s,t,n){var l=this;var o=l.lookupReference("furIfppir");var p=l.lookupReference("nacidoVivoIfppir");var r=l.lookupReference("idTipoSexo");var q=l.lookupReference("edadFuanAfiliado");o.setReadOnly(!s);p.setReadOnly(!s);var m=Ext.getCmp("Grid-Ifppir-Principal").getStore();if(s){m.proxy.setUrl(Coomuce.Url.Funciones+"GetPreguntasCicloVitalGestanteAll");m.load()}else{m.proxy.setUrl(Coomuce.Url.Funciones+"GetPreguntasFactorPorCicloAll");m.load({params:{edad:q.getValue(),sexo:r.getValue()}})}},onGridColumnCheckChange:function(g,i,j,k){console.log(g);console.log(i);var l=Ext.getCmp("Grid-Ifppir-Principal");l.selModel.select(i);var h=l.selModel.getSelection()[0];if(g.dataIndex==="respuestaSiPregunta"){h.set("respuestaNoPregunta",!j)}else{h.set("respuestaSiPregunta",!j)}},onUploadDataComplete:function(g,h){var e=this.getTitleView();var f=g.getWidgetRecord();f.set("archivoAudioIfppir",h.data);Coomuce.Util.ShowMessage({type:"INFO",title:e,msg:"Archivo de audio importado correctamente."})},onUploadError:function(h,j){var f=this;var g=f.getTitleView();var i="ErrorType: "+j.errorType;switch(j.errorType){case"FileSize":i="Este archivo es demasiado grande: "+Ext.util.Format.fileSize(j.fileSize)+". El tamaño máximo de subida es "+Ext.util.Format.fileSize(j.maxFileSize)+".";break;case"QueueLength":i="La longitud de la cola es demasiado larga: "+j.queueLength+". La longitud máxima de la cola es "+j.maxQueueLength+".";break}Coomuce.Util.ShowMessage({type:"ERROR",title:g,msg:i})},onBotonEliminarArchivoClick:function(c){var d=c.getWidgetRecord();d.set("archivoAudioIfppir","")},onBotonImportarArchivoClick:function(){var k=this;var h=Ext.create("Ext.data.Store",{autoLoad:true,fields:["idInfoIfppir","tipoDiligenciamientoIfppir","codigoTipoIdentificacion","identificacionFuanAfiliado","compAfiliado","archivoAudioIfppir"],proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Funciones+"GetFunIfppirAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}});var i=Ext.widget("pagingtoolbar",{store:h,displayInfo:true,displayMsg:"Registros {0} - {1} de {2}"});var g=Ext.create("Ext.grid.Panel",{bbar:i,columns:[{dataIndex:"idInfoIfppir",header:"No. Plantilla"},{dataIndex:"tipoDiligenciamientoIfppir",header:"Tipo Diligenciamiento"},{dataIndex:"codigoTipoIdentificacion",header:"Tipo Identificación"},{dataIndex:"identificacionFuanAfiliado",header:"Identificación"},{dataIndex:"compAfiliado",header:"Afiliado"},{xtype:"widgetcolumn",header:"",width:60,widget:{xtype:"uploader",uploadConfig:{uploadUrl:Coomuce.Url.Funciones+"ImportarAudioIfppir",maxFileSize:10*1024*1024},inputAttrTpl:"data-qtip='Seleccione el archivo.'",listeners:{uploaddatacomplete:k.onUploadDataComplete,uploaderror:k.onUploadError}}},{xtype:"widgetcolumn",dataIndex:"archivoAudioIfppir",header:"Archivo de audio",width:200,widget:{xtype:"button",iconCls:"x-fa fa-minus-circle",textAlign:"left",handler:k.onBotonEliminarArchivoClick}}],columnLines:true,loadMask:true,store:h});var j=function(){var a=[];Ext.each(h.data.items,function(d,c,b){if(d.dirty){if(!d.phantom){a.push({idInfoIfppir:d.data.idInfoIfppir,archivoAudioIfppir:d.data.archivoAudioIfppir})}}});Ext.Msg.confirm(titleView,"Desea guardar las modificaciones?",function(b){if(b==="yes"){var c={url:Coomuce.Url.Funciones+"IfppirGuardarCambios",data:{datos:a},targetMask:g,msgMask:"Guardando datos...",fnSuccess:function(d){h.load()}};Coomuce.Util.EnviarPost(c)}})};var l=Ext.create("Ext.window.Window",{height:500,items:g,layout:"fit",modal:true,tbar:{items:[{text:"Guardar cambios",handler:j}]},title:"Importar archivo de audio",width:500});l.show()},onUploadFirmaDataComplete:function(h,i){var j=this.getTitleView();var g=this.lookupReference("botonEliminarFirma");var f=this.lookupReference("firmaIfppir");g.setText(i.data);f.setValue(i.data);Coomuce.Util.ShowMessage({type:"INFO",title:j,msg:"Archivo de firma importado correctamente."})},onUploadFirmaError:function(h,j){var f=this;var g=f.getTitleView();var i="ErrorType: "+j.errorType;switch(j.errorType){case"FileSize":i="Este archivo es demasiado grande: "+Ext.util.Format.fileSize(j.fileSize)+". El tamaño máximo de subida es "+Ext.util.Format.fileSize(j.maxFileSize)+".";break;case"QueueLength":i="La longitud de la cola es demasiado larga: "+j.queueLength+". La longitud máxima de la cola es "+j.maxQueueLength+".";break}Coomuce.Util.ShowMessage({type:"ERROR",title:g,msg:i})},onBotonEliminarFirmaClick:function(c){c.setText("");var d=this.lookupReference("firmaIfppir");d.setValue("")}});Ext.define("CoomuceMod.view.CaracterizacionPoblacional.IfppirModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.caracterizacionpoblacional-ifppir",stores:{getTipoIdentificacion:{autoLoad:true,model:"CoomuceMod.model.Parametros.Generales.TipoIdentificacion",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetTipoIdentificacionAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getDepartamento:{autoLoad:true,model:"CoomuceMod.model.Administracion.Departamento",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Administracion+"GetDepartamentoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getCiudad:{autoLoad:false,model:"CoomuceMod.model.Administracion.Ciudad",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Administracion+"GetCiudadAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getTipoZona:{autoLoad:true,model:"CoomuceMod.model.Parametros.Generales.TipoZona",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetTipoZonaAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getTipoSexo:{autoLoad:true,model:"CoomuceMod.model.Parametros.Generales.TipoSexo",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetTipoSexoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getPreguntasFactor:{autoLoad:false,fields:[{name:"idPregunta",type:"int"},{name:"factor",type:"string"},{name:"subfactor",type:"string"},{name:"codigoPregunta",type:"string"},{name:"descripcionPregunta",type:"string"},{name:"respuestaSiPregunta",type:"bool"},{name:"respuestaNoPregunta",type:"bool"}],grouper:{groupFn:function(b){return"<b>"+b.get("factor")+"<br />"+b.get("subfactor")+"</b>"}},listeners:{load:function(j,f,h,g,i){Ext.each(f,function(a,c,b){a.data.respuestaNoPregunta=true;a.commit()})}},proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Funciones+"GetPreguntasFactorPorCicloAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.CaracterizacionPoblacional.Ifppir",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.CaracterizacionPoblacional.IfppirController","CoomuceMod.view.CaracterizacionPoblacional.IfppirModel"],controller:"caracterizacionpoblacional-ifppir",viewModel:{type:"caracterizacionpoblacional-ifppir"},id:"Form-Ifppir-Panel",layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{disabled:true,minWidth:80,text:"Guardar",handler:"onBotonGuardarClick",reference:"botonGuardar"},{disabled:false,minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick",reference:"botonCancelar"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Nueva Ficha",iconCls:"x-fa fa-file-o",handler:"onBotonNuevaFichaClick",reference:"botonNuevaFicha"},{text:"Importar archivo de audio",iconCls:"x-fa fa-file-audio-o",handler:"onBotonImportarArchivoClick",tooltip:"Esta opción permite importar archivos de audio a las plantillas diligenciadas telefonicamente."}]}],items:[{xtype:"form",bodyPadding:10,defaults:{anchor:"100%"},id:"Form-Ifppir-Principal",scrollable:true,items:[{xtype:"combo",fieldLabel:"Tipo Diligenciamiento",name:"tipoDiligenciamientoIfppir",store:["Personal","Telefonico"],value:"Personal"},{xtype:"fieldset",style:{"background-color":"#ffffff"},items:[{xtype:"textfield",disabled:true,fieldLabel:"Nombre del Afiliado",labelWidth:150,name:"nombreCompletoAfiliado",readOnly:true,reference:"nombreCompletoAfiliado",width:600},{layout:{type:"table",columns:4},items:[{items:[{xtype:"label",html:"Tipo documento <br />de identidad: "}]},{items:[{xtype:"textfield",disabled:true,hideLabel:true,name:"codigoTipoIdentificacion",readOnly:true,reference:"codigoTipoIdentificacion",width:200}]},{items:[{xtype:"label",html:"Documento No.: "}]},{layout:{type:"table",columns:2},items:[{items:[{xtype:"numberfield",hidden:true,name:"idFuanAfiliado"},{xtype:"textfield",disabled:true,hideLabel:true,name:"identificacionFuanAfiliado",readOnly:true,reference:"identificacionFuanAfiliado"}]},{items:[{xtype:"button",componentReference:["idFuanAfiliado","codigoTipoIdentificacion","identificacionFuanAfiliado","nombreCompletoAfiliado","fechaNacimientoFuanAfiliado","compDepartamento","compCiudad","direccionFuanAfiliado","telefonoFuanAfiliado","celularFuanAfiliado","puntajeSisbenFuanAfiliado","edadFuanAfiliado","nombreTipoZona","idTipoSexo","nombreTipoSexo","numCarnetFuanAfiliado"],disabled:true,disabledBySexo:["gestanteIfppir","furIfppir","fppIfppir","gIfppir","pIfppir","cIfppir","aIfppir","nacidoVivoIfppir"],fechaUltFormato:"fechaUltFicha",validarFormato:true,handler:Coomuce.Util.buscarAfiliadoFicha,iconCls:"x-fa fa-binoculars",preguntasIdentificacion:true,reference:"botonBuscarAfiliado",tooltip:"Lista de Afiliados",width:30}]}]},{items:[{xtype:"label",html:"Carné: "}]},{items:[{xtype:"textfield",disabled:true,hideLabel:true,readOnly:true,name:"numCarnetFuanAfiliado",reference:"numCarnetFuanAfiliado"}]},{items:[{xtype:"label",html:"Fecha de nacimiento: "}]},{items:[{xtype:"datefield",disabled:true,hideLabel:true,format:"d/m/Y",name:"fechaNacimientoFuanAfiliado",readOnly:true,reference:"fechaNacimientoFuanAfiliado"}]},{items:[{xtype:"label",html:"Departamento: "}]},{items:[{xtype:"textfield",disabled:true,hideLabel:true,name:"compDepartamento",readOnly:true,reference:"compDepartamento",width:300}]},{items:[{xtype:"label",html:"Municipio: "}]},{items:[{xtype:"textfield",disabled:true,hideLabel:true,name:"compCiudad",readOnly:true,reference:"compCiudad",width:300}]}]},{xtype:"textfield",disabled:true,fieldLabel:"Dirección",name:"direccionFuanAfiliado",readOnly:true,reference:"direccionFuanAfiliado",width:600},{layout:{type:"table",columns:4},items:[{items:[{xtype:"label",html:"Teléfono: "}]},{items:[{xtype:"textfield",disabled:true,hideLabel:true,name:"telefonoFuanAfiliado",readOnly:true,reference:"telefonoFuanAfiliado",width:200}]},{items:[{xtype:"label",html:"Celular: "}]},{items:[{xtype:"textfield",disabled:true,hideLabel:true,name:"celularFuanAfiliado",readOnly:true,reference:"celularFuanAfiliado",width:200}]}]},{xtype:"textfield",disabled:true,readOnly:true,fieldLabel:"Ips Primaria",name:"ipsPrimariaIfppir",reference:"ipsPrimariaIfppir",width:400},{layout:{type:"table",columns:8},items:[{items:[{xtype:"label",html:"Edad: "}]},{colspan:3,items:[{xtype:"numberfield",disabled:true,hideLabel:true,hideTrigger:true,name:"edadFuanAfiliado",readOnly:true,reference:"edadFuanAfiliado",width:200}]},{items:[{xtype:"label",html:"Sisben: "}]},{colspan:3,items:[{xtype:"textfield",disabled:true,hideLabel:true,name:"puntajeSisbenFuanAfiliado",readOnly:true,reference:"puntajeSisbenFuanAfiliado",width:200}]},{items:[{xtype:"label",html:"Raza: "}]},{items:[{xtype:"textfield",disabled:true,readOnly:true,hideLabel:true,name:"razaIfppir",reference:"razaIfppir",width:200}]},{items:[{xtype:"label",html:"Escolaridad: "}]},{items:[{xtype:"textfield",disabled:true,hideLabel:true,readOnly:true,name:"escolaridadIfppir",reference:"escolaridadIfppir",width:200}]},{items:[{xtype:"label",html:"Zona: "}]},{items:[{xtype:"textfield",disabled:true,hideLabel:true,name:"nombreTipoZona",readOnly:true,reference:"nombreTipoZona"}]},{items:[{xtype:"label",html:"Sexo: "}]},{items:[{xtype:"numberfield",hidden:true,name:"idTipoSexo",reference:"idTipoSexo"},{xtype:"textfield",disabled:true,hideLabel:true,name:"nombreTipoSexo",readOnly:true,reference:"nombreTipoSexo",width:200}]}]},{xtype:"fieldset",layout:{type:"table",columns:4},style:{"background-color":"#ffffff"},title:"Familiar Más Cercano",items:[{items:[{xtype:"label",html:"Nombre: "}]},{items:[{xtype:"textfield",disabled:true,hideLabel:true,name:"familiarCercanoIfppir",reference:"familiarCercanoIfppir",width:400}]},{items:[{xtype:"label",html:"Teléfono: "}]},{items:[{xtype:"textfield",disabled:true,hideLabel:true,name:"telefonoFamiliarIfppir",reference:"telefonoFamiliarIfppir"}]}]},{xtype:"checkbox",disabled:true,fieldLabel:"Gestante",listeners:{change:"onChangeCheck"},name:"gestanteIfppir",reference:"gestanteIfppir",value:false},{defaults:{border:true,height:40},layout:{type:"table",columns:4},items:[{colspan:2,items:[{xtype:"label",html:"Fecha de aplicación de toma de datos en salud"}]},{items:[{xtype:"label",html:"Fecha Última Menstruación: "}]},{items:[{xtype:"datefield",disabled:true,format:"d/m/Y",hideLabel:true,listeners:{select:"onSelectDate"},name:"furIfppir",readOnly:true,reference:"furIfppir"}]},{colspan:2,items:[{xtype:"datefield",disabled:true,format:"d/m/Y",hideLabel:true,name:"fechaAplicacionIfppir",reference:"fechaAplicacionIfppir"}]},{items:[{xtype:"label",html:"Fecha Probable de Parto: "}]},{items:[{xtype:"datefield",disabled:true,format:"d/m/Y",hideLabel:true,name:"fppIfppir",readOnly:true,reference:"fppIfppir"}]},{items:[{xtype:"label",html:"Peso (kg)"}]},{items:[{xtype:"numberfield",allowDecimals:true,decimalPrecision:2,disabled:true,hideLabel:true,hideTrigger:true,listeners:{change:"onChangeNumber"},name:"pesoIfppir",reference:"pesoIfppir"}]},{items:[{xtype:"label",html:"Gestaciones:"}]},{items:[{xtype:"textfield",disabled:true,hideLabel:true,name:"gIfppir",reference:"gIfppir"}]},{items:[{xtype:"label",html:"Altura (cm)"}]},{items:[{xtype:"numberfield",allowDecimals:false,disabled:true,hideLabel:true,hideTrigger:true,listeners:{change:"onChangeNumber"},name:"tallaIfppir",reference:"tallaIfppir"}]},{items:[{xtype:"label",html:"Partos:"}]},{items:[{xtype:"textfield",disabled:true,hideLabel:true,name:"pIfppir",reference:"pIfppir"}]},{items:[{xtype:"label",html:"Indice de masa corporal"}]},{items:[{xtype:"numberfield",allowDecimals:true,decimalPrecision:2,disabled:true,hideLabel:true,name:"masaCorporalIfppir",readOnly:true,reference:"masaCorporalIfppir"}]},{items:[{xtype:"label",html:"Cesáreas:"}]},{items:[{xtype:"textfield",disabled:true,hideLabel:true,name:"cIfppir",reference:"cIfppir"}]},{items:[{xtype:"label",html:"Perímetro Abdominal (cm)"}]},{items:[{xtype:"numberfield",allowDecimals:false,disabled:true,hideLabel:true,name:"perimetroAbdominalIfppir",reference:"perimetroAbdominalIfppir"}]},{items:[{xtype:"label",html:"Abortos:"}]},{items:[{xtype:"textfield",disabled:true,hideLabel:true,name:"aIfppir",reference:"aIfppir"}]},{height:80,items:[{xtype:"label",html:"Tensión Arterial"}]},{height:80,items:[{xtype:"numberfield",allowDecimals:false,disabled:true,fieldLabel:"Sistólica (mm Hg)",labelWidth:120,minValue:100,maxValue:230,name:"sistolicaIfppir",reference:"sistolicaIfppir",width:220},{xtype:"numberfield",allowDecimals:false,disabled:true,fieldLabel:"Diastólica (mm Hg)",labelWidth:120,minValue:50,maxValue:140,name:"diastolicaIfppir",reference:"diastolicaIfppir",width:220}]},{items:[{xtype:"label",html:"Nacido Vivo"}]},{items:[{xtype:"numberfield",allowDecimals:false,disabled:false,hideLabel:true,name:"nacidoVivoIfppir",reference:"nacidoVivoIfppir"}]}]},{layout:{type:"table",columns:8},items:[{items:[{xtype:"label",html:"Colesterol Total: "}]},{items:[{xtype:"numberfield",disabled:true,hideLabel:true,name:"colesterolTotalIfppir",reference:"colesterolTotalIfppir"}]},{items:[{xtype:"label",html:"Colesterol LDL: "}]},{items:[{xtype:"numberfield",disabled:true,hideLabel:true,name:"colesterolLdlIfppir",reference:"colesterolLdlIfppir"}]},{items:[{xtype:"label",html:"Colesterol HDL: "}]},{items:[{xtype:"numberfield",disabled:true,hideLabel:true,name:"colesterolHdlIfppir",reference:"colesterolHdlIfppir"}]},{items:[{xtype:"label",html:"Glicemia: "}]},{items:[{xtype:"textfield",disabled:true,hideLabel:true,name:"glicemiaIfppir",reference:"glicemiaIfppir"}]}]}],title:"Datos Básicos Afiliado"},{xtype:"grid",bind:{store:"{getPreguntasFactor}"},border:true,columns:[{dataIndex:"idPregunta",header:"Id Pregunta",hidden:true},{text:"Factor de Riesgo",columns:[{dataIndex:"codigoPregunta",header:"Código",width:100},{dataIndex:"descripcionPregunta",header:"Pregunta",width:600}]},{text:"Respuesta",columns:[{xtype:"checkcolumn",dataIndex:"respuestaSiPregunta",header:"Si",listeners:{checkchange:"onGridColumnCheckChange"},width:100},{xtype:"checkcolumn",dataIndex:"respuestaNoPregunta",header:"No",listeners:{checkchange:"onGridColumnCheckChange"},width:100}]}],columnLines:true,features:[{ftype:"grouping"}],height:300,id:"Grid-Ifppir-Principal",plugins:{ptype:"cellediting",clicksToEdit:1},sortableColumns:false},{xtype:"textarea",disabled:true,fieldLabel:"Observaciones",name:"observacionIfppir",reference:"observacionIfppir",width:600},{bodyPadding:10,layout:{type:"table",columns:2},title:"Firma",items:[{items:[{xtype:"uploader",uploadConfig:{uploadUrl:Coomuce.Url.Funciones+"ImportarFirma",maxFileSize:10*1024*1024},inputAttrTpl:"data-qtip='Seleccione el archivo.'",listeners:{uploaddatacomplete:"onUploadFirmaDataComplete",uploaderror:"onUploadFirmaError"}}]},{items:[{xtype:"textfield",name:"firmaIfppir",hidden:true,reference:"firmaIfppir"},{xtype:"button",iconCls:"x-fa fa-minus-circle",textAlign:"left",handler:"onBotonEliminarFirmaClick",reference:"botonEliminarFirma",width:250}]}]}]}]});Ext.define("CoomuceMod.view.DemandaInducida.PurisuController",{extend:"Ext.app.ViewController",alias:"controller.demandainducida-purisu",statusComponent:false,components:["idDepartamento","idCiudad","botonGuardar","botonCancelar","botonGridAdicionar","botonGridRemover"],getTitleView:function(){return this.getView().getTitle()},fnLimpiarDatos:function(){var c=Ext.getCmp("Form-Purisu-Principal");c.getForm().reset();var d=Ext.getCmp("Grid-Purisu-Principal").getStore();d.removeAll()},fnEnableDisableComponent:function(){var j=this;for(var g=0;g<j.components.length;g++){var i=j.lookupReference(j.components[g]);if(j.statusComponent){i.disable()}else{i.enable()}}var f=j.lookupReference("botonNuevaPlanilla");var h=j.lookupReference("botonBuscarAfiliado");if(j.statusComponent){f.enable();h.disable();j.statusComponent=false}else{f.disable();h.enable();j.fnLimpiarDatos();j.statusComponent=true}},onBotonNuevaPlanillaClick:function(d){var c=this;c.fnEnableDisableComponent()},onBotonCancelarClick:function(){var b=this;Ext.Msg.confirm(this.getTitleView(),"Desea cancelar las modificaciones?",function(a){if(a==="yes"){b.fnLimpiarDatos();b.fnEnableDisableComponent();var d=Ext.getCmp("CoomucePurisu");d.destroy()}})},onBotonGuardarClick:function(){var g=this;var h=g.getTitleView();var e=Ext.getCmp("Grid-Purisu-Principal");var f=e.getStore();if(f.data.items.length==0){Coomuce.Util.ShowMessage({type:"INFO",title:"Atención",msg:"Debe agregar datos a la lista para continuar"})}else{Ext.Msg.confirm(h,"Desea guardar las modificaciones?",function(m){if(m==="yes"){var b=Ext.getCmp("Form-Purisu-Principal");var d=b.getForm().getValues();var c={idInfoPurisu:0,fechaAtencionPurisu:d.fechaAtencionPurisu,idDepartamento:d.idDepartamento,idCiudad:d.idCiudad,idUsuario:Coomuce.Util.DatosUsuario.idUsuario,tipoDiligenciamientoInfoPurisu:d.tipoDiligenciamientoInfoPurisu};var n=Ext.getCmp("Grid-Purisu-Principal");var o=n.getStore();var a=[];Ext.each(o.data.items,function(i,l,j){var k=i.data;k.idTipoVisitaDomiciliaria=Ext.isEmpty(k.idTipoVisitaDomiciliaria)?null:k.idTipoVisitaDomiciliaria;k.idProgramaResolucion412=Ext.isEmpty(k.idProgramaResolucion412)?null:k.idProgramaResolucion412;k.idGrupoInteres=Ext.isEmpty(k.idGrupoInteres)?null:k.idGrupoInteres;k.idSeguimientoProgramasIntervencionRiesgo=Ext.isEmpty(k.idSeguimientoProgramasIntervencionRiesgo)?null:k.idSeguimientoProgramasIntervencionRiesgo;k.idGruposFocales=Ext.isEmpty(k.idGruposFocales)?null:k.idGruposFocales;if(k.idMotivoConsulta.length>0){k.idMotivoConsulta=k.idMotivoConsulta.split(",")}if(k.idMotivoContacto.length>0){k.idMotivoContacto=k.idMotivoContacto.split(",")}if(k.idPiezasInformativas.length>0){k.idPiezasInformativas=k.idPiezasInformativas.split(",")}k.idEje=Ext.isEmpty(k.idEje)?null:k.idEje;k.idEje1=Ext.isEmpty(k.idEje1)?null:k.idEje1;k.idModulo=Ext.isEmpty(k.idModulo)?null:k.idModulo;k.idModulo1=Ext.isEmpty(k.idModulo1)?null:k.idModulo1;k.idUnidad=Ext.isEmpty(k.idUnidad)?null:k.idUnidad;k.idUnidad1=Ext.isEmpty(k.idUnidad1)?null:k.idUnidad1;a.push(k)});var p={url:Coomuce.Url.Funciones+"PurisuGuardar",data:{infoPurisu:c,listaPurisuModel:a},targetMask:b,msgMask:"Guardando datos...",fnSuccess:function(i){g.fnLimpiarDatos();g.fnEnableDisableComponent();Ext.getCmp("Grid-MotivosConsulta").selModel.deselectAll();Ext.getCmp("Grid-MotivosContacto").selModel.deselectAll();Ext.getCmp("Grid-PiezasInformativas").selModel.deselectAll();var j=Ext.getCmp("CoomucePurisu");j.destroy()}};console.log(p);Coomuce.Util.EnviarPost(p)}})}},onSelectCombo:function(k,i,m){var l=this;if(k.dependent){var h=l.lookupReference(k.campoDependent);var n="";if(k.name==="idEje1"||k.name==="idUnidad1"||k.name==="idModulo1"){n=k.name.substring(0,k.name.length-1)}else{n=k.name}var j={};j[n]=i.get(n);h.getStore().load({params:j})}},onSelectionChange:function(o,m,k){var i=this;if(m.length>o.maxSelection){for(var l=o.maxSelection;l<m.length;l++){var n=m[l];o.deselect(n,true)}return false}if(m.length>0){var p=m.map(function(a){return a.data[o.idCampo]});var q=m.map(function(a){return a.data[o.compCampo]});var r=i.lookupReference(o.idCampo);r.setValue(p);r=i.lookupReference(o.compCampo);r.setValue(q)}},onBotonGridAdicionarClick:function(u){var p=this;if(Ext.getCmp("identificacionFuanAfiliado").getValue()==""){Coomuce.Util.ShowMessage({type:"INFO",title:"Atención",msg:"Debe Cargar un Afiliado para continuar"})}else{var t=this.lookupReference("botonEliminar");var y=p.lookupReference("firmaPurisu");var v=Ext.getCmp("Form-Datos");var r=v.getForm().getValues();var z=Ext.getCmp("Grid-Purisu-Principal");var q=z.getStore();var w=q.max("idPurisu");var o=q.getCount();r.idInfoPurisu=0;r.idPurisu=(w===undefined?1:w+1);for(var s=0;s<u.combos.length;s++){var x=p.lookupReference(u.combos[s]);r[u.campos[s]]=x.getRawValue()}r.idFuanAfiliado=parseInt(r.idFuanAfiliado);r.numCarnePurisu=r.numCarnetFuanAfiliado;r.usisPurisu=(r.usisPurisu==undefined?false:(r.usisPurisu==="on"?true:false));r.ipsPrimariaPurisu=(r.ipsPrimariaPurisu==undefined?false:(r.ipsPrimariaPurisu==="on"?true:false));r.telefonicaPurisu=(r.telefonicaPurisu==undefined?false:(r.telefonicaPurisu==="on"?true:false));r.cauPurisu=(r.cauPurisu==undefined?false:(r.cauPurisu==="on"?true:false));r.actividadExtramuralPurisu=(r.actividadExtramuralPurisu==undefined?false:(r.actividadExtramuralPurisu==="on"?true:false));r.firmaPurisu=y.getValue();console.log(r);var i=[];i.push(r);q.insert(o,i);Ext.Msg.confirm("Atención","Desea agregar una nueva Canalización a este Afiliado?",function(a){if(a==="yes"){}else{v.getForm().reset();y.setValue("");t.setText("");Ext.getCmp("Grid-MotivosConsulta").selModel.deselectAll();Ext.getCmp("Grid-MotivosContacto").selModel.deselectAll();Ext.getCmp("Grid-PiezasInformativas").selModel.deselectAll()}})}},onBotonGridRemoverClick:function(){var b=Ext.getCmp("Grid-Purisu-Principal");b.getStore().remove(b.selModel.getSelection())},onUploadDataComplete:function(h,i){var j=this.getTitleView();var g=this.lookupReference("botonEliminar");var f=this.lookupReference("firmaPurisu");g.setText(i.data);f.setValue(i.data);Coomuce.Util.ShowMessage({type:"INFO",title:j,msg:"Archivo de firma importado correctamente."})},onUploadError:function(h,j){var f=this;var g=f.getTitleView();var i="ErrorType: "+j.errorType;switch(j.errorType){case"FileSize":i="Este archivo es demasiado grande: "+Ext.util.Format.fileSize(j.fileSize)+". El tamaño máximo de subida es "+Ext.util.Format.fileSize(j.maxFileSize)+".";break;case"QueueLength":i="La longitud de la cola es demasiado larga: "+j.queueLength+". La longitud máxima de la cola es "+j.maxQueueLength+".";break}Coomuce.Util.ShowMessage({type:"ERROR",title:g,msg:i})},onBotonEliminarArchivoClick:function(c){c.setText("");var d=this.lookupReference("firmaPurisu");d.setValue("")},onUploadAudioDataComplete:function(g,h){var e=this.getTitleView();var f=g.getWidgetRecord();f.set("archivoAudioInfoPurisu",h.data);Coomuce.Util.ShowMessage({type:"INFO",title:e,msg:"Archivo de audio importado correctamente."})},onBotonEliminarArchivoAudioClick:function(c){var d=c.getWidgetRecord();d.set("archivoAudioInfoPurisu","")},onBotonImportarArchivoClick:function(){var k=this;var h=Ext.create("Ext.data.Store",{autoLoad:true,fields:["idInfoPurisu","tipoDiligenciamientoInfoPurisu",{name:"fechaAtencionPurisu",convert:Coomuce.Util.parseDate},"nombreCompletoUsuario","idCiudad","idUsuario","archivoAudioInfoPurisu"],proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Funciones+"GetPurisuAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}});var i=Ext.widget("pagingtoolbar",{store:h,displayInfo:true,displayMsg:"Registros {0} - {1} de {2}"});var g=Ext.create("Ext.grid.Panel",{bbar:i,columns:[{dataIndex:"idInfoPurisu",header:"No. Plantilla"},{dataIndex:"tipoDiligenciamientoInfoPurisu",header:"Tipo Diligenciamiento"},{xtype:"datecolumn",dataIndex:"fechaAtencionPurisu",format:"d/m/Y",header:"Fecha"},{dataIndex:"nombreCompletoUsuario",header:"Usuario"},{xtype:"widgetcolumn",header:"",width:60,widget:{xtype:"uploader",uploadConfig:{uploadUrl:Coomuce.Url.Funciones+"ImportarAudioPurisu",maxFileSize:10*1024*1024},inputAttrTpl:"data-qtip='Seleccione el archivo.'",listeners:{uploaddatacomplete:k.onUploadAudioDataComplete,uploaderror:k.onUploadError}}},{xtype:"widgetcolumn",dataIndex:"archivoAudioInfoPurisu",header:"Archivo de audio",width:200,widget:{xtype:"button",iconCls:"x-fa fa-minus-circle",textAlign:"left",handler:k.onBotonEliminarArchivoAudioClick}}],columnLines:true,loadMask:true,store:h});var j=function(){var a=[];Ext.each(h.data.items,function(d,c,b){if(d.dirty){if(!d.phantom){a.push({idInfoPurisu:d.data.idInfoPurisu,idCiudad:d.data.idCiudad,idUsuario:d.data.idUsuario,archivoAudioInfoPurisu:d.data.archivoAudioInfoPurisu,tipoDiligenciamientoInfoPurisu:d.data.tipoDiligenciamientoInfoPurisu})}}});Ext.Msg.confirm(titleView,"Desea guardar las modificaciones?",function(b){if(b==="yes"){var c={url:Coomuce.Url.Funciones+"PurisuGuardarCambios",data:{datos:a},targetMask:g,msgMask:"Guardando datos...",fnSuccess:function(d){h.load()}};Coomuce.Util.EnviarPost(c)}})};var l=Ext.create("Ext.window.Window",{height:500,items:g,layout:"fit",modal:true,tbar:{items:[{text:"Guardar cambios",handler:j}]},title:"Importar archivo de audio",width:500});l.show()}});Ext.define("CoomuceMod.view.DemandaInducida.PurisuModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.demandainducida-purisu",stores:{getDepartamento:{autoLoad:true,model:"CoomuceMod.model.Administracion.Departamento",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Administracion+"GetDepartamentoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getCiudad:{autoLoad:false,model:"CoomuceMod.model.Administracion.Ciudad",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Administracion+"GetCiudadAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getTipoVisitaDomiciliaria:{autoLoad:true,model:"CoomuceMod.model.Parametros.DemandaInducida.TipoVisitaDomiciliaria",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetTipoVisitaDomiciliariaAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getProgramaResolucion412:{autoLoad:true,model:"CoomuceMod.model.Parametros.DemandaInducida.ProgramaResolucion412",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetProgramaResolucion412All",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getGrupoInteres:{autoLoad:true,model:"CoomuceMod.model.Parametros.DemandaInducida.GrupoInteres",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetGrupoInteresAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getSeguimientoProgramasIntervencionRiesgo:{autoLoad:true,model:"CoomuceMod.model.Parametros.DemandaInducida.SeguimientoProgramasIntervencionRiesgo",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetSeguimientoProgramasIntervencionRiesgoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getMotivoConsulta:{autoLoad:true,model:"CoomuceMod.model.Parametros.DemandaInducida.MotivoConsulta",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetMotivoConsultaAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getMotivoContacto:{autoLoad:true,model:"CoomuceMod.model.Parametros.DemandaInducida.MotivoContacto",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetMotivoContactoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getGruposFocales:{autoLoad:true,model:"CoomuceMod.model.Parametros.Generales.GruposFocales",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetGruposFocalesAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getPiezasInformativas:{autoLoad:true,model:"CoomuceMod.model.Parametros.DemandaInducida.PiezasInformativas",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetPiezasInformativasAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getEje:{autoLoad:true,model:"CoomuceMod.model.Parametros.ParticipacionSocial.Eje",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetEjeAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getUnidad:{autoLoad:false,model:"CoomuceMod.model.Parametros.ParticipacionSocial.Unidad",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetUnidadAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getModulo:{autoLoad:false,model:"CoomuceMod.model.Parametros.ParticipacionSocial.Modulo",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetModuloAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},setItemsPurisu:{fields:["idInfoPurisu","idPurisu","idFuanAfiliado","codigoTipoIdentificacion","identificacionFuanAfiliado","idTipoVisitaDomiciliaria","compTipoVisitaDomiciliaria","usisPurisu","ipsPrimariaPurisu","telefonicaPurisu","cauPurisu","actividadExtramuralPurisu","edadFuanAfiliado","nombreTipoSexo","idProgramaResolucion412","compProgramaResolucion412","idGrupoInteres","compGrupoInteres","idSeguimientoProgramasIntervencionRiesgo","compSeguimientoProgramasIntervencionRiesgo","idMotivoConsulta","compMotivoConsulta","idMotivoContacto","compMotivoContacto","numAutorizacionPurisu","idGruposFocales","compGruposFocales","idEje","compEje","idUnidad","compUnidad","idModulo","compModulo","idEje1","compEje1","idUnidad1","compUnidad1","idModulo1","compModulo1","idPiezasInformativas","compPiezasInformativas","firmaPurisu"]}}});Ext.define("CoomuceMod.view.DemandaInducida.Purisu",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.DemandaInducida.PurisuController","CoomuceMod.view.DemandaInducida.PurisuModel"],controller:"demandainducida-purisu",viewModel:{type:"demandainducida-purisu"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{disabled:true,minWidth:80,text:"Guardar",handler:"onBotonGuardarClick",reference:"botonGuardar"},{disabled:false,minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick",reference:"botonCancelar"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Nueva Planilla",iconCls:"x-fa fa-file-o",handler:"onBotonNuevaPlanillaClick",reference:"botonNuevaPlanilla"},{text:"Importar archivo de audio",iconCls:"x-fa fa-file-audio-o",handler:"onBotonImportarArchivoClick",tooltip:"Esta opción permite importar archivos de audio a las plantillas diligenciadas telefonicamente."}]}],items:[{xtype:"form",bodyPadding:10,id:"Form-Purisu-Principal",scrollable:true,items:[{xtype:"combo",anchor:"90%",fieldLabel:"Tipo Diligenciamiento",labelWidth:150,name:"tipoDiligenciamientoInfoPurisu",store:["Personal","Telefonico"],value:"Personal"},{xtype:"datefield",anchor:"40%",fieldLabel:"Fecha atención",format:"d/m/Y",labelWidth:150,name:"fechaAtencionPurisu",reference:"fechaAtencionPurisu",value:new Date()},{layout:{type:"table",columns:2},items:[{items:[{xtype:"combo",allowBlank:false,bind:{store:"{getDepartamento}"},campoDependent:"idCiudad",dependent:true,disabled:true,displayField:"compDepartamento",editable:false,fieldLabel:"Departamento",listeners:{select:"onSelectCombo"},name:"idDepartamento",queryMode:"local",reference:"idDepartamento",valueField:"idDepartamento",width:400}]},{items:[{xtype:"combo",allowBlank:false,bind:{store:"{getCiudad}"},disabled:true,displayField:"compCiudad",editable:false,fieldLabel:"Municipio",name:"idCiudad",queryMode:"local",reference:"idCiudad",valueField:"idCiudad",width:400}]}]},{items:[{xtype:"form",bodyPadding:10,border:true,collapsible:true,header:false,id:"Form-Datos",items:[{xtype:"fieldset",defaults:{anchor:"100%"},items:[{xtype:"numberfield",hidden:true,name:"idFuanAfiliado",reference:"idFuanAfiliado"},{xtype:"textfield",fieldLabel:"2. No. Carné",name:"numCarnetFuanAfiliado",readOnly:true,reference:"numCarnetFuanAfiliado"},{xtype:"textfield",fieldLabel:"3. Tipo Identificación del Usuario",name:"codigoTipoIdentificacion",reference:"codigoTipoIdentificacion"},{layout:{type:"table",columns:2},items:[{items:[{xtype:"textfield",fieldLabel:"4. No. Documento de Identidad",name:"identificacionFuanAfiliado",id:"identificacionFuanAfiliado",readOnly:true}]},{items:[{xtype:"button",disabled:true,componentReference:["idFuanAfiliado","codigoTipoIdentificacion","identificacionFuanAfiliado","edadFuanAfiliado","nombreTipoSexo","numCarnetFuanAfiliado"],handler:Coomuce.Util.buscarAfiliado,iconCls:"x-fa fa-binoculars",reference:"botonBuscarAfiliado",tooltip:"Lista de Afiliados",width:30}]}]},{xtype:"fieldset",defaults:{anchor:"100%"},items:[{xtype:"combo",bind:{store:"{getTipoVisitaDomiciliaria}"},displayField:"compTipoVisitaDomiciliaria",editable:false,fieldLabel:"5. Visita Domiciliaria",name:"idTipoVisitaDomiciliaria",queryMode:"local",reference:"idTipoVisitaDomiciliaria",valueField:"idTipoVisitaDomiciliaria"},{xtype:"checkbox",fieldLabel:"6. USIS (Oficina Municipal)",name:"usisPurisu"},{xtype:"checkbox",fieldLabel:"7. IPS Primaria",name:"ipsPrimariaPurisu"},{xtype:"checkbox",fieldLabel:"8. Telefonica",name:"telefonicaPurisu"},{xtype:"checkbox",fieldLabel:"9. CAU (Defensor del Usuario)",name:"cauPurisu"},{xtype:"checkbox",fieldLabel:"10. Actividades Extramurales",name:"actividadExtramuralPurisu"}],title:"UBICACIÓN"},{xtype:"numberfield",fieldLabel:"11. Edad",name:"edadFuanAfiliado",readOnly:true,reference:"edadFuanAfiliado"},{xtype:"textfield",fieldLabel:"12. Genero",name:"nombreTipoSexo",readOnly:true,reference:"nombreTipoSexo"}],title:"DATOS GENERALES"},{xtype:"fieldset",defaults:{anchor:"100%"},items:[{xtype:"fieldset",defaults:{anchor:"100%"},items:[{xtype:"combo",bind:{store:"{getProgramaResolucion412}"},displayField:"compProgramaResolucion412",editable:false,fieldLabel:"13. Programas Res. 412",name:"idProgramaResolucion412",queryMode:"local",reference:"idProgramaResolucion412",valueField:"idProgramaResolucion412"},{xtype:"combo",bind:{store:"{getGrupoInteres}"},displayField:"compGrupoInteres",editable:false,fieldLabel:"14. Programas Grupos de Interés en Salud",name:"idGrupoInteres",queryMode:"local",reference:"idGrupoInteres",valueField:"idGrupoInteres"}],title:"Finalidad de la Canalización"},{xtype:"combo",bind:{store:"{getSeguimientoProgramasIntervencionRiesgo}"},displayField:"compSeguimientoProgramasIntervencionRiesgo",editable:false,fieldLabel:"15. Seguimiento Prog. Intervención del Riesgo",name:"idSeguimientoProgramasIntervencionRiesgo",queryMode:"local",reference:"idSeguimientoProgramasIntervencionRiesgo",valueField:"idSeguimientoProgramasIntervencionRiesgo"}]},{xtype:"fieldset",defaults:{anchor:"100%"},items:[{xtype:"textfield",name:"idMotivoConsulta",hidden:true,reference:"idMotivoConsulta"},{xtype:"textfield",name:"compMotivoConsulta",hidden:true,reference:"compMotivoConsulta"},{xtype:"grid",bind:{store:"{getMotivoConsulta}"},border:true,columns:[{dataIndex:"idMotivoConsulta",header:"Id",hidden:true},{dataIndex:"codigoMotivoConsulta",header:"Código",width:100},{dataIndex:"descripcionMotivoConsulta",header:"Descripción",width:300}],columnLines:true,height:200,id:"Grid-MotivosConsulta",loadMask:true,selModel:{type:"checkboxmodel",checkOnly:true,maxSelection:2,idCampo:"idMotivoConsulta",compCampo:"compMotivoConsulta",listeners:{selectionchange:"onSelectionChange"}},sortableColumns:false,tbar:{items:["16. Motivo de Consulta (Afiliado)"]}},{xtype:"textfield",name:"idMotivoContacto",hidden:true,reference:"idMotivoContacto"},{xtype:"textfield",name:"compMotivoContacto",hidden:true,reference:"compMotivoContacto"},{xtype:"grid",bind:{store:"{getMotivoContacto}"},border:true,columns:[{dataIndex:"idMotivoContacto",header:"Id",hidden:true},{dataIndex:"codigoMotivoContacto",header:"Código",width:100},{dataIndex:"descripcionMotivoContacto",header:"Descripción",width:300}],columnLines:true,height:200,id:"Grid-MotivosContacto",loadMask:true,selModel:{type:"checkboxmodel",checkOnly:true,maxSelection:2,idCampo:"idMotivoContacto",compCampo:"compMotivoContacto",listeners:{selectionchange:"onSelectionChange"}},sortableColumns:false,tbar:{items:["17. Motivo de Contacto (EPS-S)"]}},{xtype:"numberfield",fieldLabel:"18. No. de Autorización",minValue:0,name:"numAutorizacionPurisu"}],title:"INFORMACIÓN Y ORIENTACIÓN"},{xtype:"fieldset",defaults:{anchor:"100%"},items:[{xtype:"combo",bind:{store:"{getGruposFocales}"},displayField:"compGruposFocales",editable:false,fieldLabel:"19. Código del Grupo Focal",name:"idGruposFocales",queryMode:"local",reference:"idGruposFocales",valueField:"idGruposFocales"},{xtype:"fieldset",defaults:{anchor:"100%"},items:[{xtype:"combo",allowBlank:false,bind:{store:"{getEje}"},campoDependent:"idUnidad",dependent:true,displayField:"compEje",editable:false,fieldLabel:"ET",listeners:{select:"onSelectCombo"},name:"idEje",queryMode:"local",reference:"idEje",valueField:"idEje"},{xtype:"combo",allowBlank:false,bind:{store:"{getUnidad}"},campoDependent:"idModulo",dependent:true,displayField:"compUnidad",fieldLabel:"U",editable:false,listeners:{select:"onSelectCombo"},name:"idUnidad",queryMode:"local",reference:"idUnidad",valueField:"idUnidad"},{xtype:"combo",allowBlank:false,bind:{store:"{getModulo}"},displayField:"compModulo",editable:false,fieldLabel:"M",name:"idModulo",queryMode:"local",reference:"idModulo",valueField:"idModulo"},{xtype:"combo",allowBlank:false,bind:{store:"{getEje}"},campoDependent:"idUnidad1",dependent:true,displayField:"compEje",editable:false,fieldLabel:"ET",listeners:{select:"onSelectCombo"},name:"idEje1",queryMode:"local",reference:"idEje1",valueField:"idEje"},{xtype:"combo",allowBlank:false,bind:{store:"{getUnidad}"},campoDependent:"idModulo1",dependent:true,displayField:"compUnidad",fieldLabel:"U",editable:false,listeners:{select:"onSelectCombo"},name:"idUnidad1",queryMode:"local",reference:"idUnidad1",valueField:"idUnidad"},{xtype:"combo",allowBlank:false,bind:{store:"{getModulo}"},displayField:"compModulo",editable:false,fieldLabel:"M",name:"idModulo1",queryMode:"local",reference:"idModulo1",valueField:"idModulo"}],title:"PIEFI"}],title:"EDUCACIÓN Y FORMACIÓN INTEGRAL"},{xtype:"textfield",name:"idPiezasInformativas",hidden:true,reference:"idPiezasInformativas"},{xtype:"textfield",name:"compPiezasInformativas",hidden:true,reference:"compPiezasInformativas"},{xtype:"grid",bind:{store:"{getPiezasInformativas}"},border:true,columns:[{dataIndex:"idPiezasInformativas",header:"Id",hidden:true},{dataIndex:"codigoPiezasInformativas",header:"Código",width:100},{dataIndex:"descripcionPiezasInformativas",header:"Descripción",width:300}],columnLines:true,height:200,id:"Grid-PiezasInformativas",loadMask:true,selModel:{type:"checkboxmodel",checkOnly:true,maxSelection:3,idCampo:"idPiezasInformativas",compCampo:"compPiezasInformativas",listeners:{selectionchange:"onSelectionChange"}},sortableColumns:false,tbar:{items:["20. Código de Piezas Informátivas Entregadas al Usuario"]}},{layout:{type:"table",columns:2},items:[{items:[{xtype:"uploader",uploadConfig:{uploadUrl:Coomuce.Url.Funciones+"ImportarFirma",maxFileSize:10*1024*1024},inputAttrTpl:"data-qtip='Seleccione el archivo.'",listeners:{uploaddatacomplete:"onUploadDataComplete",uploaderror:"onUploadError"}}]},{items:[{xtype:"textfield",name:"firmaPurisu",hidden:true,reference:"firmaPurisu"},{xtype:"button",iconCls:"x-fa fa-minus-circle",textAlign:"left",handler:"onBotonEliminarArchivoClick",reference:"botonEliminar",width:250}]}]}],region:"west",scrollable:true,split:true,tbar:{items:[{combos:["idTipoVisitaDomiciliaria","idProgramaResolucion412","idGrupoInteres","idSeguimientoProgramasIntervencionRiesgo","idGruposFocales","idEje","idUnidad","idModulo","idEje1","idUnidad1","idModulo1"],campos:["compTipoVisitaDomiciliaria","compProgramaResolucion412","compGrupoInteres","compSeguimientoProgramasIntervencionRiesgo","compGruposFocales","compEje","compUnidad","compModulo","compEje1","compUnidad1","compModulo1"],disabled:true,handler:"onBotonGridAdicionarClick",iconCls:"x-fa fa-plus-circle",reference:"botonGridAdicionar",text:"Agregar datos a lista"}]},width:500},{xtype:"grid",bind:{store:"{setItemsPurisu}"},border:true,columns:[{xtype:"rownumberer"},{text:"DATOS GENERALES",columns:[{dataIndex:"numCarnePurisu",header:"2. No. Carné"},{dataIndex:"codigoTipoIdentificacion",header:"3. Tipo Identificación del Usuario"},{dataIndex:"identificacionFuanAfiliado",header:"4. No. Documento de Identidad"},{text:"UBICACIÓN",columns:[{dataIndex:"compTipoVisitaDomiciliaria",header:"5. Visita Domiciliaria"},{xtype:"checkcolumn",dataIndex:"usisPurisu",header:"6. USIS (Oficina Municipal)"},{xtype:"checkcolumn",dataIndex:"ipsPrimariaPurisu",header:"7. IPS Primaria"},{xtype:"checkcolumn",dataIndex:"telefonicaPurisu",header:"8. Telefonica"},{xtype:"checkcolumn",dataIndex:"cauPurisu",header:"9. CAU (Defensor del Usuario)"},{xtype:"checkcolumn",dataIndex:"actividadExtramuralPurisu",header:"10. Actividades Extramurales"}]},{dataIndex:"edadFuanAfiliado",header:"11. Edad"},{dataIndex:"nombreTipoSexo",header:"12. Genero"}]},{text:"",columns:[{text:"Finalidad de la Canalización",columns:[{dataIndex:"compProgramaResolucion412",header:"13. Programas Res. 412"},{dataIndex:"compGrupoInteres",header:"14. Programas Grupos de Interés en Salud"}]},{dataIndex:"compSeguimientoProgramasIntervencionRiesgo",header:"15. Seguimiento Prog. Intervención del Riesgo"}]},{text:"INFORMACIÓN Y ORIENTACIÓN",columns:[{dataIndex:"compMotivoConsulta",header:"16. Motivo de Consulta (Afiliado)"},{cellWrap:true,dataIndex:"compMotivoContacto",header:"17. Motivo de Contacto (EPS-S)"},{dataIndex:"numAutorizacionPurisu",header:"18. No. de Autorización"}]},{text:"EDUCACIÓN Y FORMACIÓN INTEGRAL",columns:[{dataIndex:"compGruposFocales",header:"19. Código del Grupo Focal"},{text:"PIEFI",columns:[{dataIndex:"compEje",header:"ET"},{dataIndex:"compUnidad",header:"U"},{dataIndex:"compModulo",header:"M"},{dataIndex:"compEje1",header:"ET"},{dataIndex:"compUnidad1",header:"U"},{dataIndex:"compModulo1",header:"M"}]}]},{cellWrap:true,dataIndex:"compPiezasInformativas",header:"20. Código de Piezas Informátivas Entregadas al Usuario"}],columnLines:true,id:"Grid-Purisu-Principal",plugins:{ptype:"cellediting",clicksToEdit:1},region:"center",sortableColumns:false,tbar:{items:[{disabled:true,handler:"onBotonGridRemoverClick",iconCls:"x-fa fa-minus-circle",reference:"botonGridRemover",text:"Remover"}]}}],layout:"border",height:450}]}]});Ext.define("CoomuceMod.view.InformacionOrientacion.EncuestaEpsController",{extend:"Ext.app.ViewController",alias:"controller.informacionorientacion-encuestaeps",getTitleView:function(){return this.getView().getTitle()},fnGenerarPlantilla:function(c){var d=Ext.getCmp("ContenidoEncuestaEps");Ext.Array.each(c,function(a){var b=Ext.create("Ext.form.FieldSet",{anchor:"100%",defaults:{anchor:"100%"},layout:"anchor",style:"padding-top: 5px;padding-bottom: 5px;",title:a.nombreEncuestaCategoria});Ext.Array.each(a.preguntas,function(k){var i,l;l=Ext.create("Ext.form.Label",{text:k.textoEncuestaPregunta});b.add(l);switch(k.tipoPreEncuestaPregunta){case 1:i=Ext.create("Ext.form.RadioGroup",{allowBlank:false,columns:1,name:"id_pre_"+k.idEncuestaPregunta,vertical:false});for(var j=0;j<k.literales.length;j++){i.add({boxLabel:k.literales[j].textoEncuestaLiteral,inputValue:k.literales[j].valorEncuestaLiteral,checked:k.literales[j].checkedEncuestaLiteral})}break;case 2:i=Ext.create("Ext.form.CheckboxGroup",{allowBlank:false,columns:1,vertical:false});for(var j=0;j<k.literales.length;j++){i.add({boxLabel:k.literales[j].textoEncuestaLiteral,name:"id_lit_"+k.literales[j].idEncuestaLiteral,inputValue:k.literales[j].valorEncuestaLiteral})}break;case 3:i=Ext.create("Ext.form.RadioGroup",{allowBlank:false,columns:1,vertical:false});for(var j=0;j<k.literales.length;j++){i.add({boxLabel:k.literales[j].textoEncuestaLiteral,name:"id_lit_"+k.literales[j].idEncuestaLiteral,inputValue:k.literales[j].valorEncuestaLiteral})}break}b.add(i)});d.add(b)})},onAfterRender:function(e){var f=this;var d=f.getViewModel().getStore("getEncuesta");d.on("load",function(j,k,a,l,b){var c=Ext.decode(l._response.responseText);f.fnGenerarPlantilla(c.data)});d.load({params:{idDomVista:f.getView().getId()}})},onBotonGuardarClick:function(){var c=this;var d=c.getTitleView();Ext.Msg.confirm(d,"Desea guardar las modificaciones?",function(p){if(p==="yes"){var r=Ext.getCmp("Form-EncuestaEps");if(!r.getForm().isValid()){Coomuce.Util.ShowMessage({type:"ERROR",title:d,msg:"Hay campos obligatorios que deben ser diligenciados."});return false}var l=r.getForm().getValues();var o={};var n=[];var q=[];for(var a in l){if(a==="length"||!l.hasOwnProperty(a)){continue}var b=l[a];switch(a.substring(0,6)){case"id_pre":n.push({idEncuestaEps:0,idEncuestaPregunta:parseInt(a.substring(7)),valorEncuestaEpsRespPregunta:b});break;case"id_lit":q.push({idEncuestaEps:0,idEncuestaLiteral:parseInt(a.substring(7)),valorEncuestaEpsRespLiteral:b});break;default:o[a]=b;break}}o.idUsuario=Coomuce.Util.DatosUsuario.idUsuario;var m={url:Coomuce.Url.Funciones+"EncuestaEpsGuardar",data:{encuestaEps:o,respPregunta:n,respLiteral:q},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(f){r.getForm().reset();var e=Ext.getCmp("CoomuceEncuestaEPS");e.destroy()}};Coomuce.Util.EnviarPost(m)}})},onBotonCancelarClick:function(){var b=this;Ext.Msg.confirm(b.getTitleView(),"Desea cancelar las modificaciones?",function(a){if(a==="yes"){var f=Ext.getCmp("Form-EncuestaEps");f.getForm().reset();var e=Ext.getCmp("CoomuceEncuestaEPS");e.destroy()}})}});Ext.define("CoomuceMod.view.InformacionOrientacion.EncuestaEpsModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.informacionorientacion-encuestaeps",stores:{getEncuesta:{autoLoad:false,fields:["idEncuestaCategoria","nombreEncuestaCategoria","preguntas"],proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Funciones+"GetEncuestaAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.InformacionOrientacion.EncuestaEps",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.InformacionOrientacion.EncuestaEpsController","CoomuceMod.view.InformacionOrientacion.EncuestaEpsModel"],controller:"informacionorientacion-encuestaeps",viewModel:{type:"informacionorientacion-encuestaeps"},layout:"fit",listeners:{afterrender:"onAfterRender"},dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick",reference:"botonGuardar"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick",reference:"botonCancelar"}]}],items:[{xtype:"form",bodyPadding:10,defaults:{anchor:"100%",labelWidth:150},scrollable:true,id:"Form-EncuestaEps",items:[{xtype:"label",html:"ENCUESTA DE SATISFACCION DE USUARIO DE LA EPS-S"},{layout:{type:"table",columns:2},items:[{items:[{xtype:"numberfield",hidden:true,name:"idFuanAfiliado"},{xtype:"textfield",fieldLabel:"No. de identificación",labelWidth:150,name:"compAfiliado",readOnly:true,reference:"compAfiliado",width:700}]},{items:[{xtype:"button",componentReference:["idFuanAfiliado","compAfiliado"],handler:Coomuce.Util.buscarAfiliado,iconCls:"x-fa fa-list-alt",reference:"botonBuscarAfiliado",tooltip:"Lista de Afiliados",width:30}]}]},{layout:{type:"table",columns:2},items:[{items:[{xtype:"numberfield",hidden:true,name:"idIps"},{xtype:"textfield",fieldLabel:"Punto de Atención",labelWidth:150,name:"nombreCompletoIps",readOnly:true,reference:"nombreCompletoIps",width:700}]},{items:[{xtype:"button",componentReference:["idIps","nombreCompletoIps"],handler:Coomuce.Util.buscarIps,iconCls:"x-fa fa-list-alt",reference:"botonBuscarIps",tooltip:"Lista de Ips",width:30}]}]},{xtype:"label",html:"Esta encuesta tiene por objeto conocer su opinion  sobre los servicios prestados por la ARS."},{xtype:"label",html:"Su opinión es muy importante para nosotros porque nos permite organizar nuestros servicios para poder satisfacer sus expectativas, por eso le solicitamos que responda con sinceridad marcando (X) y solo una respuesta por pregunta."},{bodyPadding:10,border:true,height:400,id:"ContenidoEncuestaEps",scrollable:true},{xtype:"textarea",fieldLabel:"Observaciones",name:"observacionEncuestaEps"}]}]});Ext.define("CoomuceMod.view.InformacionOrientacion.EncuestaIpsController",{extend:"Ext.app.ViewController",alias:"controller.informacionorientacion-encuestaips",getTitleView:function(){return this.getView().getTitle()},fnGenerarPlantilla:function(c){var d=Ext.getCmp("ContenidoEncuestaIps");Ext.Array.each(c,function(a){var b=Ext.create("Ext.form.FieldSet",{anchor:"100%",defaults:{anchor:"100%"},layout:"anchor",style:"padding-top: 5px;padding-bottom: 5px;",title:a.nombreEncuestaCategoria});Ext.Array.each(a.preguntas,function(k){var i,l;l=Ext.create("Ext.form.Label",{text:k.textoEncuestaPregunta});b.add(l);switch(k.tipoPreEncuestaPregunta){case 1:i=Ext.create("Ext.form.RadioGroup",{allowBlank:false,columns:1,name:"id_pre_"+k.idEncuestaPregunta,vertical:false});for(var j=0;j<k.literales.length;j++){i.add({boxLabel:k.literales[j].textoEncuestaLiteral,inputValue:k.literales[j].valorEncuestaLiteral,checked:k.literales[j].checkedEncuestaLiteral})}break;case 2:i=Ext.create("Ext.form.CheckboxGroup",{allowBlank:false,columns:1,vertical:false});for(var j=0;j<k.literales.length;j++){i.add({boxLabel:k.literales[j].textoEncuestaLiteral,name:"id_lit_"+k.literales[j].idEncuestaLiteral,inputValue:k.literales[j].valorEncuestaLiteral})}break;case 3:i=Ext.create("Ext.form.RadioGroup",{allowBlank:false,columns:1,vertical:false});for(var j=0;j<k.literales.length;j++){i.add({boxLabel:k.literales[j].textoEncuestaLiteral,name:"id_lit_"+k.literales[j].idEncuestaLiteral,inputValue:k.literales[j].valorEncuestaLiteral})}break}b.add(i)});d.add(b)})},onAfterRender:function(e){var f=this;var d=f.getViewModel().getStore("getEncuesta");d.on("load",function(j,k,a,l,b){var c=Ext.decode(l._response.responseText);f.fnGenerarPlantilla(c.data)});d.load({params:{idDomVista:f.getView().getId()}})},onBotonGuardarClick:function(){var c=this;var d=c.getTitleView();Ext.Msg.confirm(d,"Desea guardar las modificaciones?",function(p){if(p==="yes"){var r=Ext.getCmp("Form-EncuestaIps");if(!r.getForm().isValid()){Coomuce.Util.ShowMessage({type:"ERROR",title:d,msg:"Hay campos obligatorios que deben ser diligenciados."});return false}var l=r.getForm().getValues();var o={};var n=[];var q=[];for(var a in l){if(a==="length"||!l.hasOwnProperty(a)){continue}var b=l[a];switch(a.substring(0,6)){case"id_pre":n.push({idEncuestaIps:0,idEncuestaPregunta:parseInt(a.substring(7)),valorEncuestaIpsRespPregunta:b});break;case"id_lit":q.push({idEncuestaIps:0,idEncuestaLiteral:parseInt(a.substring(7)),valorEncuestaIpsRespLiteral:b});break;default:o[a]=b;break}}o.idUsuario=Coomuce.Util.DatosUsuario.idUsuario;var m={url:Coomuce.Url.Funciones+"EncuestaIpsGuardar",data:{encuestaIps:o,respPregunta:n,respLiteral:q},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(f){r.getForm().reset();var e=Ext.getCmp("CoomuceEncuestaIPS");e.destroy()}};Coomuce.Util.EnviarPost(m)}})},onBotonCancelarClick:function(){var b=this;Ext.Msg.confirm(b.getTitleView(),"Desea cancelar las modificaciones?",function(a){if(a==="yes"){var f=Ext.getCmp("Form-EncuestaIps");f.getForm().reset();var e=Ext.getCmp("CoomuceEncuestaIPS");e.destroy()}})}});Ext.define("CoomuceMod.view.InformacionOrientacion.EncuestaIpsModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.informacionorientacion-encuestaips",stores:{getEncuesta:{autoLoad:false,fields:["idEncuestaCategoria","nombreEncuestaCategoria","preguntas"],proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Funciones+"GetEncuestaAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.InformacionOrientacion.EncuestaIps",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.InformacionOrientacion.EncuestaIpsController","CoomuceMod.view.InformacionOrientacion.EncuestaIpsModel"],controller:"informacionorientacion-encuestaips",viewModel:{type:"informacionorientacion-encuestaips"},layout:"fit",listeners:{afterrender:"onAfterRender"},dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick",reference:"botonGuardar"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick",reference:"botonCancelar"}]}],items:[{xtype:"form",bodyPadding:10,defaults:{anchor:"100%",labelWidth:150},scrollable:true,id:"Form-EncuestaIps",items:[{xtype:"label",html:"ENCUESTA DE SATISFACCION DE USUARIO DE LA  I.P.S DE I NIVEL"},{xtype:"label",html:"ESTIMADO USUARIO SI USTED HA RECIBIDO EN ESTE MES LOS SERVICIOS DE INSTITUCIONES DE SALUD ( HOSPITAL, CENTRO DE SALUD, IPS) LO INVITAMOS A RESPONDER LAS SIGUIENTES PREGUNTAS SOBRE LA ATENCION"},{layout:{type:"table",columns:2},items:[{items:[{xtype:"numberfield",hidden:true,name:"idFuanAfiliado"},{xtype:"textfield",fieldLabel:"No. de identificación",labelWidth:150,name:"compAfiliado",readOnly:true,reference:"compAfiliado",width:700}]},{items:[{xtype:"button",componentReference:["idFuanAfiliado","compAfiliado"],handler:Coomuce.Util.buscarAfiliado,iconCls:"x-fa fa-list-alt",reference:"botonBuscarAfiliado",tooltip:"Lista de Afiliados",width:30}]}]},{layout:{type:"table",columns:2},items:[{items:[{xtype:"numberfield",hidden:true,name:"idIps"},{xtype:"textfield",fieldLabel:"Nombre de la institución donde fue atendido",labelWidth:150,name:"nombreCompletoIps",readOnly:true,reference:"nombreCompletoIps",width:700}]},{items:[{xtype:"button",componentReference:["idIps","nombreCompletoIps"],handler:Coomuce.Util.buscarIps,iconCls:"x-fa fa-list-alt",reference:"botonBuscarIps",tooltip:"Lista de Ips",width:30}]}]},{xtype:"label",html:"Su opinión es muy importante para nosotros porque nos permite organizar nuestros servicios para poder satisfacer sus expectativas por esto le solicitamos que responda con sinceridad marcando con una (X) solo una respuesta por pregunta"},{bodyPadding:10,border:true,height:400,id:"ContenidoEncuestaIps",scrollable:true},{xtype:"textarea",fieldLabel:"Observaciones",name:"observacionEncuestaIps"}]}]});Ext.define("CoomuceMod.view.Parametros.ActualizacionBd.CondicionDiscapacidadController",{extend:"Ext.app.ViewController",alias:"controller.parametros-actualizacionbd-condiciondiscapacidad",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var e=Ext.getCmp("Grid-CondicionDiscapacidad-Principal").getStore();var d=e.max("idCondicionDiscapacidad");var f=[{idCondicionDiscapacidad:(d==undefined?1:d+1),codigoCondicionDiscapacidad:"",nombreCondicionDiscapacidad:""}];e.insert(0,f)},onBotonCancelarClick:function(){Ext.Msg.confirm(this.getTitleView(),"Desea cancelar las modificaciones?",function(d){if(d==="yes"){var e=Ext.getCmp("Grid-CondicionDiscapacidad-Principal").getStore();e.rejectChanges();var f=Ext.getCmp("CoomuceCondicionDiscapacidad");f.destroy()}})},onBotonGuardarClick:function(){var b=this.getTitleView();Ext.Msg.confirm(b,"Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-CondicionDiscapacidad-Principal");var k=r.getStore();var m=[];var p=[];var a=[];var n=[];Ext.each(k.data.items,function(e,d,c){if(e.dirty){if(e.phantom){m.push(e.data)}else{p.push(e.data)}n.push(e)}});Ext.each(k.getRemovedRecords(),function(d,c){if(!d.phantom){a.push(d.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:b,msg:q.msg});return false}}var l={url:Coomuce.Url.Parametros+"CondicionDiscapacidadCUD",data:{nuevos:m,viejos:p,eliminados:a},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(c){k.load()}};Coomuce.Util.EnviarPost(l)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-CondicionDiscapacidad-Principal");b.getStore().remove(b.selModel.getSelection())}});Ext.define("CoomuceMod.view.Parametros.ActualizacionBd.CondicionDiscapacidadModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-actualizacionbd-condiciondiscapacidad",stores:{getCondicionDiscapacidad:{autoLoad:true,model:"CoomuceMod.model.Parametros.ActualizacionBd.CondicionDiscapacidad",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetCondicionDiscapacidadAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Parametros.ActualizacionBd.CondicionDiscapacidad",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.ActualizacionBd.CondicionDiscapacidadController","CoomuceMod.view.Parametros.ActualizacionBd.CondicionDiscapacidadModel"],controller:"parametros-actualizacionbd-condiciondiscapacidad",viewModel:{type:"parametros-actualizacionbd-condiciondiscapacidad"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getCondicionDiscapacidad}"},columns:[{dataIndex:"idCondicionDiscapacidad",header:"Id",hidden:true},{dataIndex:"codigoCondicionDiscapacidad",header:"Código",width:100,editor:{allowBlank:false}},{dataIndex:"nombreCondicionDiscapacidad",header:"Nombre",width:300,editor:{allowBlank:false}}],columnLines:true,id:"Grid-CondicionDiscapacidad-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Parametros.ActualizacionBd.DeclaracionAutorizacionController",{extend:"Ext.app.ViewController",alias:"controller.parametros-actualizacionbd-declaracionautorizacion",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var e=Ext.getCmp("Grid-DeclaracionAutorizacion-Principal").getStore();var d=e.max("idDeclaracionAutorizacion");var f=[{idDeclaracionAutorizacion:(d==undefined?1:d+1),codigoDeclaracionAutorizacion:"",descripcionDeclaracionAutorizacion:""}];e.insert(0,f)},onBotonCancelarClick:function(){Ext.Msg.confirm(this.getTitleView(),"Desea cancelar las modificaciones?",function(d){if(d==="yes"){var e=Ext.getCmp("Grid-DeclaracionAutorizacion-Principal").getStore();e.rejectChanges();var f=Ext.getCmp("CoomuceDeclaracionAutorizacion");f.destroy()}})},onBotonGuardarClick:function(){var b=this.getTitleView();Ext.Msg.confirm(b,"Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-DeclaracionAutorizacion-Principal");var k=r.getStore();var m=[];var p=[];var a=[];var n=[];Ext.each(k.data.items,function(e,d,c){if(e.dirty){if(e.phantom){m.push(e.data)}else{p.push(e.data)}n.push(e)}});Ext.each(k.getRemovedRecords(),function(d,c){if(!d.phantom){a.push(d.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:b,msg:q.msg});return false}}var l={url:Coomuce.Url.Parametros+"DeclaracionAutorizacionCUD",data:{nuevos:m,viejos:p,eliminados:a},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(c){k.load()}};Coomuce.Util.EnviarPost(l)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-DeclaracionAutorizacion-Principal");b.getStore().remove(b.selModel.getSelection())}});Ext.define("CoomuceMod.view.Parametros.ActualizacionBd.DeclaracionAutorizacionModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-actualizacionbd-declaracionautorizacion",stores:{getDeclaracionAutorizacion:{autoLoad:true,model:"CoomuceMod.model.Parametros.ActualizacionBd.DeclaracionAutorizacion",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetDeclaracionAutorizacionAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Parametros.ActualizacionBd.DeclaracionAutorizacion",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.ActualizacionBd.DeclaracionAutorizacionController","CoomuceMod.view.Parametros.ActualizacionBd.DeclaracionAutorizacionModel"],controller:"parametros-actualizacionbd-declaracionautorizacion",viewModel:{type:"parametros-actualizacionbd-declaracionautorizacion"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getDeclaracionAutorizacion}"},columns:[{dataIndex:"idDeclaracionAutorizacion",header:"Id",hidden:true},{dataIndex:"codigoDeclaracionAutorizacion",header:"Código",width:100,editor:{allowBlank:false}},{dataIndex:"descripcionDeclaracionAutorizacion",header:"Descripción",width:300,editor:{allowBlank:false}}],columnLines:true,id:"Grid-DeclaracionAutorizacion-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Parametros.ActualizacionBd.GrupoPoblacionalController",{extend:"Ext.app.ViewController",alias:"controller.parametros-actualizacionbd-grupopoblacional",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var e=Ext.getCmp("Grid-GrupoPoblacional-Principal").getStore();var d=e.max("idGrupoPoblacional");var f=[{idGrupoPoblacional:(d==undefined?1:d+1),codigoGrupoPoblacional:"",nombreGrupoPoblacional:""}];e.insert(0,f)},onBotonCancelarClick:function(){Ext.Msg.confirm(this.getTitleView(),"Desea cancelar las modificaciones?",function(d){if(d==="yes"){var e=Ext.getCmp("Grid-GrupoPoblacional-Principal").getStore();e.rejectChanges();var f=Ext.getCmp("CoomuceGrupoPoblacional");f.destroy()}})},onBotonGuardarClick:function(){var b=this.getTitleView();Ext.Msg.confirm(b,"Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-GrupoPoblacional-Principal");var k=r.getStore();var m=[];var p=[];var a=[];var n=[];Ext.each(k.data.items,function(e,d,c){if(e.dirty){if(e.phantom){m.push(e.data)}else{p.push(e.data)}n.push(e)}});Ext.each(k.getRemovedRecords(),function(d,c){if(!d.phantom){a.push(d.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:b,msg:q.msg});return false}}var l={url:Coomuce.Url.Parametros+"GrupoPoblacionalCUD",data:{nuevos:m,viejos:p,eliminados:a},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(c){k.load()}};Coomuce.Util.EnviarPost(l)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-GrupoPoblacional-Principal");b.getStore().remove(b.selModel.getSelection())}});Ext.define("CoomuceMod.view.Parametros.ActualizacionBd.GrupoPoblacionalModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-actualizacionbd-grupopoblacional",stores:{getGrupoPoblacional:{autoLoad:true,model:"CoomuceMod.model.Parametros.ActualizacionBd.GrupoPoblacional",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetGrupoPoblacionalAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Parametros.ActualizacionBd.GrupoPoblacional",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.ActualizacionBd.GrupoPoblacionalController","CoomuceMod.view.Parametros.ActualizacionBd.GrupoPoblacionalModel"],controller:"parametros-actualizacionbd-grupopoblacional",viewModel:{type:"parametros-actualizacionbd-grupopoblacional"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getGrupoPoblacional}"},columns:[{dataIndex:"idGrupoPoblacional",header:"Id",hidden:true},{dataIndex:"codigoGrupoPoblacional",header:"Código",width:100,editor:{allowBlank:false}},{dataIndex:"nombreGrupoPoblacional",header:"Nombre",width:300,editor:{allowBlank:false}}],columnLines:true,id:"Grid-GrupoPoblacional-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Parametros.ActualizacionBd.MotivoTrasladoController",{extend:"Ext.app.ViewController",alias:"controller.parametros-actualizacionbd-motivotraslado",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var e=Ext.getCmp("Grid-MotivoTraslado-Principal").getStore();var d=e.max("idMotivoTraslado");var f=[{idMotivoTraslado:(d==undefined?1:d+1),codigoMotivoTraslado:"",descripcionMotivoTraslado:""}];e.insert(0,f)},onBotonCancelarClick:function(){Ext.Msg.confirm(this.getTitleView(),"Desea cancelar las modificaciones?",function(d){if(d==="yes"){var e=Ext.getCmp("Grid-MotivoTraslado-Principal").getStore();e.rejectChanges();var f=Ext.getCmp("CoomuceMotivoTraslado");f.destroy()}})},onBotonGuardarClick:function(){var b=this.getTitleView();Ext.Msg.confirm(b,"Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-MotivoTraslado-Principal");var k=r.getStore();var m=[];var p=[];var a=[];var n=[];Ext.each(k.data.items,function(e,d,c){if(e.dirty){if(e.phantom){m.push(e.data)}else{p.push(e.data)}n.push(e)}});Ext.each(k.getRemovedRecords(),function(d,c){if(!d.phantom){a.push(d.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:b,msg:q.msg});return false}}var l={url:Coomuce.Url.Parametros+"MotivoTrasladoCUD",data:{nuevos:m,viejos:p,eliminados:a},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(c){k.load()}};Coomuce.Util.EnviarPost(l)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-MotivoTraslado-Principal");b.getStore().remove(b.selModel.getSelection())}});Ext.define("CoomuceMod.view.Parametros.ActualizacionBd.MotivoTrasladoModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-actualizacionbd-motivotraslado",stores:{getMotivoTraslado:{autoLoad:true,model:"CoomuceMod.model.Parametros.ActualizacionBd.MotivoTraslado",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetMotivoTrasladoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Parametros.ActualizacionBd.MotivoTraslado",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.ActualizacionBd.MotivoTrasladoController","CoomuceMod.view.Parametros.ActualizacionBd.MotivoTrasladoModel"],controller:"parametros-actualizacionbd-motivotraslado",viewModel:{type:"parametros-actualizacionbd-motivotraslado"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getMotivoTraslado}"},columns:[{dataIndex:"idMotivoTraslado",header:"Id",hidden:true},{dataIndex:"codigoMotivoTraslado",header:"Código",width:100,editor:{allowBlank:false}},{dataIndex:"descripcionMotivoTraslado",header:"Descripción",width:300,editor:{allowBlank:false}}],columnLines:true,id:"Grid-MotivoTraslado-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Parametros.ActualizacionBd.TipoAfiliacionController",{extend:"Ext.app.ViewController",alias:"controller.parametros-actualizacionbd-tipoafiliacion",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var e=Ext.getCmp("Grid-TipoAfiliacion-Principal").getStore();var d=e.max("idTipoAfiliacion");var f=[{idTipoAfiliacion:(d==undefined?1:d+1),codigoTipoAfiliacion:"",nombreTipoAfiliacion:""}];e.insert(0,f)},onBotonCancelarClick:function(){Ext.Msg.confirm(this.getTitleView(),"Desea cancelar las modificaciones?",function(d){if(d==="yes"){var e=Ext.getCmp("Grid-TipoAfiliacion-Principal").getStore();e.rejectChanges();var f=Ext.getCmp("CoomuceTipoAfiliacion");f.destroy()}})},onBotonGuardarClick:function(){var b=this.getTitleView();Ext.Msg.confirm(b,"Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-TipoAfiliacion-Principal");var k=r.getStore();var m=[];var p=[];var a=[];var n=[];Ext.each(k.data.items,function(e,d,c){if(e.dirty){if(e.phantom){m.push(e.data)}else{p.push(e.data)}n.push(e)}});Ext.each(k.getRemovedRecords(),function(d,c){if(!d.phantom){a.push(d.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:b,msg:q.msg});return false}}var l={url:Coomuce.Url.Parametros+"TipoAfiliacionCUD",data:{nuevos:m,viejos:p,eliminados:a},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(c){k.load()}};Coomuce.Util.EnviarPost(l)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-TipoAfiliacion-Principal");b.getStore().remove(b.selModel.getSelection())}});Ext.define("CoomuceMod.view.Parametros.ActualizacionBd.TipoAfiliacionModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-actualizacionbd-tipoafiliacion",stores:{getTipoAfiliacion:{autoLoad:true,model:"CoomuceMod.model.Parametros.ActualizacionBd.TipoAfiliacion",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetTipoAfiliacionAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Parametros.ActualizacionBd.TipoAfiliacion",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.ActualizacionBd.TipoAfiliacionController","CoomuceMod.view.Parametros.ActualizacionBd.TipoAfiliacionModel"],controller:"parametros-actualizacionbd-tipoafiliacion",viewModel:{type:"parametros-actualizacionbd-tipoafiliacion"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getTipoAfiliacion}"},columns:[{dataIndex:"idTipoAfiliacion",header:"Id",hidden:true},{dataIndex:"codigoTipoAfiliacion",header:"Código",width:100,editor:{allowBlank:false}},{dataIndex:"nombreTipoAfiliacion",header:"Nombre",width:300,editor:{allowBlank:false}}],columnLines:true,id:"Grid-TipoAfiliacion-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Parametros.ActualizacionBd.TipoAfiliadoController",{extend:"Ext.app.ViewController",alias:"controller.parametros-actualizacionbd-tipoafiliado",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var e=Ext.getCmp("Grid-TipoAfiliado-Principal").getStore();var d=e.max("idTipoAfiliado");var f=[{idTipoAfiliado:(d==undefined?1:d+1),codigoTipoAfiliado:"",nombreTipoAfiliado:""}];e.insert(0,f)},onBotonCancelarClick:function(){Ext.Msg.confirm(this.getTitleView(),"Desea cancelar las modificaciones?",function(d){if(d==="yes"){var e=Ext.getCmp("Grid-TipoAfiliado-Principal").getStore();e.rejectChanges();var f=Ext.getCmp("CoomuceTipoAfiliado");f.destroy()}})},onBotonGuardarClick:function(){var b=this.getTitleView();Ext.Msg.confirm(b,"Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-TipoAfiliado-Principal");var k=r.getStore();var m=[];var p=[];var a=[];var n=[];Ext.each(k.data.items,function(e,d,c){if(e.dirty){if(e.phantom){m.push(e.data)}else{p.push(e.data)}n.push(e)}});Ext.each(k.getRemovedRecords(),function(d,c){if(!d.phantom){a.push(d.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:b,msg:q.msg});return false}}var l={url:Coomuce.Url.Parametros+"TipoAfiliadoCUD",data:{nuevos:m,viejos:p,eliminados:a},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(c){k.load()}};Coomuce.Util.EnviarPost(l)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-TipoAfiliado-Principal");b.getStore().remove(b.selModel.getSelection())}});Ext.define("CoomuceMod.view.Parametros.ActualizacionBd.TipoAfiliadoModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-actualizacionbd-tipoafiliado",stores:{getTipoAfiliado:{autoLoad:true,model:"CoomuceMod.model.Parametros.ActualizacionBd.TipoAfiliado",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetTipoAfiliadoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Parametros.ActualizacionBd.TipoAfiliado",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.ActualizacionBd.TipoAfiliadoController","CoomuceMod.view.Parametros.ActualizacionBd.TipoAfiliadoModel"],controller:"parametros-actualizacionbd-tipoafiliado",viewModel:{type:"parametros-actualizacionbd-tipoafiliado"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getTipoAfiliado}"},columns:[{dataIndex:"idTipoAfiliado",header:"Id",hidden:true},{dataIndex:"codigoTipoAfiliado",header:"Código",width:100,editor:{allowBlank:false}},{dataIndex:"nombreTipoAfiliado",header:"Nombre",width:300,editor:{allowBlank:false}}],columnLines:true,id:"Grid-TipoAfiliado-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Parametros.ActualizacionBd.TipoCotizanteController",{extend:"Ext.app.ViewController",alias:"controller.parametros-actualizacionbd-tipocotizante",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var e=Ext.getCmp("Grid-TipoCotizante-Principal").getStore();var d=e.max("idTipoCotizante");var f=[{idTipoCotizante:(d==undefined?1:d+1),codigoTipoCotizante:"",nombreTipoCotizante:""}];e.insert(0,f)},onBotonCancelarClick:function(){Ext.Msg.confirm(this.getTitleView(),"Desea cancelar las modificaciones?",function(d){if(d==="yes"){var e=Ext.getCmp("Grid-TipoCotizante-Principal").getStore();e.rejectChanges();var f=Ext.getCmp("CoomuceTipoCotizante");f.destroy()}})},onBotonGuardarClick:function(){var b=this.getTitleView();Ext.Msg.confirm(b,"Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-TipoCotizante-Principal");var k=r.getStore();var m=[];var p=[];var a=[];var n=[];Ext.each(k.data.items,function(e,d,c){if(e.dirty){if(e.phantom){m.push(e.data)}else{p.push(e.data)}n.push(e)}});Ext.each(k.getRemovedRecords(),function(d,c){if(!d.phantom){a.push(d.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:b,msg:q.msg});return false}}var l={url:Coomuce.Url.Parametros+"TipoCotizanteCUD",data:{nuevos:m,viejos:p,eliminados:a},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(c){k.load()}};Coomuce.Util.EnviarPost(l)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-TipoCotizante-Principal");b.getStore().remove(b.selModel.getSelection())}});Ext.define("CoomuceMod.view.Parametros.ActualizacionBd.TipoCotizanteModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-actualizacionbd-tipocotizante",stores:{getTipoCotizante:{autoLoad:true,model:"CoomuceMod.model.Parametros.ActualizacionBd.TipoCotizante",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetTipoCotizanteAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Parametros.ActualizacionBd.TipoCotizante",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.ActualizacionBd.TipoCotizanteController","CoomuceMod.view.Parametros.ActualizacionBd.TipoCotizanteModel"],controller:"parametros-actualizacionbd-tipocotizante",viewModel:{type:"parametros-actualizacionbd-tipocotizante"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getTipoCotizante}"},columns:[{dataIndex:"idTipoCotizante",header:"Id",hidden:true},{dataIndex:"codigoTipoCotizante",header:"Código",width:100,editor:{allowBlank:false}},{dataIndex:"nombreTipoCotizante",header:"Nombre",width:300,editor:{allowBlank:false}}],columnLines:true,id:"Grid-TipoCotizante-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Parametros.ActualizacionBd.TipoDiscapacidadController",{extend:"Ext.app.ViewController",alias:"controller.parametros-actualizacionbd-tipodiscapacidad",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var e=Ext.getCmp("Grid-TipoDiscapacidad-Principal").getStore();var d=e.max("idTipoDiscapacidad");var f=[{idTipoDiscapacidad:(d==undefined?1:d+1),codigoTipoDiscapacidad:"",nombreTipoDiscapacidad:""}];e.insert(0,f)},onBotonCancelarClick:function(){Ext.Msg.confirm(this.getTitleView(),"Desea cancelar las modificaciones?",function(d){if(d==="yes"){var e=Ext.getCmp("Grid-TipoDiscapacidad-Principal").getStore();e.rejectChanges();var f=Ext.getCmp("CoomuceTipoDiscapacidad");f.destroy()}})},onBotonGuardarClick:function(){var b=this.getTitleView();Ext.Msg.confirm(b,"Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-TipoDiscapacidad-Principal");var k=r.getStore();var m=[];var p=[];var a=[];var n=[];Ext.each(k.data.items,function(e,d,c){if(e.dirty){if(e.phantom){m.push(e.data)}else{p.push(e.data)}n.push(e)}});Ext.each(k.getRemovedRecords(),function(d,c){if(!d.phantom){a.push(d.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:b,msg:q.msg});return false}}var l={url:Coomuce.Url.Parametros+"TipoDiscapacidadCUD",data:{nuevos:m,viejos:p,eliminados:a},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(c){k.load()}};Coomuce.Util.EnviarPost(l)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-TipoDiscapacidad-Principal");b.getStore().remove(b.selModel.getSelection())}});Ext.define("CoomuceMod.view.Parametros.ActualizacionBd.TipoDiscapacidadModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-actualizacionbd-tipodiscapacidad",stores:{getTipoDiscapacidad:{autoLoad:true,model:"CoomuceMod.model.Parametros.ActualizacionBd.TipoDiscapacidad",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetTipoDiscapacidadAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Parametros.ActualizacionBd.TipoDiscapacidad",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.ActualizacionBd.TipoDiscapacidadController","CoomuceMod.view.Parametros.ActualizacionBd.TipoDiscapacidadModel"],controller:"parametros-actualizacionbd-tipodiscapacidad",viewModel:{type:"parametros-actualizacionbd-tipodiscapacidad"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getTipoDiscapacidad}"},columns:[{dataIndex:"idTipoDiscapacidad",header:"Id",hidden:true},{dataIndex:"codigoTipoDiscapacidad",header:"Código",width:100,editor:{allowBlank:false}},{dataIndex:"nombreTipoDiscapacidad",header:"Nombre",width:300,editor:{allowBlank:false}}],columnLines:true,id:"Grid-TipoDiscapacidad-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Parametros.ActualizacionBd.TipoEtniaController",{extend:"Ext.app.ViewController",alias:"controller.parametros-actualizacionbd-tipoetnia",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var e=Ext.getCmp("Grid-TipoEtnia-Principal").getStore();var d=e.max("idTipoEtnia");var f=[{idTipoEtnia:(d==undefined?1:d+1),codigoTipoEtnia:"",nombreTipoEtnia:""}];e.insert(0,f)},onBotonCancelarClick:function(){Ext.Msg.confirm(this.getTitleView(),"Desea cancelar las modificaciones?",function(d){if(d==="yes"){var e=Ext.getCmp("Grid-TipoEtnia-Principal").getStore();e.rejectChanges();var f=Ext.getCmp("CoomuceTipoEtnia");f.destroy()}})},onBotonGuardarClick:function(){var b=this.getTitleView();Ext.Msg.confirm(b,"Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-TipoEtnia-Principal");var k=r.getStore();var m=[];var p=[];var a=[];var n=[];Ext.each(k.data.items,function(e,d,c){if(e.dirty){if(e.phantom){m.push(e.data)}else{p.push(e.data)}n.push(e)}});Ext.each(k.getRemovedRecords(),function(d,c){if(!d.phantom){a.push(d.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:b,msg:q.msg});return false}}var l={url:Coomuce.Url.Parametros+"TipoEtniaCUD",data:{nuevos:m,viejos:p,eliminados:a},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(c){k.load()}};Coomuce.Util.EnviarPost(l)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-TipoEtnia-Principal");b.getStore().remove(b.selModel.getSelection())}});Ext.define("CoomuceMod.view.Parametros.ActualizacionBd.TipoEtniaModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-actualizacionbd-tipoetnia",stores:{getTipoEtnia:{autoLoad:true,model:"CoomuceMod.model.Parametros.ActualizacionBd.TipoEtnia",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetTipoEtniaAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Parametros.ActualizacionBd.TipoEtnia",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.ActualizacionBd.TipoEtniaController","CoomuceMod.view.Parametros.ActualizacionBd.TipoEtniaModel"],controller:"parametros-actualizacionbd-tipoetnia",viewModel:{type:"parametros-actualizacionbd-tipoetnia"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getTipoEtnia}"},columns:[{dataIndex:"idTipoEtnia",header:"Id",hidden:true},{dataIndex:"codigoTipoEtnia",header:"Código",width:100,editor:{allowBlank:false}},{dataIndex:"nombreTipoEtnia",header:"Nombre",width:300,editor:{allowBlank:false}}],columnLines:true,id:"Grid-TipoEtnia-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Parametros.ActualizacionBd.TipoNovedadController",{extend:"Ext.app.ViewController",alias:"controller.parametros-actualizacionbd-tiponovedad",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var e=Ext.getCmp("Grid-TipoNovedad-Principal").getStore();var d=e.max("idTipoNovedad");var f=[{idTipoNovedad:(d==undefined?1:d+1),codigoTipoNovedad:"",nombreTipoNovedad:"",tipoValorCampoTipoNovedad:"",valorCampoTipoNovedad:""}];e.insert(0,f)},onBotonCancelarClick:function(){Ext.Msg.confirm(this.getTitleView(),"Desea cancelar las modificaciones?",function(d){if(d==="yes"){var e=Ext.getCmp("Grid-TipoNovedad-Principal").getStore();e.rejectChanges();var f=Ext.getCmp("CoomuceTipoNovedad");f.destroy()}})},onBotonGuardarClick:function(){var b=this.getTitleView();Ext.Msg.confirm(b,"Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-TipoNovedad-Principal");var k=r.getStore();var m=[];var p=[];var a=[];var n=[];Ext.each(k.data.items,function(e,d,c){if(e.dirty){if(e.phantom){m.push(e.data)}else{p.push(e.data)}n.push(e)}});Ext.each(k.getRemovedRecords(),function(d,c){if(!d.phantom){a.push(d.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:b,msg:q.msg});return false}}var l={url:Coomuce.Url.Parametros+"TipoNovedadCUD",data:{nuevos:m,viejos:p,eliminados:a},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(c){k.load()}};Coomuce.Util.EnviarPost(l)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-TipoNovedad-Principal");b.getStore().remove(b.selModel.getSelection())}});Ext.define("CoomuceMod.view.Parametros.ActualizacionBd.TipoNovedadModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-actualizacionbd-tiponovedad",stores:{getTipoNovedad:{autoLoad:true,model:"CoomuceMod.model.Parametros.ActualizacionBd.TipoNovedad",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetTipoNovedadAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getTipoValorCampoNovedad:{fields:["nombre"],data:[["Texto"],["Lista"]]}}});Ext.define("CoomuceMod.view.Parametros.ActualizacionBd.TipoNovedad",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.ActualizacionBd.TipoNovedadController","CoomuceMod.view.Parametros.ActualizacionBd.TipoNovedadModel"],controller:"parametros-actualizacionbd-tiponovedad",viewModel:{type:"parametros-actualizacionbd-tiponovedad"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getTipoNovedad}"},columns:[{dataIndex:"idTipoNovedad",header:"Id",hidden:true},{dataIndex:"codigoTipoNovedad",header:"Código",width:100,editor:{allowBlank:false}},{dataIndex:"nombreTipoNovedad",header:"Nombre",width:300,editor:{allowBlank:false}},{dataIndex:"tipoValorCampoTipoNovedad",header:"Tipo Valor Campo",width:100,editor:{xtype:"combo",allowBlank:true,bind:{store:"{getTipoValorCampoNovedad}"},displayField:"nombre",editable:false,queryMode:"local",valueField:"nombre"}},{dataIndex:"valorCampoTipoNovedad",header:"Valor Campo",width:200,editor:{allowBlank:false}}],columnLines:true,id:"Grid-TipoNovedad-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Parametros.ActualizacionBd.TipoParentescoController",{extend:"Ext.app.ViewController",alias:"controller.parametros-actualizacionbd-tipoparentesco",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var e=Ext.getCmp("Grid-TipoParentesco-Principal").getStore();var d=e.max("idTipoParentesco");var f=[{idTipoParentesco:(d==undefined?1:d+1),codigoTipoParentesco:"",nombreTipoParentesco:"",descripcionTipoParentesco:""}];e.insert(0,f)},onBotonCancelarClick:function(){Ext.Msg.confirm(this.getTitleView(),"Desea cancelar las modificaciones?",function(d){if(d==="yes"){var e=Ext.getCmp("Grid-TipoParentesco-Principal").getStore();e.rejectChanges();var f=Ext.getCmp("CoomuceTipoParentesco");f.destroy()}})},onBotonGuardarClick:function(){var b=this.getTitleView();Ext.Msg.confirm(b,"Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-TipoParentesco-Principal");var k=r.getStore();var m=[];var p=[];var a=[];var n=[];Ext.each(k.data.items,function(e,d,c){if(e.dirty){if(e.phantom){m.push(e.data)}else{p.push(e.data)}n.push(e)}});Ext.each(k.getRemovedRecords(),function(d,c){if(!d.phantom){a.push(d.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:b,msg:q.msg});return false}}var l={url:Coomuce.Url.Parametros+"TipoParentescoCUD",data:{nuevos:m,viejos:p,eliminados:a},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(c){k.load()}};Coomuce.Util.EnviarPost(l)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-TipoParentesco-Principal");b.getStore().remove(b.selModel.getSelection())}});Ext.define("CoomuceMod.view.Parametros.ActualizacionBd.TipoParentescoModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-actualizacionbd-tipoparentesco",stores:{getTipoParentesco:{autoLoad:true,model:"CoomuceMod.model.Parametros.ActualizacionBd.TipoParentesco",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetTipoParentescoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Parametros.ActualizacionBd.TipoParentesco",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.ActualizacionBd.TipoParentescoController","CoomuceMod.view.Parametros.ActualizacionBd.TipoParentescoModel"],controller:"parametros-actualizacionbd-tipoparentesco",viewModel:{type:"parametros-actualizacionbd-tipoparentesco"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getTipoParentesco}"},columns:[{dataIndex:"idTipoParentesco",header:"Id",hidden:true},{dataIndex:"codigoTipoParentesco",header:"Código",width:100,editor:{allowBlank:false}},{dataIndex:"nombreTipoParentesco",header:"Nombre",width:300,editor:{allowBlank:false}},{dataIndex:"descripcionTipoParentesco",header:"Descripción",width:300,editor:{allowBlank:true}}],columnLines:true,id:"Grid-TipoParentesco-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Parametros.ActualizacionBd.TipoRegimenController",{extend:"Ext.app.ViewController",alias:"controller.parametros-actualizacionbd-tiporegimen",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var e=Ext.getCmp("Grid-TipoRegimen-Principal").getStore();var d=e.max("idTipoRegimen");var f=[{idTipoRegimen:(d==undefined?1:d+1),codigoTipoRegimen:"",nombreTipoRegimen:""}];e.insert(0,f)},onBotonCancelarClick:function(){Ext.Msg.confirm(this.getTitleView(),"Desea cancelar las modificaciones?",function(d){if(d==="yes"){var e=Ext.getCmp("Grid-TipoRegimen-Principal").getStore();e.rejectChanges();var f=Ext.getCmp("CoomuceTipoRegimen");f.destroy()}})},onBotonGuardarClick:function(){var b=this.getTitleView();Ext.Msg.confirm(b,"Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-TipoRegimen-Principal");var k=r.getStore();var m=[];var p=[];var a=[];var n=[];Ext.each(k.data.items,function(e,d,c){if(e.dirty){if(e.phantom){m.push(e.data)}else{p.push(e.data)}n.push(e)}});Ext.each(k.getRemovedRecords(),function(d,c){if(!d.phantom){a.push(d.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:b,msg:q.msg});return false}}var l={url:Coomuce.Url.Parametros+"TipoRegimenCUD",data:{nuevos:m,viejos:p,eliminados:a},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(c){k.load()}};Coomuce.Util.EnviarPost(l)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-TipoRegimen-Principal");b.getStore().remove(b.selModel.getSelection())}});Ext.define("CoomuceMod.view.Parametros.ActualizacionBd.TipoRegimenModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-actualizacionbd-tiporegimen",stores:{getTipoRegimen:{autoLoad:true,model:"CoomuceMod.model.Parametros.ActualizacionBd.TipoRegimen",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetTipoRegimenAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Parametros.ActualizacionBd.TipoRegimen",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.ActualizacionBd.TipoRegimenController","CoomuceMod.view.Parametros.ActualizacionBd.TipoRegimenModel"],controller:"parametros-actualizacionbd-tiporegimen",viewModel:{type:"parametros-actualizacionbd-tiporegimen"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getTipoRegimen}"},columns:[{dataIndex:"idTipoRegimen",header:"Id",hidden:true},{dataIndex:"codigoTipoRegimen",header:"Código",width:100,editor:{allowBlank:false}},{dataIndex:"nombreTipoRegimen",header:"Nombre",width:300,editor:{allowBlank:false}}],columnLines:true,id:"Grid-TipoRegimen-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Parametros.ActualizacionBd.TipoTramiteController",{extend:"Ext.app.ViewController",alias:"controller.parametros-actualizacionbd-tipotramite",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var e=Ext.getCmp("Grid-TipoTramite-Principal").getStore();var d=e.max("idTipoTramite");var f=[{idTipoTramite:(d==undefined?1:d+1),codigoTipoTramite:"",nombreTipoTramite:""}];e.insert(0,f)},onBotonCancelarClick:function(){Ext.Msg.confirm(this.getTitleView(),"Desea cancelar las modificaciones?",function(d){if(d==="yes"){var e=Ext.getCmp("Grid-TipoTramite-Principal").getStore();e.rejectChanges();var f=Ext.getCmp("CoomuceTipoTramite");f.destroy()}})},onBotonGuardarClick:function(){var b=this.getTitleView();Ext.Msg.confirm(b,"Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-TipoTramite-Principal");var k=r.getStore();var m=[];var p=[];var a=[];var n=[];Ext.each(k.data.items,function(e,d,c){if(e.dirty){if(e.phantom){m.push(e.data)}else{p.push(e.data)}n.push(e)}});Ext.each(k.getRemovedRecords(),function(d,c){if(!d.phantom){a.push(d.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:b,msg:q.msg});return false}}var l={url:Coomuce.Url.Parametros+"TipoTramiteCUD",data:{nuevos:m,viejos:p,eliminados:a},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(c){k.load()}};Coomuce.Util.EnviarPost(l)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-TipoTramite-Principal");b.getStore().remove(b.selModel.getSelection())}});Ext.define("CoomuceMod.view.Parametros.ActualizacionBd.TipoTramiteModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-actualizacionbd-tipotramite",stores:{getTipoTramite:{autoLoad:true,model:"CoomuceMod.model.Parametros.ActualizacionBd.TipoTramite",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetTipoTramiteAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Parametros.ActualizacionBd.TipoTramite",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.ActualizacionBd.TipoTramiteController","CoomuceMod.view.Parametros.ActualizacionBd.TipoTramiteModel"],controller:"parametros-actualizacionbd-tipotramite",viewModel:{type:"parametros-actualizacionbd-tipotramite"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getTipoTramite}"},columns:[{dataIndex:"idTipoTramite",header:"Id",hidden:true},{dataIndex:"codigoTipoTramite",header:"Código",width:100,editor:{allowBlank:false}},{dataIndex:"nombreTipoTramite",header:"Nombre",width:300,editor:{allowBlank:false}}],columnLines:true,id:"Grid-TipoTramite-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.CicloVitalGestanteController",{extend:"Ext.app.ViewController",alias:"controller.parametros-caracterizacionpoblacional-ciclovitalgestante",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonCancelarClick:function(){Ext.Msg.confirm(this.getTitleView(),"Desea cancelar las modificaciones?",function(d){if(d==="yes"){var e=Ext.getCmp("Grid-CicloVitalGestante-Principal").getStore();e.rejectChanges();var f=Ext.getCmp("CoomuceCicloVitalGestante");f.destroy()}})},onBotonGuardarClick:function(){var b=this.getTitleView();Ext.Msg.confirm(b,"Desea guardar las modificaciones?",function(g){if(g==="yes"){var h=Ext.getCmp("Grid-CicloVitalGestante-Principal");var i=h.getStore();var a=[];Ext.each(i.data.items,function(e,d,c){a.push(e.data)});var j={url:Coomuce.Url.Parametros+"PreguntasCicloVitalGestanteCUD",data:{nuevos:a},targetMask:h,msgMask:"Guardando datos...",fnSuccess:function(c){i.load()}};Coomuce.Util.EnviarPost(j)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-CicloVitalGestante-Principal");b.getStore().remove(b.selModel.getSelection())},onSelectCombo:function(j,i,m){var l=this;if(j.loadCombo){var k=l.lookupReference("subFactorRiesgo");var h=k.getStore();h.load({params:{idFactorRiesgo:i.get("idFactorRiesgo")}})}else{var n=Ext.getCmp("Grid-PreguntasSubFactorRiesgo").getStore();n.load({params:{idSubFactorRiesgo:i.get("idSubFactorRiesgo")}})}},onBotonAgregarItemListaClick:function(){var m=this;var p=Ext.getCmp("Grid-CicloVitalGestante-Principal").getStore();var n=p.max("idCicloVitalGestante");var j=m.lookupReference("factorRiesgo");var k=m.lookupReference("subFactorRiesgo");var i=Ext.getCmp("Grid-PreguntasSubFactorRiesgo");var o=i.getSelectionModel().getSelection();var l=[];Ext.each(o,function(a,c,b){n=(n==undefined?1:n+1);l.push({idCicloVitalGestante:n,compFactorRiesgo:j.getRawValue(),compSubFactorRiesgo:k.getRawValue(),idPreguntasSubFactorRiesgo:a.data.idPreguntasSubFactorRiesgo,compPreguntasSubFactorRiesgo:a.data.compPreguntasSubFactorRiesgo})});p.add(l);i.getSelectionModel().deselectAll()}});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.CicloVitalGestanteModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-caracterizacionpoblacional-ciclovitalgestante",stores:{getCicloVitalGestante:{autoLoad:true,fields:[{name:"idCicloVitalGestante",type:"int"},{name:"compFactorRiesgo",type:"string"},{name:"compSubFactorRiesgo",type:"string"},{name:"idPreguntasSubFactorRiesgo",type:"int"},{name:"compPreguntasSubFactorRiesgo",type:"string"}],proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetPreguntasCicloVitalGestanteAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getFactorRiesgo:{autoLoad:true,fields:[{name:"idFactorRiesgo",type:"int"},{name:"codigoFactorRiesgo",type:"string"},{name:"nombreFactorRiesgo",type:"string"},{name:"compFactorRiesgo",convert:function(c,d){return"("+d.get("codigoFactorRiesgo")+") "+d.get("nombreFactorRiesgo")}}],proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetFactorRiesgoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getSubFactorRiesgo:{autoLoad:false,fields:[{name:"idSubFactorRiesgo",type:"int"},{name:"idSubFactorRiesgo",type:"int"},{name:"codigoSubFactorRiesgo",type:"string"},{name:"nombreSubFactorRiesgo",type:"string"},{name:"compSubFactorRiesgo",convert:function(c,d){return"("+d.get("codigoSubFactorRiesgo")+") "+d.get("nombreSubFactorRiesgo")}}],proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetSubFactorRiesgoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getPreguntasSubFactorRiesgo:{autoLoad:false,fields:[{name:"idPreguntasSubFactorRiesgo",type:"int"},{name:"idSubFactorRiesgo",type:"int"},{name:"codigoPreguntasSubFactorRiesgo",type:"string"},{name:"descripcionPreguntasSubFactorRiesgo",type:"string"},{name:"compPreguntasSubFactorRiesgo",convert:function(c,d){return"("+d.get("codigoPreguntasSubFactorRiesgo")+") "+d.get("descripcionPreguntasSubFactorRiesgo")}}],proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetPreguntasSubFactorRiesgoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getPreguntasCicloVital:{autoLoad:false,fields:[{name:"idCicloVital",type:"int"},{name:"compCicloVital",type:"string"},{name:"idTipoSexo",type:"int"},{name:"compTipoSexo",type:"string"},{name:"idPreguntasSubFactorRiesgo",type:"int"},{name:"compPreguntasSubFactorRiesgo",type:"string"}],proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetPreguntasCicloVitalAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.CicloVitalGestante",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.CaracterizacionPoblacional.CicloVitalGestanteController","CoomuceMod.view.Parametros.CaracterizacionPoblacional.CicloVitalGestanteModel"],controller:"parametros-caracterizacionpoblacional-ciclovitalgestante",viewModel:{type:"parametros-caracterizacionpoblacional-ciclovitalgestante"},layout:"border",items:[{items:[{xtype:"combo",bind:{store:"{getFactorRiesgo}"},displayField:"compFactorRiesgo",editable:false,fieldLabel:"Factor de Riesgo",listeners:{select:"onSelectCombo"},loadCombo:true,queryMode:"local",reference:"factorRiesgo",valueField:"idFactorRiesgo",width:350},{xtype:"combo",bind:{store:"{getSubFactorRiesgo}"},displayField:"compSubFactorRiesgo",editable:false,fieldLabel:"Sub-Factor de Riesgo",listeners:{select:"onSelectCombo"},loadCombo:false,queryMode:"local",reference:"subFactorRiesgo",valueField:"idSubFactorRiesgo",width:350},{xtype:"grid",bind:{store:"{getPreguntasSubFactorRiesgo}"},border:true,columns:[{dataIndex:"idPreguntasSubFactorRiesgo",header:"Id",hidden:true},{dataIndex:"idSubFactorRiesgo",header:"Id Sub Factor",hidden:true},{dataIndex:"compPreguntasSubFactorRiesgo",header:"Descripción",width:400}],columnLines:true,height:450,id:"Grid-PreguntasSubFactorRiesgo",loadMask:true,selModel:{type:"checkboxmodel",checkOnly:true},sortableColumns:false}],rbar:{items:[{handler:"onBotonAgregarItemListaClick",iconCls:"x-fa fa-arrow-circle-right",tooltip:"Agregar preguntas seleccionadas a la lista."}],layout:{pack:"center"},ui:"footer"},region:"west",width:500},{xtype:"grid",bind:{store:"{getCicloVitalGestante}"},border:true,columns:[{dataIndex:"idCicloVitalGestante",header:"Id",hidden:true},{dataIndex:"compFactorRiesgo",header:"Factor Riesgo",width:200},{dataIndex:"compSubFactorRiesgo",header:"Sub Factor Riesgo",width:300},{dataIndex:"idPreguntasSubFactorRiesgo",header:"Id Pregunta",hidden:true},{dataIndex:"compPreguntasSubFactorRiesgo",header:"Pregunta",width:400}],columnLines:true,dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],id:"Grid-CicloVitalGestante-Principal",loadMask:true,region:"center",selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.CicloVitalController",{extend:"Ext.app.ViewController",alias:"controller.parametros-caracterizacionpoblacional-ciclovital",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var e=Ext.getCmp("Grid-CicloVital-Principal").getStore();var d=e.max("idCicloVital");var f=[{idCicloVital:(d==undefined?1:d+1),edadMinCicloVital:0,edadMaxCicloVital:0}];e.insert(0,f)},onBotonCancelarClick:function(){Ext.Msg.confirm(this.getTitleView(),"Desea cancelar las modificaciones?",function(d){if(d==="yes"){var e=Ext.getCmp("Grid-CicloVital-Principal").getStore();e.rejectChanges();var f=Ext.getCmp("CoomuceCicloVital");f.destroy()}})},onBotonGuardarClick:function(){var b=this.getTitleView();Ext.Msg.confirm(b,"Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-CicloVital-Principal");var k=r.getStore();var m=[];var p=[];var a=[];var n=[];Ext.each(k.data.items,function(e,d,c){if(e.dirty){if(e.phantom){m.push(e.data)}else{p.push(e.data)}n.push(e)}});Ext.each(k.getRemovedRecords(),function(d,c){if(!d.phantom){a.push(d.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:b,msg:q.msg});return false}}var l={url:Coomuce.Url.Parametros+"CicloVitalCUD",data:{nuevos:m,viejos:p,eliminados:a},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(c){k.load()}};Coomuce.Util.EnviarPost(l)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-CicloVital-Principal");b.getStore().remove(b.selModel.getSelection())}});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.CicloVitalModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-caracterizacionpoblacional-ciclovital",stores:{getCicloVital:{autoLoad:true,model:"CoomuceMod.model.Parametros.CaracterizacionPoblacional.CicloVital",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetCicloVitalAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.CicloVital",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.CaracterizacionPoblacional.CicloVitalController","CoomuceMod.view.Parametros.CaracterizacionPoblacional.CicloVitalModel"],controller:"parametros-caracterizacionpoblacional-ciclovital",viewModel:{type:"parametros-caracterizacionpoblacional-ciclovital"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getCicloVital}"},columns:[{dataIndex:"idCicloVital",header:"Id",hidden:true},{dataIndex:"edadMinCicloVital",header:"Edad Min.",width:150,editor:{xtype:"numberfield",allowBlank:false}},{dataIndex:"edadMaxCicloVital",header:"Edad Max.",width:150,editor:{xtype:"numberfield",allowBlank:false}}],columnLines:true,id:"Grid-CicloVital-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.CondicionesSocioambientales.TipoAnimalController",{extend:"Ext.app.ViewController",alias:"controller.parametros-caracterizacionpoblacional-condicionessocioambientales-tipoanimal",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var e=Ext.getCmp("Grid-TipoAnimal-Principal").getStore();var d=e.max("idTipoAnimal");var f=[{idTipoAnimal:(d==undefined?1:d+1),codigoTipoAnimal:"",nombreTipoAnimal:""}];e.insert(0,f)},onBotonCancelarClick:function(){Ext.Msg.confirm(this.getTitleView(),"Desea cancelar las modificaciones?",function(d){if(d==="yes"){var e=Ext.getCmp("Grid-TipoAnimal-Principal").getStore();e.rejectChanges();var f=Ext.getCmp("CoomuceTipoAnimal");f.destroy()}})},onBotonGuardarClick:function(){var b=this.getTitleView();Ext.Msg.confirm(b,"Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-TipoAnimal-Principal");var k=r.getStore();var m=[];var p=[];var a=[];var n=[];Ext.each(k.data.items,function(e,d,c){if(e.dirty){if(e.phantom){m.push(e.data)}else{p.push(e.data)}n.push(e)}});Ext.each(k.getRemovedRecords(),function(d,c){if(!d.phantom){a.push(d.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:b,msg:q.msg});return false}}var l={url:Coomuce.Url.Parametros+"TipoAnimalCUD",data:{nuevos:m,viejos:p,eliminados:a},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(c){k.load()}};Coomuce.Util.EnviarPost(l)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-TipoAnimal-Principal");b.getStore().remove(b.selModel.getSelection())}});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.CondicionesSocioambientales.TipoAnimalModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-caracterizacionpoblacional-condicionessocioambientales-tipoanimal",stores:{getTipoAnimal:{autoLoad:true,model:"CoomuceMod.model.Parametros.CaracterizacionPoblacional.CondicionesSocioambientales.TipoAnimal",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetTipoAnimalAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.CondicionesSocioambientales.TipoAnimal",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.CaracterizacionPoblacional.CondicionesSocioambientales.TipoAnimalController","CoomuceMod.view.Parametros.CaracterizacionPoblacional.CondicionesSocioambientales.TipoAnimalModel"],controller:"parametros-caracterizacionpoblacional-condicionessocioambientales-tipoanimal",viewModel:{type:"parametros-caracterizacionpoblacional-condicionessocioambientales-tipoanimal"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getTipoAnimal}"},columns:[{dataIndex:"idTipoAnimal",header:"Id",hidden:true},{dataIndex:"codigoTipoAnimal",header:"Código",width:100,editor:{allowBlank:false}},{dataIndex:"nombreTipoAnimal",header:"Nombre",width:300,editor:{allowBlank:false}}],columnLines:true,id:"Grid-TipoAnimal-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.CondicionesVivienda.CondicionViviendaController",{extend:"Ext.app.ViewController",alias:"controller.parametros-caracterizacionpoblacional-condicionesvivienda-condicionvivienda",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var e=Ext.getCmp("Grid-CondicionVivienda-Principal").getStore();var d=e.max("idCondicionVivienda");var f=[{idCondicionVivienda:(d==undefined?1:d+1),nombreCondicionVivienda:""}];e.insert(0,f)},onBotonCancelarClick:function(){Ext.Msg.confirm(this.getTitleView(),"Desea cancelar las modificaciones?",function(d){if(d==="yes"){var e=Ext.getCmp("Grid-CondicionVivienda-Principal").getStore();e.rejectChanges();var f=Ext.getCmp("CoomuceCondicionVivienda");f.destroy()}})},onBotonGuardarClick:function(){var b=this.getTitleView();Ext.Msg.confirm(b,"Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-CondicionVivienda-Principal");var k=r.getStore();var m=[];var p=[];var a=[];var n=[];Ext.each(k.data.items,function(e,d,c){if(e.dirty){if(e.phantom){m.push(e.data)}else{p.push(e.data)}n.push(e)}});Ext.each(k.getRemovedRecords(),function(d,c){if(!d.phantom){a.push(d.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:b,msg:q.msg});return false}}var l={url:Coomuce.Url.Parametros+"CondicionViviendaCUD",data:{nuevos:m,viejos:p,eliminados:a},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(c){k.load()}};Coomuce.Util.EnviarPost(l)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-CondicionVivienda-Principal");b.getStore().remove(b.selModel.getSelection())}});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.CondicionesVivienda.CondicionViviendaModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-caracterizacionpoblacional-condicionesvivienda-condicionvivienda",stores:{getCondicionVivienda:{autoLoad:true,model:"CoomuceMod.model.Parametros.CaracterizacionPoblacional.CondicionesVivienda.CondicionVivienda",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetCondicionViviendaAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.CondicionesVivienda.CondicionVivienda",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.CaracterizacionPoblacional.CondicionesVivienda.CondicionViviendaController","CoomuceMod.view.Parametros.CaracterizacionPoblacional.CondicionesVivienda.CondicionViviendaModel"],controller:"parametros-caracterizacionpoblacional-condicionesvivienda-condicionvivienda",viewModel:{type:"parametros-caracterizacionpoblacional-condicionesvivienda-condicionvivienda"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getCondicionVivienda}"},columns:[{dataIndex:"idCondicionVivienda",header:"Id",hidden:true},{dataIndex:"nombreCondicionVivienda",header:"Nombre",width:300,editor:{allowBlank:false}}],columnLines:true,id:"Grid-CondicionVivienda-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.CondicionesVivienda.DisposicionBasuraController",{extend:"Ext.app.ViewController",alias:"controller.parametros-caracterizacionpoblacional-condicionesvivienda-disposicionbasura",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var e=Ext.getCmp("Grid-DisposicionBasura-Principal").getStore();var d=e.max("idDisposicionBasura");var f=[{idDisposicionBasura:(d==undefined?1:d+1),codigoDisposicionBasura:"",nombreDisposicionBasura:""}];e.insert(0,f)},onBotonCancelarClick:function(){Ext.Msg.confirm(this.getTitleView(),"Desea cancelar las modificaciones?",function(d){if(d==="yes"){var e=Ext.getCmp("Grid-DisposicionBasura-Principal").getStore();e.rejectChanges();var f=Ext.getCmp("CoomuceDisposicionBasura");f.destroy()}})},onBotonGuardarClick:function(){var b=this.getTitleView();Ext.Msg.confirm(b,"Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-DisposicionBasura-Principal");var k=r.getStore();var m=[];var p=[];var a=[];var n=[];Ext.each(k.data.items,function(e,d,c){if(e.dirty){if(e.phantom){m.push(e.data)}else{p.push(e.data)}n.push(e)}});Ext.each(k.getRemovedRecords(),function(d,c){if(!d.phantom){a.push(d.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:b,msg:q.msg});return false}}var l={url:Coomuce.Url.Parametros+"DisposicionBasuraCUD",data:{nuevos:m,viejos:p,eliminados:a},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(c){k.load()}};Coomuce.Util.EnviarPost(l)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-DisposicionBasura-Principal");b.getStore().remove(b.selModel.getSelection())}});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.CondicionesVivienda.DisposicionBasuraModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-caracterizacionpoblacional-condicionesvivienda-disposicionbasura",stores:{getDisposicionBasura:{autoLoad:true,model:"CoomuceMod.model.Parametros.CaracterizacionPoblacional.CondicionesVivienda.DisposicionBasura",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetDisposicionBasuraAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.CondicionesVivienda.DisposicionBasura",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.CaracterizacionPoblacional.CondicionesVivienda.DisposicionBasuraController","CoomuceMod.view.Parametros.CaracterizacionPoblacional.CondicionesVivienda.DisposicionBasuraModel"],controller:"parametros-caracterizacionpoblacional-condicionesvivienda-disposicionbasura",viewModel:{type:"parametros-caracterizacionpoblacional-condicionesvivienda-disposicionbasura"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getDisposicionBasura}"},columns:[{dataIndex:"idDisposicionBasura",header:"Id",hidden:true},{dataIndex:"codigoDisposicionBasura",header:"Código",width:100,editor:{allowBlank:false}},{dataIndex:"nombreDisposicionBasura",header:"Nombre",width:300,editor:{allowBlank:false}}],columnLines:true,id:"Grid-DisposicionBasura-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.CondicionesVivienda.DisposicionExcretaController",{extend:"Ext.app.ViewController",alias:"controller.parametros-caracterizacionpoblacional-condicionesvivienda-disposicionexcreta",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var e=Ext.getCmp("Grid-DisposicionExcreta-Principal").getStore();var d=e.max("idDisposicionExcreta");var f=[{idDisposicionExcreta:(d==undefined?1:d+1),codigoDisposicionExcreta:"",nombreDisposicionExcreta:""}];e.insert(0,f)},onBotonCancelarClick:function(){Ext.Msg.confirm(this.getTitleView(),"Desea cancelar las modificaciones?",function(d){if(d==="yes"){var e=Ext.getCmp("Grid-DisposicionExcreta-Principal").getStore();e.rejectChanges();var f=Ext.getCmp("CoomuceDisposicionExcretas");f.destroy()}})},onBotonGuardarClick:function(){var b=this.getTitleView();Ext.Msg.confirm(b,"Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-DisposicionExcreta-Principal");var k=r.getStore();var m=[];var p=[];var a=[];var n=[];Ext.each(k.data.items,function(e,d,c){if(e.dirty){if(e.phantom){m.push(e.data)}else{p.push(e.data)}n.push(e)}});Ext.each(k.getRemovedRecords(),function(d,c){if(!d.phantom){a.push(d.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:b,msg:q.msg});return false}}var l={url:Coomuce.Url.Parametros+"DisposicionExcretaCUD",data:{nuevos:m,viejos:p,eliminados:a},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(c){k.load()}};Coomuce.Util.EnviarPost(l)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-DisposicionExcreta-Principal");b.getStore().remove(b.selModel.getSelection())}});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.CondicionesVivienda.DisposicionExcretaModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-caracterizacionpoblacional-condicionesvivienda-disposicionexcreta",stores:{getDisposicionExcreta:{autoLoad:true,model:"CoomuceMod.model.Parametros.CaracterizacionPoblacional.CondicionesVivienda.DisposicionExcreta",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetDisposicionExcretaAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.CondicionesVivienda.DisposicionExcreta",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.CaracterizacionPoblacional.CondicionesVivienda.DisposicionExcretaController","CoomuceMod.view.Parametros.CaracterizacionPoblacional.CondicionesVivienda.DisposicionExcretaModel"],controller:"parametros-caracterizacionpoblacional-condicionesvivienda-disposicionexcreta",viewModel:{type:"parametros-caracterizacionpoblacional-condicionesvivienda-disposicionexcreta"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getDisposicionExcreta}"},columns:[{dataIndex:"idDisposicionExcreta",header:"Id",hidden:true},{dataIndex:"codigoDisposicionExcreta",header:"Código",width:100,editor:{allowBlank:false}},{dataIndex:"nombreDisposicionExcreta",header:"Nombre",width:300,editor:{allowBlank:false}}],columnLines:true,id:"Grid-DisposicionExcreta-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.CondicionesVivienda.TenenciaController",{extend:"Ext.app.ViewController",alias:"controller.parametros-caracterizacionpoblacional-condicionesvivienda-tenencia",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var e=Ext.getCmp("Grid-Tenencia-Principal").getStore();var d=e.max("idTenencia");var f=[{idTenencia:(d==undefined?1:d+1),codigoTenencia:"",nombreTenencia:""}];e.insert(0,f)},onBotonCancelarClick:function(){Ext.Msg.confirm(this.getTitleView(),"Desea cancelar las modificaciones?",function(d){if(d==="yes"){var e=Ext.getCmp("Grid-Tenencia-Principal").getStore();e.rejectChanges();var f=Ext.getCmp("CoomuceTenencia");f.destroy()}})},onBotonGuardarClick:function(){var b=this.getTitleView();Ext.Msg.confirm(b,"Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-Tenencia-Principal");var k=r.getStore();var m=[];var p=[];var a=[];var n=[];Ext.each(k.data.items,function(e,d,c){if(e.dirty){if(e.phantom){m.push(e.data)}else{p.push(e.data)}n.push(e)}});Ext.each(k.getRemovedRecords(),function(d,c){if(!d.phantom){a.push(d.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:b,msg:q.msg});return false}}var l={url:Coomuce.Url.Parametros+"TenenciaCUD",data:{nuevos:m,viejos:p,eliminados:a},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(c){k.load()}};Coomuce.Util.EnviarPost(l)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-Tenencia-Principal");b.getStore().remove(b.selModel.getSelection())}});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.CondicionesVivienda.TenenciaModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-caracterizacionpoblacional-condicionesvivienda-tenencia",stores:{getTenencia:{autoLoad:true,model:"CoomuceMod.model.Parametros.CaracterizacionPoblacional.CondicionesVivienda.Tenencia",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetTenenciaAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.CondicionesVivienda.Tenencia",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.CaracterizacionPoblacional.CondicionesVivienda.TenenciaController","CoomuceMod.view.Parametros.CaracterizacionPoblacional.CondicionesVivienda.TenenciaModel"],controller:"parametros-caracterizacionpoblacional-condicionesvivienda-tenencia",viewModel:{type:"parametros-caracterizacionpoblacional-condicionesvivienda-tenencia"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getTenencia}"},columns:[{dataIndex:"idTenencia",header:"Id",hidden:true},{dataIndex:"codigoTenencia",header:"Código",width:100,editor:{allowBlank:false}},{dataIndex:"nombreTenencia",header:"Nombre",width:300,editor:{allowBlank:false}}],columnLines:true,id:"Grid-Tenencia-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.CondicionesVivienda.TipoCombustibleController",{extend:"Ext.app.ViewController",alias:"controller.parametros-caracterizacionpoblacional-condicionesvivienda-tipocombustible",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var e=Ext.getCmp("Grid-TipoCombustible-Principal").getStore();var d=e.max("idTipoCombustible");var f=[{idTipoCombustible:(d==undefined?1:d+1),codigoTipoCombustible:"",nombreTipoCombustible:""}];e.insert(0,f)},onBotonCancelarClick:function(){Ext.Msg.confirm(this.getTitleView(),"Desea cancelar las modificaciones?",function(d){if(d==="yes"){var e=Ext.getCmp("Grid-TipoCombustible-Principal").getStore();e.rejectChanges();var f=Ext.getCmp("CoomuceTipoCombustible");f.destroy()}})},onBotonGuardarClick:function(){var b=this.getTitleView();Ext.Msg.confirm(b,"Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-TipoCombustible-Principal");var k=r.getStore();var m=[];var p=[];var a=[];var n=[];Ext.each(k.data.items,function(e,d,c){if(e.dirty){if(e.phantom){m.push(e.data)}else{p.push(e.data)}n.push(e)}});Ext.each(k.getRemovedRecords(),function(d,c){if(!d.phantom){a.push(d.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:b,msg:q.msg});return false}}var l={url:Coomuce.Url.Parametros+"TipoCombustibleCUD",data:{nuevos:m,viejos:p,eliminados:a},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(c){k.load()}};Coomuce.Util.EnviarPost(l)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-TipoCombustible-Principal");b.getStore().remove(b.selModel.getSelection())}});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.CondicionesVivienda.TipoCombustibleModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-caracterizacionpoblacional-condicionesvivienda-tipocombustible",stores:{getTipoCombustible:{autoLoad:true,model:"CoomuceMod.model.Parametros.CaracterizacionPoblacional.CondicionesVivienda.TipoCombustible",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetTipoCombustibleAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.CondicionesVivienda.TipoCombustible",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.CaracterizacionPoblacional.CondicionesVivienda.TipoCombustibleController","CoomuceMod.view.Parametros.CaracterizacionPoblacional.CondicionesVivienda.TipoCombustibleModel"],controller:"parametros-caracterizacionpoblacional-condicionesvivienda-tipocombustible",viewModel:{type:"parametros-caracterizacionpoblacional-condicionesvivienda-tipocombustible"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getTipoCombustible}"},columns:[{dataIndex:"idTipoCombustible",header:"Id",hidden:true},{dataIndex:"codigoTipoCombustible",header:"Código",width:100,editor:{allowBlank:false}},{dataIndex:"nombreTipoCombustible",header:"Nombre",width:300,editor:{allowBlank:false}}],columnLines:true,id:"Grid-TipoCombustible-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.CondicionesVivienda.TipoViviendaController",{extend:"Ext.app.ViewController",alias:"controller.parametros-caracterizacionpoblacional-condicionesvivienda-tipovivienda",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var e=Ext.getCmp("Grid-TipoVivienda-Principal").getStore();var d=e.max("idTipoVivienda");var f=[{idTipoVivienda:(d==undefined?1:d+1),codigoTipoVivienda:"",nombreTipoVivienda:""}];e.insert(0,f)},onBotonCancelarClick:function(){Ext.Msg.confirm(this.getTitleView(),"Desea cancelar las modificaciones?",function(d){if(d==="yes"){var e=Ext.getCmp("Grid-TipoVivienda-Principal").getStore();e.rejectChanges();var f=Ext.getCmp("CoomuceTipoVivienda");f.destroy()}})},onBotonGuardarClick:function(){var b=this.getTitleView();Ext.Msg.confirm(b,"Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-TipoVivienda-Principal");var k=r.getStore();var m=[];var p=[];var a=[];var n=[];Ext.each(k.data.items,function(e,d,c){if(e.dirty){if(e.phantom){m.push(e.data)}else{p.push(e.data)}n.push(e)}});Ext.each(k.getRemovedRecords(),function(d,c){if(!d.phantom){a.push(d.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:b,msg:q.msg});return false}}var l={url:Coomuce.Url.Parametros+"TipoViviendaCUD",data:{nuevos:m,viejos:p,eliminados:a},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(c){k.load()}};Coomuce.Util.EnviarPost(l)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-TipoVivienda-Principal");b.getStore().remove(b.selModel.getSelection())}});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.CondicionesVivienda.TipoViviendaModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-caracterizacionpoblacional-condicionesvivienda-tipovivienda",stores:{getTipoVivienda:{autoLoad:true,model:"CoomuceMod.model.Parametros.CaracterizacionPoblacional.CondicionesVivienda.TipoVivienda",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetTipoViviendaAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.CondicionesVivienda.TipoVivienda",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.CaracterizacionPoblacional.CondicionesVivienda.TipoViviendaController","CoomuceMod.view.Parametros.CaracterizacionPoblacional.CondicionesVivienda.TipoViviendaModel"],controller:"parametros-caracterizacionpoblacional-condicionesvivienda-tipovivienda",viewModel:{type:"parametros-caracterizacionpoblacional-condicionesvivienda-tipovivienda"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getTipoVivienda}"},columns:[{dataIndex:"idTipoVivienda",header:"Id",hidden:true},{dataIndex:"codigoTipoVivienda",header:"Código",width:100,editor:{allowBlank:false}},{dataIndex:"nombreTipoVivienda",header:"Nombre",width:300,editor:{allowBlank:false}}],columnLines:true,id:"Grid-TipoVivienda-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.CondicionesVivienda.TratamientoAguaController",{extend:"Ext.app.ViewController",alias:"controller.parametros-caracterizacionpoblacional-condicionesvivienda-tratamientoagua",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var e=Ext.getCmp("Grid-TratamientoAgua-Principal").getStore();var d=e.max("idTratamientoAgua");var f=[{idTratamientoAgua:(d==undefined?1:d+1),codigoTratamientoAgua:"",nombreTratamientoAgua:""}];e.insert(0,f)},onBotonCancelarClick:function(){Ext.Msg.confirm(this.getTitleView(),"Desea cancelar las modificaciones?",function(d){if(d==="yes"){var e=Ext.getCmp("Grid-TratamientoAgua-Principal").getStore();e.rejectChanges();var f=Ext.getCmp("CoomuceTratamientoAgua");f.destroy()}})},onBotonGuardarClick:function(){var b=this.getTitleView();Ext.Msg.confirm(b,"Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-TratamientoAgua-Principal");var k=r.getStore();var m=[];var p=[];var a=[];var n=[];Ext.each(k.data.items,function(e,d,c){if(e.dirty){if(e.phantom){m.push(e.data)}else{p.push(e.data)}n.push(e)}});Ext.each(k.getRemovedRecords(),function(d,c){if(!d.phantom){a.push(d.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:b,msg:q.msg});return false}}var l={url:Coomuce.Url.Parametros+"TratamientoAguaCUD",data:{nuevos:m,viejos:p,eliminados:a},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(c){k.load()}};Coomuce.Util.EnviarPost(l)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-TratamientoAgua-Principal");b.getStore().remove(b.selModel.getSelection())}});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.CondicionesVivienda.TratamientoAguaModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-caracterizacionpoblacional-condicionesvivienda-tratamientoagua",stores:{getTratamientoAgua:{autoLoad:true,model:"CoomuceMod.model.Parametros.CaracterizacionPoblacional.CondicionesVivienda.TratamientoAgua",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetTratamientoAguaAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.CondicionesVivienda.TratamientoAgua",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.CaracterizacionPoblacional.CondicionesVivienda.TratamientoAguaController","CoomuceMod.view.Parametros.CaracterizacionPoblacional.CondicionesVivienda.TratamientoAguaModel"],controller:"parametros-caracterizacionpoblacional-condicionesvivienda-tratamientoagua",viewModel:{type:"parametros-caracterizacionpoblacional-condicionesvivienda-tratamientoagua"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getTratamientoAgua}"},columns:[{dataIndex:"idTratamientoAgua",header:"Id",hidden:true},{dataIndex:"codigoTratamientoAgua",header:"Código",width:100,editor:{allowBlank:false}},{dataIndex:"nombreTratamientoAgua",header:"Nombre",width:300,editor:{allowBlank:false}}],columnLines:true,id:"Grid-TratamientoAgua-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.FactorRiesgoController",{extend:"Ext.app.ViewController",alias:"controller.parametros-caracterizacionpoblacional-factorriesgo",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var e=Ext.getCmp("Grid-FactorRiesgo-Principal").getStore();var d=e.max("idFactorRiesgo");var f=[{idFactorRiesgo:(d==undefined?1:d+1),codigoFactorRiesgo:"",nombreFactorRiesgo:""}];e.insert(0,f)},onBotonCancelarClick:function(){Ext.Msg.confirm(this.getTitleView(),"Desea cancelar las modificaciones?",function(d){if(d==="yes"){var e=Ext.getCmp("Grid-FactorRiesgo-Principal").getStore();e.rejectChanges();var f=Ext.getCmp("CoomuceFactorRiesgo");f.destroy()}})},onBotonGuardarClick:function(){var b=this.getTitleView();Ext.Msg.confirm(b,"Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-FactorRiesgo-Principal");var k=r.getStore();var m=[];var p=[];var a=[];var n=[];Ext.each(k.data.items,function(e,d,c){if(e.dirty){if(e.phantom){m.push(e.data)}else{p.push(e.data)}n.push(e)}});Ext.each(k.getRemovedRecords(),function(d,c){if(!d.phantom){a.push(d.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:b,msg:q.msg});return false}}var l={url:Coomuce.Url.Parametros+"FactorRiesgoCUD",data:{nuevos:m,viejos:p,eliminados:a},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(c){k.load()}};Coomuce.Util.EnviarPost(l)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-FactorRiesgo-Principal");b.getStore().remove(b.selModel.getSelection())}});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.FactorRiesgoModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-caracterizacionpoblacional-factorriesgo",stores:{getFactorRiesgo:{autoLoad:true,model:"CoomuceMod.model.Parametros.CaracterizacionPoblacional.FactorRiesgo",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetFactorRiesgoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.FactorRiesgo",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.CaracterizacionPoblacional.FactorRiesgoController","CoomuceMod.view.Parametros.CaracterizacionPoblacional.FactorRiesgoModel"],controller:"parametros-caracterizacionpoblacional-factorriesgo",viewModel:{type:"parametros-caracterizacionpoblacional-factorriesgo"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getFactorRiesgo}"},columns:[{dataIndex:"idFactorRiesgo",header:"Id",hidden:true},{dataIndex:"codigoFactorRiesgo",header:"Código",width:100,editor:{allowBlank:false}},{dataIndex:"nombreFactorRiesgo",header:"Nombre",width:300,editor:{allowBlank:false}}],columnLines:true,id:"Grid-FactorRiesgo-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.NivelEducativoController",{extend:"Ext.app.ViewController",alias:"controller.parametros-caracterizacionpoblacional-niveleducativo",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var e=Ext.getCmp("Grid-NivelEducativo-Principal").getStore();var d=e.max("idNivelEducativo");var f=[{idNivelEducativo:(d==undefined?1:d+1),codigoNivelEducativo:"",nombreNivelEducativo:""}];e.insert(0,f)},onBotonCancelarClick:function(){Ext.Msg.confirm(this.getTitleView(),"Desea cancelar las modificaciones?",function(d){if(d==="yes"){var e=Ext.getCmp("Grid-NivelEducativo-Principal").getStore();e.rejectChanges();var f=Ext.getCmp("CoomuceNivelEducativo");f.destroy()}})},onBotonGuardarClick:function(){var b=this.getTitleView();Ext.Msg.confirm(b,"Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-NivelEducativo-Principal");var k=r.getStore();var m=[];var p=[];var a=[];var n=[];Ext.each(k.data.items,function(e,d,c){if(e.dirty){if(e.phantom){m.push(e.data)}else{p.push(e.data)}n.push(e)}});Ext.each(k.getRemovedRecords(),function(d,c){if(!d.phantom){a.push(d.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:b,msg:q.msg});return false}}var l={url:Coomuce.Url.Parametros+"NivelEducativoCUD",data:{nuevos:m,viejos:p,eliminados:a},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(c){k.load()}};Coomuce.Util.EnviarPost(l)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-NivelEducativo-Principal");b.getStore().remove(b.selModel.getSelection())}});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.NivelEducativoModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-caracterizacionpoblacional-niveleducativo",stores:{getNivelEducativo:{autoLoad:true,model:"CoomuceMod.model.Parametros.CaracterizacionPoblacional.NivelEducativo",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetNivelEducativoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.NivelEducativo",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.CaracterizacionPoblacional.NivelEducativoController","CoomuceMod.view.Parametros.CaracterizacionPoblacional.NivelEducativoModel"],controller:"parametros-caracterizacionpoblacional-niveleducativo",viewModel:{type:"parametros-caracterizacionpoblacional-niveleducativo"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getNivelEducativo}"},columns:[{dataIndex:"idNivelEducativo",header:"Id",hidden:true},{dataIndex:"codigoNivelEducativo",header:"Código",width:100,editor:{allowBlank:false}},{dataIndex:"nombreNivelEducativo",header:"Nombre",width:300,editor:{allowBlank:false}}],columnLines:true,id:"Grid-NivelEducativo-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.PreguntasCicloVitalController",{extend:"Ext.app.ViewController",alias:"controller.parametros-caracterizacionpoblacional-preguntasciclovital",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonCancelarClick:function(){Ext.Msg.confirm(this.getTitleView(),"Desea cancelar las modificaciones?",function(d){if(d==="yes"){var e=Ext.getCmp("Grid-PreguntasCicloVital-Principal").getStore();e.rejectChanges();var f=Ext.getCmp("CoomucePreguntasCicloVital");f.destroy()}})},onBotonGuardarClick:function(){var c=this;var d=c.getTitleView();Ext.Msg.confirm(d,"Desea guardar las modificaciones?",function(j){if(j==="yes"){var a=c.lookupReference("idCicloVital");var b=c.lookupReference("idTipoSexo");var k=Ext.getCmp("Grid-PreguntasCicloVital-Principal");var l=k.getStore();var n=[];Ext.each(l.data.items,function(g,f,e){n.push(g.data)});var m={url:Coomuce.Url.Parametros+"PreguntasCicloVitalCUD",data:{idCicloVital:a.getValue(),idTipoSexo:b.getValue(),nuevos:n},targetMask:k,msgMask:"Guardando datos...",fnSuccess:function(e){l.load()}};Coomuce.Util.EnviarPost(m)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-PreguntasCicloVital-Principal");b.getStore().remove(b.selModel.getSelection())},onSelectCombo:function(p,n,m){var k=this;if(p.loadCombo){var q=k.lookupReference("subFactorRiesgo");var j=q.getStore();j.load({params:{idFactorRiesgo:n.get("idFactorRiesgo")}})}else{if(p.gridCiclo){var r=k.lookupReference("idCicloVital");var o=k.lookupReference("idTipoSexo");var l=Ext.getCmp("Grid-PreguntasCicloVital-Principal").getStore();l.load({params:{idCicloVital:r.getValue(),idTipoSexo:o.getValue()}})}else{var l=Ext.getCmp("Grid-PreguntasSubFactorRiesgo").getStore();l.load({params:{idSubFactorRiesgo:n.get("idSubFactorRiesgo")}})}}},onBotonAgregarSeleccionClick:function(){var j=this;var i=j.lookupReference("idCicloVital");var f=j.lookupReference("idTipoSexo");var g=Ext.getCmp("Grid-PreguntasSubFactorRiesgo").selModel.getSelection();var h=[];Ext.each(g,function(a,c,b){h.push({idCicloVital:i.getValue(),compCicloVital:i.getRawValue(),idTipoSexo:f.getValue(),compTipoSexo:f.getRawValue(),idPreguntasSubFactorRiesgo:a.data.idPreguntasSubFactorRiesgo,compPreguntasSubFactorRiesgo:a.data.compPreguntasSubFactorRiesgo})});Ext.getCmp("Grid-PreguntasCicloVital-Principal").getStore().insert(0,h)}});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.PreguntasCicloVitalModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-caracterizacionpoblacional-preguntasciclovital",stores:{getTipoSexo:{autoLoad:true,fields:[{name:"idTipoSexo",type:"int"},{name:"codigoTipoSexo",type:"string"},{name:"nombreTipoSexo",type:"string"},{name:"compTipoSexo",convert:function(c,d){return"("+d.get("codigoTipoSexo")+") "+d.get("nombreTipoSexo")}}],proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetTipoSexoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getCicloVital:{autoLoad:true,fields:[{name:"idCicloVital",type:"int"},{name:"edadMinCicloVital",type:"int"},{name:"edadMaxCicloVital",type:"int"},{name:"compCicloVital",convert:function(c,d){return d.get("edadMinCicloVital")+" - "+d.get("edadMaxCicloVital")}}],proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetCicloVitalAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getFactorRiesgo:{autoLoad:true,fields:[{name:"idFactorRiesgo",type:"int"},{name:"codigoFactorRiesgo",type:"string"},{name:"nombreFactorRiesgo",type:"string"},{name:"compFactorRiesgo",convert:function(c,d){return"("+d.get("codigoFactorRiesgo")+") "+d.get("nombreFactorRiesgo")}}],proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetFactorRiesgoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getSubFactorRiesgo:{autoLoad:false,fields:[{name:"idSubFactorRiesgo",type:"int"},{name:"idSubFactorRiesgo",type:"int"},{name:"codigoSubFactorRiesgo",type:"string"},{name:"nombreSubFactorRiesgo",type:"string"},{name:"compSubFactorRiesgo",convert:function(c,d){return"("+d.get("codigoSubFactorRiesgo")+") "+d.get("nombreSubFactorRiesgo")}}],proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetSubFactorRiesgoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getPreguntasSubFactorRiesgo:{autoLoad:false,fields:[{name:"idPreguntasSubFactorRiesgo",type:"int"},{name:"idSubFactorRiesgo",type:"int"},{name:"codigoPreguntasSubFactorRiesgo",type:"string"},{name:"descripcionPreguntasSubFactorRiesgo",type:"string"},{name:"compPreguntasSubFactorRiesgo",convert:function(c,d){return"("+d.get("codigoPreguntasSubFactorRiesgo")+") "+d.get("descripcionPreguntasSubFactorRiesgo")}}],proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetPreguntasSubFactorRiesgoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getPreguntasCicloVital:{autoLoad:false,fields:[{name:"idCicloVital",type:"int"},{name:"compCicloVital",type:"string"},{name:"idTipoSexo",type:"int"},{name:"compTipoSexo",type:"string"},{name:"idPreguntasSubFactorRiesgo",type:"int"},{name:"compPreguntasSubFactorRiesgo",type:"string"}],proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetPreguntasCicloVitalAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.PreguntasCicloVital",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.CaracterizacionPoblacional.PreguntasCicloVitalController","CoomuceMod.view.Parametros.CaracterizacionPoblacional.PreguntasCicloVitalModel"],controller:"parametros-caracterizacionpoblacional-preguntasciclovital",viewModel:{type:"parametros-caracterizacionpoblacional-preguntasciclovital"},layout:"border",items:[{bbar:{items:[{text:"Agregar selecciones",handler:"onBotonAgregarSeleccionClick"}]},items:[{bodyPadding:10,border:true,defaults:{anchor:"90%"},items:[{xtype:"combo",bind:{store:"{getCicloVital}"},displayField:"compCicloVital",editable:false,fieldLabel:"Ciclo Vital",gridCiclo:true,listeners:{select:"onSelectCombo"},queryMode:"local",reference:"idCicloVital",valueField:"idCicloVital"},{xtype:"combo",bind:{store:"{getTipoSexo}"},displayField:"compTipoSexo",editable:false,fieldLabel:"Sexo",gridCiclo:true,listeners:{select:"onSelectCombo"},queryMode:"local",reference:"idTipoSexo",valueField:"idTipoSexo"}],region:"west",width:350},{xtype:"grid",bind:{store:"{getPreguntasSubFactorRiesgo}"},border:true,columns:[{dataIndex:"idPreguntasSubFactorRiesgo",header:"Id",hidden:true},{dataIndex:"idSubFactorRiesgo",header:"Id Sub Factor",hidden:true},{dataIndex:"codigoPreguntasSubFactorRiesgo",header:"Código",width:100},{dataIndex:"descripcionPreguntasSubFactorRiesgo",header:"Descripción",width:400}],columnLines:true,dockedItems:[{xtype:"toolbar",dock:"top",ui:"footer",items:[{xtype:"combo",bind:{store:"{getFactorRiesgo}"},displayField:"compFactorRiesgo",editable:false,fieldLabel:"Factor de Riesgo",listeners:{select:"onSelectCombo"},loadCombo:true,queryMode:"local",reference:"factorRiesgo",valueField:"idFactorRiesgo",width:350},{xtype:"combo",bind:{store:"{getSubFactorRiesgo}"},displayField:"compSubFactorRiesgo",editable:false,fieldLabel:"Sub-Factor de Riesgo",listeners:{select:"onSelectCombo"},loadCombo:false,queryMode:"local",reference:"subFactorRiesgo",valueField:"idSubFactorRiesgo",width:350}]}],id:"Grid-PreguntasSubFactorRiesgo",loadMask:true,region:"center",selModel:{type:"checkboxmodel",checkOnly:true},sortableColumns:false}],layout:"border",region:"center"},{xtype:"grid",bind:{store:"{getPreguntasCicloVital}"},border:true,columns:[{dataIndex:"idCicloVital",header:"Id Ciclo",hidden:true},{dataIndex:"compCicloVital",header:"Ciclo Vital",width:200},{dataIndex:"idTipoSexo",header:"Id Sexo",hidden:true},{dataIndex:"compTipoSexo",header:"Sexo",width:150},{dataIndex:"idPreguntasSubFactorRiesgo",header:"Id Pregunta",hidden:true},{dataIndex:"compPreguntasSubFactorRiesgo",header:"Pregunta",width:450}],columnLines:true,dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],height:400,id:"Grid-PreguntasCicloVital-Principal",loadMask:true,region:"south",selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.PreguntasSubFactorRiesgoController",{extend:"Ext.app.ViewController",alias:"controller.parametros-caracterizacionpoblacional-preguntassubfactorriesgo",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var k=this;var j=k.lookupReference("subFactorRiesgo");var g=Ext.getCmp("Grid-PreguntasSubFactorRiesgo-Principal").getStore();var h=g.max("idPreguntasSubFactorRiesgo");var l=g.identity;if(h>l){l=h}var i=[{idPreguntasSubFactorRiesgo:(l==undefined?1:l+1),idSubFactorRiesgo:j.getValue(),codigoPreguntasSubFactorRiesgo:"",nombrePreguntasSubFactorRiesgo:""}];g.insert(0,i)},onBotonCancelarClick:function(){Ext.Msg.confirm(this.getTitleView(),"Desea cancelar las modificaciones?",function(d){if(d==="yes"){var e=Ext.getCmp("Grid-PreguntasSubFactorRiesgo-Principal").getStore();e.rejectChanges();var f=Ext.getCmp("CoomucePreguntasSubFactorRiesgo");f.destroy()}})},onBotonGuardarClick:function(){var d=this;var f=d.lookupReference("subFactorRiesgo");var e=d.getTitleView();Ext.Msg.confirm(e,"Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-PreguntasSubFactorRiesgo-Principal");var b=r.getStore();var m=[];var p=[];var a=[];var n=[];Ext.each(b.data.items,function(g,i,h){if(g.dirty){if(g.phantom){m.push(g.data)}else{p.push(g.data)}n.push(g)}});Ext.each(b.getRemovedRecords(),function(g,h){if(!g.phantom){a.push(g.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:e,msg:q.msg});return false}}var c={url:Coomuce.Url.Parametros+"PreguntasSubFactorRiesgoCUD",data:{nuevos:m,viejos:p,eliminados:a},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(g){b.load({params:{idSubFactorRiesgo:f.getValue()}})}};Coomuce.Util.EnviarPost(c)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-PreguntasSubFactorRiesgo-Principal");b.getStore().remove(b.selModel.getSelection())},onSelectCombo:function(j,i,m){var l=this;if(j.loadCombo){var k=l.lookupReference("subFactorRiesgo");var h=k.getStore();h.load({params:{idFactorRiesgo:i.get("idFactorRiesgo")}})}else{var n=Ext.getCmp("Grid-PreguntasSubFactorRiesgo-Principal").getStore();n.load({params:{idSubFactorRiesgo:i.get("idSubFactorRiesgo")}})}}});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.PreguntasSubFactorRiesgoModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-caracterizacionpoblacional-preguntassubfactorriesgo",stores:{getFactorRiesgo:{autoLoad:true,model:"CoomuceMod.model.Parametros.CaracterizacionPoblacional.FactorRiesgo",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetFactorRiesgoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getSubFactorRiesgo:{autoLoad:false,model:"CoomuceMod.model.Parametros.CaracterizacionPoblacional.SubFactorRiesgo",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetSubFactorRiesgoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getPreguntasSubFactorRiesgo:{autoLoad:false,model:"CoomuceMod.model.Parametros.CaracterizacionPoblacional.PreguntasSubFactorRiesgo",listeners:{load:function(l,g,i,h,j){if(h._response!=null){var k=Ext.decode(h._response.responseText);l.identity=k.identity}}},identity:0,proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetPreguntasSubFactorRiesgoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.PreguntasSubFactorRiesgo",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.CaracterizacionPoblacional.PreguntasSubFactorRiesgoController","CoomuceMod.view.Parametros.CaracterizacionPoblacional.PreguntasSubFactorRiesgoModel"],controller:"parametros-caracterizacionpoblacional-preguntassubfactorriesgo",viewModel:{type:"parametros-caracterizacionpoblacional-preguntassubfactorriesgo"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{xtype:"combo",bind:{store:"{getFactorRiesgo}"},displayField:"compFactorRiesgo",editable:false,fieldLabel:"Factor de Riesgo",listeners:{select:"onSelectCombo"},loadCombo:true,queryMode:"local",reference:"factorRiesgo",valueField:"idFactorRiesgo",width:350},{xtype:"combo",bind:{store:"{getSubFactorRiesgo}"},displayField:"compSubFactorRiesgo",editable:false,fieldLabel:"Sub-Factor de Riesgo",listeners:{select:"onSelectCombo"},loadCombo:false,queryMode:"local",reference:"subFactorRiesgo",valueField:"idSubFactorRiesgo",width:350}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getPreguntasSubFactorRiesgo}"},columns:[{dataIndex:"idPreguntasSubFactorRiesgo",header:"Id",hidden:true},{dataIndex:"idSubFactorRiesgo",header:"Id Sub Factor",hidden:true},{dataIndex:"codigoPreguntasSubFactorRiesgo",header:"Código",width:100,editor:{allowBlank:false}},{dataIndex:"descripcionPreguntasSubFactorRiesgo",header:"Descripción",width:400,editor:{allowBlank:false}}],columnLines:true,id:"Grid-PreguntasSubFactorRiesgo-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.ProcedenciaController",{extend:"Ext.app.ViewController",alias:"controller.parametros-caracterizacionpoblacional-procedencia",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var e=Ext.getCmp("Grid-Procedencia-Principal").getStore();var d=e.max("idProcedencia");var f=[{idProcedencia:(d==undefined?1:d+1),codigoProcedencia:"",nombreProcedencia:""}];e.insert(0,f)},onBotonCancelarClick:function(){Ext.Msg.confirm(this.getTitleView(),"Desea cancelar las modificaciones?",function(d){if(d==="yes"){var e=Ext.getCmp("Grid-Procedencia-Principal").getStore();e.rejectChanges();var f=Ext.getCmp("CoomuceProcedencia");f.destroy()}})},onBotonGuardarClick:function(){var b=this.getTitleView();Ext.Msg.confirm(b,"Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-Procedencia-Principal");var k=r.getStore();var m=[];var p=[];var a=[];var n=[];Ext.each(k.data.items,function(e,d,c){if(e.dirty){if(e.phantom){m.push(e.data)}else{p.push(e.data)}n.push(e)}});Ext.each(k.getRemovedRecords(),function(d,c){if(!d.phantom){a.push(d.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:b,msg:q.msg});return false}}var l={url:Coomuce.Url.Parametros+"ProcedenciaCUD",data:{nuevos:m,viejos:p,eliminados:a},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(c){k.load()}};Coomuce.Util.EnviarPost(l)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-Procedencia-Principal");b.getStore().remove(b.selModel.getSelection())}});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.ProcedenciaModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-caracterizacionpoblacional-procedencia",stores:{getProcedencia:{autoLoad:true,model:"CoomuceMod.model.Parametros.CaracterizacionPoblacional.Procedencia",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetProcedenciaAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.Procedencia",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.CaracterizacionPoblacional.ProcedenciaController","CoomuceMod.view.Parametros.CaracterizacionPoblacional.ProcedenciaModel"],controller:"parametros-caracterizacionpoblacional-procedencia",viewModel:{type:"parametros-caracterizacionpoblacional-procedencia"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getProcedencia}"},columns:[{dataIndex:"idProcedencia",header:"Id",hidden:true},{dataIndex:"codigoProcedencia",header:"Código",width:100,editor:{allowBlank:false}},{dataIndex:"nombreProcedencia",header:"Nombre",width:300,editor:{allowBlank:false}}],columnLines:true,id:"Grid-Procedencia-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.SubFactorRiesgoController",{extend:"Ext.app.ViewController",alias:"controller.parametros-caracterizacionpoblacional-subfactorriesgo",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var j=this;var g=j.lookupReference("factorRiesgo");var l=Ext.getCmp("Grid-SubFactorRiesgo-Principal").getStore();var h=l.max("idSubFactorRiesgo");var k=l.identity;if(h>k){k=h}var i=[{idSubFactorRiesgo:(k==undefined?1:k+1),idFactorRiesgo:g.getValue(),codigoSubFactorRiesgo:"",nombreSubFactorRiesgo:""}];l.insert(0,i)},onBotonCancelarClick:function(){Ext.Msg.confirm(this.getTitleView(),"Desea cancelar las modificaciones?",function(d){if(d==="yes"){var e=Ext.getCmp("Grid-SubFactorRiesgo-Principal").getStore();e.rejectChanges();var f=Ext.getCmp("CoomuceSubFactorRiesgo");f.destroy()}})},onBotonGuardarClick:function(){var f=this;var e=f.lookupReference("factorRiesgo");var d=f.getTitleView();Ext.Msg.confirm(d,"Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-SubFactorRiesgo-Principal");var b=r.getStore();var m=[];var p=[];var a=[];var n=[];Ext.each(b.data.items,function(g,i,h){if(g.dirty){if(g.phantom){m.push(g.data)}else{p.push(g.data)}n.push(g)}});Ext.each(b.getRemovedRecords(),function(g,h){if(!g.phantom){a.push(g.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:d,msg:q.msg});return false}}var c={url:Coomuce.Url.Parametros+"SubFactorRiesgoCUD",data:{nuevos:m,viejos:p,eliminados:a},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(g){b.load({params:{idFactorRiesgo:e.getValue()}})}};Coomuce.Util.EnviarPost(c)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-SubFactorRiesgo-Principal");b.getStore().remove(b.selModel.getSelection())},onSelectCombo:function(g,f,h){var e=Ext.getCmp("Grid-SubFactorRiesgo-Principal").getStore();e.load({params:{idFactorRiesgo:f.get("idFactorRiesgo")}})}});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.SubFactorRiesgoModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-caracterizacionpoblacional-subfactorriesgo",stores:{getFactorRiesgo:{autoLoad:true,model:"CoomuceMod.model.Parametros.CaracterizacionPoblacional.FactorRiesgo",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetFactorRiesgoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getSubFactorRiesgo:{autoLoad:false,model:"CoomuceMod.model.Parametros.CaracterizacionPoblacional.SubFactorRiesgo",listeners:{load:function(l,g,i,h,j){if(h._response!=null){var k=Ext.decode(h._response.responseText);l.identity=k.identity}}},identity:0,proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetSubFactorRiesgoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Parametros.CaracterizacionPoblacional.SubFactorRiesgo",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.CaracterizacionPoblacional.SubFactorRiesgoController","CoomuceMod.view.Parametros.CaracterizacionPoblacional.SubFactorRiesgoModel"],controller:"parametros-caracterizacionpoblacional-subfactorriesgo",viewModel:{type:"parametros-caracterizacionpoblacional-subfactorriesgo"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{xtype:"combo",bind:{store:"{getFactorRiesgo}"},displayField:"compFactorRiesgo",editable:false,fieldLabel:"Factor de Riesgo",listeners:{select:"onSelectCombo"},queryMode:"local",reference:"factorRiesgo",valueField:"idFactorRiesgo",width:350}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getSubFactorRiesgo}"},columns:[{dataIndex:"idSubFactorRiesgo",header:"Id",hidden:true},{dataIndex:"idFactorRiesgo",header:"Id Factor",hidden:true},{dataIndex:"codigoSubFactorRiesgo",header:"Código",width:100,editor:{allowBlank:false}},{dataIndex:"nombreSubFactorRiesgo",header:"Nombre",width:300,editor:{allowBlank:false}}],columnLines:true,id:"Grid-SubFactorRiesgo-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Parametros.DemandaInducida.GrupoInteresController",{extend:"Ext.app.ViewController",alias:"controller.parametros-demandainducida-grupointeres",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var e=Ext.getCmp("Grid-GrupoInteres-Principal").getStore();var d=e.max("idGrupoInteres");var f=[{idGrupoInteres:(d==undefined?1:d+1),codigoGrupoInteres:"",descripcionGrupoInteres:""}];e.insert(0,f)},onBotonCancelarClick:function(){Ext.Msg.confirm(this.getTitleView(),"Desea cancelar las modificaciones?",function(d){if(d==="yes"){var e=Ext.getCmp("Grid-GrupoInteres-Principal").getStore();e.rejectChanges();var f=Ext.getCmp("CoomuceGrupoInteres");f.destroy()}})},onBotonGuardarClick:function(){var b=this.getTitleView();Ext.Msg.confirm(b,"Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-GrupoInteres-Principal");var k=r.getStore();var m=[];var p=[];var a=[];var n=[];Ext.each(k.data.items,function(e,d,c){if(e.dirty){if(e.phantom){m.push(e.data)}else{p.push(e.data)}n.push(e)}});Ext.each(k.getRemovedRecords(),function(d,c){if(!d.phantom){a.push(d.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:b,msg:q.msg});return false}}var l={url:Coomuce.Url.Parametros+"GrupoInteresCUD",data:{nuevos:m,viejos:p,eliminados:a},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(c){k.load()}};Coomuce.Util.EnviarPost(l)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-GrupoInteres-Principal");b.getStore().remove(b.selModel.getSelection())}});Ext.define("CoomuceMod.view.Parametros.DemandaInducida.GrupoInteresModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-demandainducida-grupointeres",stores:{getGrupoInteres:{autoLoad:true,model:"CoomuceMod.model.Parametros.DemandaInducida.GrupoInteres",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetGrupoInteresAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Parametros.DemandaInducida.GrupoInteres",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.DemandaInducida.GrupoInteresController","CoomuceMod.view.Parametros.DemandaInducida.GrupoInteresModel"],controller:"parametros-demandainducida-grupointeres",viewModel:{type:"parametros-demandainducida-grupointeres"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getGrupoInteres}"},columns:[{dataIndex:"idGrupoInteres",header:"Id",hidden:true},{dataIndex:"codigoGrupoInteres",header:"Código",width:100,editor:{allowBlank:false}},{dataIndex:"descripcionGrupoInteres",header:"Descripción",width:300,editor:{allowBlank:false}}],columnLines:true,id:"Grid-GrupoInteres-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Parametros.DemandaInducida.MotivoConsultaController",{extend:"Ext.app.ViewController",alias:"controller.parametros-demandainducida-motivoconsulta",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var e=Ext.getCmp("Grid-MotivoConsulta-Principal").getStore();var d=e.max("idMotivoConsulta");var f=[{idMotivoConsulta:(d==undefined?1:d+1),codigoMotivoConsulta:"",descripcionMotivoConsulta:""}];e.insert(0,f)},onBotonCancelarClick:function(){Ext.Msg.confirm(this.getTitleView(),"Desea cancelar las modificaciones?",function(d){if(d==="yes"){var e=Ext.getCmp("Grid-MotivoConsulta-Principal").getStore();e.rejectChanges();var f=Ext.getCmp("CoomuceMotivoConsulta");f.destroy()}})},onBotonGuardarClick:function(){var b=this.getTitleView();Ext.Msg.confirm(b,"Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-MotivoConsulta-Principal");var k=r.getStore();var m=[];var p=[];var a=[];var n=[];Ext.each(k.data.items,function(e,d,c){if(e.dirty){if(e.phantom){m.push(e.data)}else{p.push(e.data)}n.push(e)}});Ext.each(k.getRemovedRecords(),function(d,c){if(!d.phantom){a.push(d.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:b,msg:q.msg});return false}}var l={url:Coomuce.Url.Parametros+"MotivoConsultaCUD",data:{nuevos:m,viejos:p,eliminados:a},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(c){k.load()}};Coomuce.Util.EnviarPost(l)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-MotivoConsulta-Principal");b.getStore().remove(b.selModel.getSelection())}});Ext.define("CoomuceMod.view.Parametros.DemandaInducida.MotivoConsultaModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-demandainducida-motivoconsulta",stores:{getMotivoConsulta:{autoLoad:true,model:"CoomuceMod.model.Parametros.DemandaInducida.MotivoConsulta",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetMotivoConsultaAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Parametros.DemandaInducida.MotivoConsulta",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.DemandaInducida.MotivoConsultaController","CoomuceMod.view.Parametros.DemandaInducida.MotivoConsultaModel"],controller:"parametros-demandainducida-motivoconsulta",viewModel:{type:"parametros-demandainducida-motivoconsulta"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getMotivoConsulta}"},columns:[{dataIndex:"idMotivoConsulta",header:"Id",hidden:true},{dataIndex:"codigoMotivoConsulta",header:"Código",width:100,editor:{allowBlank:false}},{dataIndex:"descripcionMotivoConsulta",header:"Descripción",width:300,editor:{allowBlank:false}}],columnLines:true,id:"Grid-MotivoConsulta-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Parametros.DemandaInducida.MotivoContactoController",{extend:"Ext.app.ViewController",alias:"controller.parametros-demandainducida-motivocontacto",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var e=Ext.getCmp("Grid-MotivoContacto-Principal").getStore();var d=e.max("idMotivoContacto");var f=[{idMotivoContacto:(d==undefined?1:d+1),codigoMotivoContacto:"",descripcionMotivoContacto:""}];e.insert(0,f)},onBotonCancelarClick:function(){Ext.Msg.confirm(this.getTitleView(),"Desea cancelar las modificaciones?",function(d){if(d==="yes"){var e=Ext.getCmp("Grid-MotivoContacto-Principal").getStore();e.rejectChanges();var f=Ext.getCmp("CoomuceMotivoContacto");f.destroy()}})},onBotonGuardarClick:function(){var b=this.getTitleView();Ext.Msg.confirm(b,"Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-MotivoContacto-Principal");var k=r.getStore();var m=[];var p=[];var a=[];var n=[];Ext.each(k.data.items,function(e,d,c){if(e.dirty){if(e.phantom){m.push(e.data)}else{p.push(e.data)}n.push(e)}});Ext.each(k.getRemovedRecords(),function(d,c){if(!d.phantom){a.push(d.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:b,msg:q.msg});return false}}var l={url:Coomuce.Url.Parametros+"MotivoContactoCUD",data:{nuevos:m,viejos:p,eliminados:a},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(c){k.load()}};Coomuce.Util.EnviarPost(l)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-MotivoContacto-Principal");b.getStore().remove(b.selModel.getSelection())}});Ext.define("CoomuceMod.view.Parametros.DemandaInducida.MotivoContactoModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-demandainducida-motivocontacto",stores:{getMotivoContacto:{autoLoad:true,model:"CoomuceMod.model.Parametros.DemandaInducida.MotivoContacto",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetMotivoContactoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Parametros.DemandaInducida.MotivoContacto",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.DemandaInducida.MotivoContactoController","CoomuceMod.view.Parametros.DemandaInducida.MotivoContactoModel"],controller:"parametros-demandainducida-motivocontacto",viewModel:{type:"parametros-demandainducida-motivocontacto"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getMotivoContacto}"},columns:[{dataIndex:"idMotivoContacto",header:"Id",hidden:true},{dataIndex:"codigoMotivoContacto",header:"Código",width:100,editor:{allowBlank:false}},{dataIndex:"descripcionMotivoContacto",header:"Descripción",width:300,editor:{allowBlank:false}}],columnLines:true,id:"Grid-MotivoContacto-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Parametros.DemandaInducida.PiezasInformativasController",{extend:"Ext.app.ViewController",alias:"controller.parametros-demandainducida-piezasinformativas",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var e=Ext.getCmp("Grid-PiezasInformativas-Principal").getStore();var d=e.max("idPiezasInformativas");var f=[{idPiezasInformativas:(d==undefined?1:d+1),codigoPiezasInformativas:"",descripcionPiezasInformativas:""}];e.insert(0,f)},onBotonCancelarClick:function(){Ext.Msg.confirm(this.getTitleView(),"Desea cancelar las modificaciones?",function(d){if(d==="yes"){var e=Ext.getCmp("Grid-PiezasInformativas-Principal").getStore();e.rejectChanges();var f=Ext.getCmp("CoomucePiezasInformativas");f.destroy()}})},onBotonGuardarClick:function(){var b=this.getTitleView();Ext.Msg.confirm(b,"Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-PiezasInformativas-Principal");var k=r.getStore();var m=[];var p=[];var a=[];var n=[];Ext.each(k.data.items,function(e,d,c){if(e.dirty){if(e.phantom){m.push(e.data)}else{p.push(e.data)}n.push(e)}});Ext.each(k.getRemovedRecords(),function(d,c){if(!d.phantom){a.push(d.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:b,msg:q.msg});return false}}var l={url:Coomuce.Url.Parametros+"PiezasInformativasCUD",data:{nuevos:m,viejos:p,eliminados:a},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(c){k.load()}};Coomuce.Util.EnviarPost(l)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-PiezasInformativas-Principal");b.getStore().remove(b.selModel.getSelection())}});Ext.define("CoomuceMod.view.Parametros.DemandaInducida.PiezasInformativasModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-demandainducida-piezasinformativas",stores:{getPiezasInformativas:{autoLoad:true,model:"CoomuceMod.model.Parametros.DemandaInducida.PiezasInformativas",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetPiezasInformativasAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Parametros.DemandaInducida.PiezasInformativas",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.DemandaInducida.PiezasInformativasController","CoomuceMod.view.Parametros.DemandaInducida.PiezasInformativasModel"],controller:"parametros-demandainducida-piezasinformativas",viewModel:{type:"parametros-demandainducida-piezasinformativas"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getPiezasInformativas}"},columns:[{dataIndex:"idPiezasInformativas",header:"Id",hidden:true},{dataIndex:"codigoPiezasInformativas",header:"Código",width:100,editor:{allowBlank:false}},{dataIndex:"descripcionPiezasInformativas",header:"Descripción",width:300,editor:{allowBlank:false}}],columnLines:true,id:"Grid-PiezasInformativas-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Parametros.DemandaInducida.ProgramaResolucion412Controller",{extend:"Ext.app.ViewController",alias:"controller.parametros-demandainducida-programaresolucion412",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var e=Ext.getCmp("Grid-ProgramaResolucion412-Principal").getStore();var d=e.max("idProgramaResolucion412");var f=[{idProgramaResolucion412:(d==undefined?1:d+1),codigoProgramaResolucion412:"",descripcionProgramaResolucion412:""}];e.insert(0,f)},onBotonCancelarClick:function(){Ext.Msg.confirm(this.getTitleView(),"Desea cancelar las modificaciones?",function(d){if(d==="yes"){var e=Ext.getCmp("Grid-ProgramaResolucion412-Principal").getStore();e.rejectChanges();var f=Ext.getCmp("CoomuceProgramaResolucion412");f.destroy()}})},onBotonGuardarClick:function(){var b=this.getTitleView();Ext.Msg.confirm(b,"Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-ProgramaResolucion412-Principal");var k=r.getStore();var m=[];var p=[];var a=[];var n=[];Ext.each(k.data.items,function(e,d,c){if(e.dirty){if(e.phantom){m.push(e.data)}else{p.push(e.data)}n.push(e)}});Ext.each(k.getRemovedRecords(),function(d,c){if(!d.phantom){a.push(d.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:b,msg:q.msg});return false}}var l={url:Coomuce.Url.Parametros+"ProgramaResolucion412CUD",data:{nuevos:m,viejos:p,eliminados:a},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(c){k.load()}};Coomuce.Util.EnviarPost(l)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-ProgramaResolucion412-Principal");b.getStore().remove(b.selModel.getSelection())}});Ext.define("CoomuceMod.view.Parametros.DemandaInducida.ProgramaResolucion412Model",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-demandainducida-programaresolucion412",stores:{getProgramaResolucion412:{autoLoad:true,model:"CoomuceMod.model.Parametros.DemandaInducida.ProgramaResolucion412",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetProgramaResolucion412All",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Parametros.DemandaInducida.ProgramaResolucion412",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.DemandaInducida.ProgramaResolucion412Controller","CoomuceMod.view.Parametros.DemandaInducida.ProgramaResolucion412Model"],controller:"parametros-demandainducida-programaresolucion412",viewModel:{type:"parametros-demandainducida-programaresolucion412"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getProgramaResolucion412}"},columns:[{dataIndex:"idProgramaResolucion412",header:"Id",hidden:true},{dataIndex:"codigoProgramaResolucion412",header:"Código",width:100,editor:{allowBlank:false}},{dataIndex:"descripcionProgramaResolucion412",header:"Descripción",width:300,editor:{allowBlank:false}}],columnLines:true,id:"Grid-ProgramaResolucion412-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Parametros.DemandaInducida.SeguimientoProgramasIntervencionRiesgoController",{extend:"Ext.app.ViewController",alias:"controller.parametros-demandainducida-seguimientoprogramasintervencionriesgo",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var e=Ext.getCmp("Grid-SeguimientoProgramasIntervencionRiesgo-Principal").getStore();var d=e.max("idSeguimientoProgramasIntervencionRiesgo");var f=[{idSeguimientoProgramasIntervencionRiesgo:(d==undefined?1:d+1),codigoSeguimientoProgramasIntervencionRiesgo:"",nombreSeguimientoProgramasIntervencionRiesgo:""}];e.insert(0,f)},onBotonCancelarClick:function(){Ext.Msg.confirm(this.getTitleView(),"Desea cancelar las modificaciones?",function(d){if(d==="yes"){var e=Ext.getCmp("Grid-SeguimientoProgramasIntervencionRiesgo-Principal").getStore();e.rejectChanges();var f=Ext.getCmp("CoomuceSeguimientoProgramasIntervencionRiesgo");f.destroy()}})},onBotonGuardarClick:function(){var b=this.getTitleView();Ext.Msg.confirm(b,"Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-SeguimientoProgramasIntervencionRiesgo-Principal");var k=r.getStore();var m=[];var p=[];var a=[];var n=[];Ext.each(k.data.items,function(e,d,c){if(e.dirty){if(e.phantom){m.push(e.data)}else{p.push(e.data)}n.push(e)}});Ext.each(k.getRemovedRecords(),function(d,c){if(!d.phantom){a.push(d.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:b,msg:q.msg});return false}}var l={url:Coomuce.Url.Parametros+"SeguimientoProgramasIntervencionRiesgoCUD",data:{nuevos:m,viejos:p,eliminados:a},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(c){k.load()}};Coomuce.Util.EnviarPost(l)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-SeguimientoProgramasIntervencionRiesgo-Principal");b.getStore().remove(b.selModel.getSelection())}});Ext.define("CoomuceMod.view.Parametros.DemandaInducida.SeguimientoProgramasIntervencionRiesgoModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-demandainducida-seguimientoprogramasintervencionriesgo",stores:{getSeguimientoProgramasIntervencionRiesgo:{autoLoad:true,model:"CoomuceMod.model.Parametros.DemandaInducida.SeguimientoProgramasIntervencionRiesgo",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetSeguimientoProgramasIntervencionRiesgoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Parametros.DemandaInducida.SeguimientoProgramasIntervencionRiesgo",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.DemandaInducida.SeguimientoProgramasIntervencionRiesgoController","CoomuceMod.view.Parametros.DemandaInducida.SeguimientoProgramasIntervencionRiesgoModel"],controller:"parametros-demandainducida-seguimientoprogramasintervencionriesgo",viewModel:{type:"parametros-demandainducida-seguimientoprogramasintervencionriesgo"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getSeguimientoProgramasIntervencionRiesgo}"},columns:[{dataIndex:"idSeguimientoProgramasIntervencionRiesgo",header:"Id",hidden:true},{dataIndex:"codigoSeguimientoProgramasIntervencionRiesgo",header:"Código",width:100,editor:{allowBlank:false}},{dataIndex:"nombreSeguimientoProgramasIntervencionRiesgo",header:"Nombre",width:300,editor:{allowBlank:false}}],columnLines:true,id:"Grid-SeguimientoProgramasIntervencionRiesgo-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Parametros.DemandaInducida.TipoVisitaDomiciliariaController",{extend:"Ext.app.ViewController",alias:"controller.parametros-demandainducida-tipovisitadomiciliaria",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var e=Ext.getCmp("Grid-TipoVisitaDomiciliaria-Principal").getStore();var d=e.max("idTipoVisitaDomiciliaria");var f=[{idTipoVisitaDomiciliaria:(d==undefined?1:d+1),codigoTipoVisitaDomiciliaria:"",nombreTipoVisitaDomiciliaria:""}];e.insert(0,f)},onBotonCancelarClick:function(){Ext.Msg.confirm(this.getTitleView(),"Desea cancelar las modificaciones?",function(d){if(d==="yes"){var e=Ext.getCmp("Grid-TipoVisitaDomiciliaria-Principal").getStore();e.rejectChanges();var f=Ext.getCmp("CoomuceTipoVisitaDomiciliaria");f.destroy()}})},onBotonGuardarClick:function(){var b=this.getTitleView();Ext.Msg.confirm(b,"Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-TipoVisitaDomiciliaria-Principal");var k=r.getStore();var m=[];var p=[];var a=[];var n=[];Ext.each(k.data.items,function(e,d,c){if(e.dirty){if(e.phantom){m.push(e.data)}else{p.push(e.data)}n.push(e)}});Ext.each(k.getRemovedRecords(),function(d,c){if(!d.phantom){a.push(d.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:b,msg:q.msg});return false}}var l={url:Coomuce.Url.Parametros+"TipoVisitaDomiciliariaCUD",data:{nuevos:m,viejos:p,eliminados:a},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(c){k.load()}};Coomuce.Util.EnviarPost(l)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-TipoVisitaDomiciliaria-Principal");b.getStore().remove(b.selModel.getSelection())}});Ext.define("CoomuceMod.view.Parametros.DemandaInducida.TipoVisitaDomiciliariaModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-demandainducida-tipovisitadomiciliaria",stores:{getTipoVisitaDomiciliaria:{autoLoad:true,model:"CoomuceMod.model.Parametros.DemandaInducida.TipoVisitaDomiciliaria",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetTipoVisitaDomiciliariaAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Parametros.DemandaInducida.TipoVisitaDomiciliaria",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.DemandaInducida.TipoVisitaDomiciliariaController","CoomuceMod.view.Parametros.DemandaInducida.TipoVisitaDomiciliariaModel"],controller:"parametros-demandainducida-tipovisitadomiciliaria",viewModel:{type:"parametros-demandainducida-tipovisitadomiciliaria"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getTipoVisitaDomiciliaria}"},columns:[{dataIndex:"idTipoVisitaDomiciliaria",header:"Id",hidden:true},{dataIndex:"codigoTipoVisitaDomiciliaria",header:"Código",width:100,editor:{allowBlank:false}},{dataIndex:"nombreTipoVisitaDomiciliaria",header:"Nombre",width:300,editor:{allowBlank:false}}],columnLines:true,id:"Grid-TipoVisitaDomiciliaria-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Parametros.Generales.GruposFocalesController",{extend:"Ext.app.ViewController",alias:"controller.parametros-generales-gruposfocales",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var e=Ext.getCmp("Grid-GruposFocales-Principal").getStore();var d=e.max("idGruposFocales");var f=[{idGruposFocales:(d==undefined?1:d+1),codigoGruposFocales:"",nombreGruposFocales:""}];e.insert(0,f)},onBotonCancelarClick:function(){Ext.Msg.confirm(this.getTitleView(),"Desea cancelar las modificaciones?",function(d){if(d==="yes"){var e=Ext.getCmp("Grid-GruposFocales-Principal").getStore();e.rejectChanges();var f=Ext.getCmp("CoomuceGruposFocales");f.destroy()}})},onBotonGuardarClick:function(){var b=this.getTitleView();Ext.Msg.confirm(b,"Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-GruposFocales-Principal");var k=r.getStore();var m=[];var p=[];var a=[];var n=[];Ext.each(k.data.items,function(e,d,c){if(e.dirty){if(e.phantom){m.push(e.data)}else{p.push(e.data)}n.push(e)}});Ext.each(k.getRemovedRecords(),function(d,c){if(!d.phantom){a.push(d.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:b,msg:q.msg});return false}}var l={url:Coomuce.Url.Parametros+"GruposFocalesCUD",data:{nuevos:m,viejos:p,eliminados:a},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(c){k.load()}};Coomuce.Util.EnviarPost(l)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-GruposFocales-Principal");b.getStore().remove(b.selModel.getSelection())}});Ext.define("CoomuceMod.view.Parametros.Generales.GruposFocalesModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-generales-gruposfocales",stores:{getGruposFocales:{autoLoad:true,model:"CoomuceMod.model.Parametros.Generales.GruposFocales",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetGruposFocalesAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Parametros.Generales.GruposFocales",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.Generales.GruposFocalesController","CoomuceMod.view.Parametros.Generales.GruposFocalesModel"],controller:"parametros-generales-gruposfocales",viewModel:{type:"parametros-generales-gruposfocales"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getGruposFocales}"},columns:[{dataIndex:"idGruposFocales",header:"Id",hidden:true},{dataIndex:"codigoGruposFocales",header:"Código",width:100,editor:{allowBlank:false}},{dataIndex:"nombreGruposFocales",header:"Nombre",width:300,editor:{allowBlank:false}}],columnLines:true,id:"Grid-GruposFocales-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Parametros.Generales.IpsController",{extend:"Ext.app.ViewController",alias:"controller.parametros-generales-ips",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var e=Ext.getCmp("Grid-Ips-Principal").getStore();var d=e.max("idIps");var f=[{idIps:(d==undefined?1:d+1),codigoIps:"",razonIps:"",idTipoIdentificacion:0,compTipoIdentificacion:"",identificacionIps:"",direccionIps:"",telefonoIps:"",idDepartamento:0,compDepartamento:"",idCiudad:0,compCiudad:"",representanteIps:"",nivelIps:"",contactoIps:"",emailIps:""}];e.insert(0,f)},onBotonCancelarClick:function(){Ext.Msg.confirm(this.getTitleView(),"Desea cancelar las modificaciones?",function(d){if(d==="yes"){var e=Ext.getCmp("Grid-Ips-Principal").getStore();e.rejectChanges();var f=Ext.getCmp("CoomuceIps");f.destroy()}})},onBotonGuardarClick:function(){var b=this.getTitleView();Ext.Msg.confirm(b,"Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-Ips-Principal");var k=r.getStore();var m=[];var p=[];var a=[];var n=[];Ext.each(k.data.items,function(e,d,c){if(e.dirty){if(e.phantom){m.push(e.data)}else{p.push(e.data)}n.push(e)}});Ext.each(k.getRemovedRecords(),function(d,c){if(!d.phantom){a.push(d.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:b,msg:q.msg});return false}}var l={url:Coomuce.Url.Parametros+"IpsCUD",data:{nuevos:m,viejos:p,eliminados:a},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(c){k.load()}};Coomuce.Util.EnviarPost(l)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-Ips-Principal");b.getStore().remove(b.selModel.getSelection())},onBotonImportarClick:function(e){var f=this.getTitleView();Coomuce.Util.ShowMessage({type:"INFO",title:f,msg:"Este funcionalidad se encuentra en desarrollo."});return false;var h=Ext.create("Ext.form.Panel",{bodyPadding:10,buttons:[{text:"Importar",handler:function(){var a=[];var b=this.up("form");var c=b.down("filefield").getEl().down("input[type=file]").dom.files[0];var d=new FileReader();d.onload=(function(j){return function(i){a.push(i.target.result)}})(c);d.readAsBinaryString(c);console.log(a)}}],items:[{xtype:"filefield",name:"archivo",fieldLabel:"Archivo",labelWidth:50,msgTarget:"side",allowBlank:false,anchor:"100%",buttonText:"Seleccione archivo plano..."}]});var g=Ext.create("Ext.window.Window",{items:[h],modal:true,title:e.text,width:400});g.show()},onSelectCombo:function(h,f,e){var g=Ext.getCmp("Grid-Ips-Principal").selModel.getSelection();g[0].set(h.idCampo,f.get(h.idCampo))},onFocusCombo:function(g,h,e){var f=Ext.getCmp("Grid-Ips-Principal").selModel.getSelection()[0];g.getStore().load({params:{idDepartamento:f.get("idDepartamento")}})}});Ext.define("CoomuceMod.view.Parametros.Generales.IpsModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-generales-ips",stores:{getTipoIdentificacion:{autoLoad:true,model:"CoomuceMod.model.Parametros.Generales.TipoIdentificacion",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetTipoIdentificacionAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getCiudad:{autoLoad:false,model:"CoomuceMod.model.Administracion.Ciudad",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Administracion+"GetCiudadAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getDepartamento:{autoLoad:true,model:"CoomuceMod.model.Administracion.Departamento",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Administracion+"GetDepartamentoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getIps:{autoLoad:true,model:"CoomuceMod.model.Parametros.Generales.Ips",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetIpsAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getNivel:{fields:["nivelIps"],data:[["I"],["II"],["III"],["IV"]]}}});Ext.define("CoomuceMod.view.Parametros.Generales.Ips",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.Generales.IpsController","CoomuceMod.view.Parametros.Generales.IpsModel"],controller:"parametros-generales-ips",viewModel:{type:"parametros-generales-ips"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true},"->",{text:"Importar ips desde plano",iconCls:"x-fa fa-upload",handler:"onBotonImportarClick"}]}],items:[{xtype:"grid",bind:{store:"{getIps}"},columns:[{dataIndex:"idIps",header:"Id",hidden:true},{dataIndex:"codigoIps",header:"Código",width:100,editor:{allowBlank:false}},{dataIndex:"razonIps",header:"Razón Social",width:300,editor:{allowBlank:false}},{dataIndex:"idTipoIdentificacion",header:"Id Tipo Identificacion",hidden:true},{dataIndex:"compTipoIdentificacion",header:"Tipo Identificación",width:100,editor:{xtype:"combo",allowBlank:false,bind:{store:"{getTipoIdentificacion}"},displayField:"compTipoIdentificacion",editable:false,idCampo:"idTipoIdentificacion",listeners:{select:"onSelectCombo"},queryMode:"local",valueField:"compTipoIdentificacion"}},{dataIndex:"identificacionIps",header:"Identificación",width:100,editor:{allowBlank:false}},{dataIndex:"direccionIps",header:"Dirección",width:100,editor:{allowBlank:false}},{dataIndex:"telefonoIps",header:"Teléfono",width:100,editor:{allowBlank:true}},{dataIndex:"idDepartamento",header:"Id Departamento",hidden:true},{dataIndex:"compDepartamento",header:"Departamento",width:100,editor:{xtype:"combo",allowBlank:false,bind:{store:"{getDepartamento}"},displayField:"compDepartamento",editable:false,idCampo:"idDepartamento",listeners:{select:"onSelectCombo"},queryMode:"local",valueField:"compDepartamento"}},{dataIndex:"idCiudad",header:"Id Ciudad",hidden:true},{dataIndex:"compCiudad",header:"Ciudad",width:100,editor:{xtype:"combo",allowBlank:false,bind:{store:"{getCiudad}"},displayField:"compCiudad",editable:false,idCampo:"idCiudad",listeners:{focus:"onFocusCombo",select:"onSelectCombo"},queryMode:"local",valueField:"compCiudad"}},{dataIndex:"representanteIps",header:"Representante",width:100,editor:{allowBlank:true}},{dataIndex:"nivelIps",header:"Nivel",width:100,editor:{xtype:"combo",allowBlank:true,bind:{store:"{getNivel}"},displayField:"nivelIps",editable:false,idCampo:"nivelIps",listeners:{select:"onSelectCombo"},queryMode:"local",valueField:"nivelIps"}},{dataIndex:"contactoIps",header:"Contacto",width:100,editor:{allowBlank:true}},{dataIndex:"emailIps",header:"E-mail",width:100,editor:{allowBlank:true,vtype:"email"}}],columnLines:true,id:"Grid-Ips-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:false,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Parametros.Generales.TipoIdentificacionController",{extend:"Ext.app.ViewController",alias:"controller.parametros-generales-tipoidentificacion",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var e=Ext.getCmp("Grid-TipoIdentificacion-Principal").getStore();var d=e.max("idTipoIdentificacion");var f=[{idTipoIdentificacion:(d==undefined?1:d+1),codigoTipoIdentificacion:"",nombreTipoIdentificacion:""}];e.insert(0,f)},onBotonCancelarClick:function(){Ext.Msg.confirm(this.getTitleView(),"Desea cancelar las modificaciones?",function(d){if(d==="yes"){var e=Ext.getCmp("Grid-TipoIdentificacion-Principal").getStore();e.rejectChanges();var f=Ext.getCmp("CoomuceTipoIdentificacion");f.destroy()}})},onBotonGuardarClick:function(){var b=this.getTitleView();Ext.Msg.confirm(b,"Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-TipoIdentificacion-Principal");var k=r.getStore();var m=[];var p=[];var a=[];var n=[];Ext.each(k.data.items,function(e,d,c){if(e.dirty){if(e.phantom){m.push(e.data)}else{p.push(e.data)}n.push(e)}});Ext.each(k.getRemovedRecords(),function(d,c){if(!d.phantom){a.push(d.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:b,msg:q.msg});return false}}var l={url:Coomuce.Url.Parametros+"TipoIdentificacionCUD",data:{nuevos:m,viejos:p,eliminados:a},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(c){k.load()}};Coomuce.Util.EnviarPost(l)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-TipoIdentificacion-Principal");b.getStore().remove(b.selModel.getSelection())}});Ext.define("CoomuceMod.view.Parametros.Generales.TipoIdentificacionModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-generales-tipoidentificacion",stores:{getTipoIdentificacion:{autoLoad:true,model:"CoomuceMod.model.Parametros.Generales.TipoIdentificacion",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetTipoIdentificacionAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Parametros.Generales.TipoIdentificacion",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.Generales.TipoIdentificacionController","CoomuceMod.view.Parametros.Generales.TipoIdentificacionModel"],controller:"parametros-generales-tipoidentificacion",viewModel:{type:"parametros-generales-tipoidentificacion"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getTipoIdentificacion}"},columns:[{dataIndex:"idTipoIdentificacion",header:"Id",hidden:true},{dataIndex:"codigoTipoIdentificacion",header:"Código",width:100,editor:{allowBlank:false}},{dataIndex:"nombreTipoIdentificacion",header:"Nombre",width:300,editor:{allowBlank:false}}],columnLines:true,id:"Grid-TipoIdentificacion-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Parametros.Generales.TipoSexoController",{extend:"Ext.app.ViewController",alias:"controller.parametros-generales-tiposexo",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var e=Ext.getCmp("Grid-TipoSexo-Principal").getStore();var d=e.max("idTipoSexo");var f=[{idTipoSexo:(d==undefined?1:d+1),codigoTipoSexo:"",nombreTipoSexo:""}];e.insert(0,f)},onBotonCancelarClick:function(){Ext.Msg.confirm(this.getTitleView(),"Desea cancelar las modificaciones?",function(d){if(d==="yes"){var e=Ext.getCmp("Grid-TipoSexo-Principal").getStore();e.rejectChanges();var f=Ext.getCmp("CoomuceTipoSexo");f.destroy()}})},onBotonGuardarClick:function(){var b=this.getTitleView();Ext.Msg.confirm(b,"Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-TipoSexo-Principal");var k=r.getStore();var m=[];var p=[];var a=[];var n=[];Ext.each(k.data.items,function(e,d,c){if(e.dirty){if(e.phantom){m.push(e.data)}else{p.push(e.data)}n.push(e)}});Ext.each(k.getRemovedRecords(),function(d,c){if(!d.phantom){a.push(d.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:b,msg:q.msg});return false}}var l={url:Coomuce.Url.Parametros+"TipoSexoCUD",data:{nuevos:m,viejos:p,eliminados:a},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(c){k.load()}};Coomuce.Util.EnviarPost(l)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-TipoSexo-Principal");b.getStore().remove(b.selModel.getSelection())}});Ext.define("CoomuceMod.view.Parametros.Generales.TipoSexoModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-generales-tiposexo",stores:{getTipoSexo:{autoLoad:true,model:"CoomuceMod.model.Parametros.Generales.TipoSexo",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetTipoSexoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Parametros.Generales.TipoSexo",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.Generales.TipoSexoController","CoomuceMod.view.Parametros.Generales.TipoSexoModel"],controller:"parametros-generales-tiposexo",viewModel:{type:"parametros-generales-tiposexo"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getTipoSexo}"},columns:[{dataIndex:"idTipoSexo",header:"Id",hidden:true},{dataIndex:"codigoTipoSexo",header:"Código",width:100,editor:{allowBlank:false}},{dataIndex:"nombreTipoSexo",header:"Nombre",width:300,editor:{allowBlank:false}}],columnLines:true,id:"Grid-TipoSexo-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Parametros.Generales.TipoZonaController",{extend:"Ext.app.ViewController",alias:"controller.parametros-generales-tipozona",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var e=Ext.getCmp("Grid-TipoZona-Principal").getStore();var d=e.max("idTipoZona");var f=[{idTipoZona:(d==undefined?1:d+1),codigoTipoZona:"",nombreTipoZona:""}];e.insert(0,f)},onBotonCancelarClick:function(){Ext.Msg.confirm(this.getTitleView(),"Desea cancelar las modificaciones?",function(d){if(d==="yes"){var e=Ext.getCmp("Grid-TipoZona-Principal").getStore();e.rejectChanges();var f=Ext.getCmp("CoomuceTipoZona");f.destroy()}})},onBotonGuardarClick:function(){var b=this.getTitleView();Ext.Msg.confirm(b,"Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-TipoZona-Principal");var k=r.getStore();var m=[];var p=[];var a=[];var n=[];Ext.each(k.data.items,function(e,d,c){if(e.dirty){if(e.phantom){m.push(e.data)}else{p.push(e.data)}n.push(e)}});Ext.each(k.getRemovedRecords(),function(d,c){if(!d.phantom){a.push(d.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:b,msg:q.msg});return false}}var l={url:Coomuce.Url.Parametros+"TipoZonaCUD",data:{nuevos:m,viejos:p,eliminados:a},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(c){k.load()}};Coomuce.Util.EnviarPost(l)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-TipoZona-Principal");b.getStore().remove(b.selModel.getSelection())}});Ext.define("CoomuceMod.view.Parametros.Generales.TipoZonaModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-generales-tipozona",stores:{getTipoZona:{autoLoad:true,model:"CoomuceMod.model.Parametros.Generales.TipoZona",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetTipoZonaAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Parametros.Generales.TipoZona",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.Generales.TipoZonaController","CoomuceMod.view.Parametros.Generales.TipoZonaModel"],controller:"parametros-generales-tipozona",viewModel:{type:"parametros-generales-tipozona"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getTipoZona}"},columns:[{dataIndex:"idTipoZona",header:"Id",hidden:true},{dataIndex:"codigoTipoZona",header:"Código",width:100,editor:{allowBlank:false}},{dataIndex:"nombreTipoZona",header:"Nombre",width:300,editor:{allowBlank:false}}],columnLines:true,id:"Grid-TipoZona-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Parametros.InformacionOrientacion.EncuestaCategoriaController",{extend:"Ext.app.ViewController",alias:"controller.parametros-informacionorientacion-encuestacategoria",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var k=this;var j=Ext.getCmp("idDomVista").getValue();if(Ext.isEmpty(j)){Coomuce.Util.ShowMessage({type:"ERROR",title:k.getTitleView(),msg:"Debe seleccionar un formato de encuesta."});return false}var g=Ext.getCmp("Grid-EncuestaCategoria-Principal").getStore();var h=g.max("idEncuestaCategoria");var l=g.identity;if(h>l){l=h}var i=[{idEncuestaCategoria:(l==undefined?1:l+1),idDomVista:j,codigoEncuestaCategoria:"",nombreEncuestaCategoria:"",ordenEncuestaCategoria:0}];g.insert(0,i)},onBotonCancelarClick:function(){var b=this;Ext.Msg.confirm(b.getTitleView(),"Desea cancelar las modificaciones?",function(f){if(f==="yes"){var a=Ext.getCmp("Grid-EncuestaCategoria-Principal").getStore();a.rejectChanges();var e=Ext.getCmp("CoomuceEncuestaCategoria");e.destroy()}})},onBotonGuardarClick:function(){var c=this;var d=c.getTitleView();Ext.Msg.confirm(d,"Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-EncuestaCategoria-Principal");var b=r.getStore();var m=[];var p=[];var a=[];var n=[];Ext.each(b.data.items,function(f,e,g){if(f.dirty){if(f.phantom){m.push(f.data)}else{p.push(f.data)}n.push(f)}});Ext.each(b.getRemovedRecords(),function(f,e){if(!f.phantom){a.push(f.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:d,msg:q.msg});return false}}var l={url:Coomuce.Url.Parametros+"EncuestaCategoriaCUD",data:{nuevos:m,viejos:p,eliminados:a},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(e){b.load({params:{idDomVista:Ext.getCmp("idDomVista").getValue()}})}};Coomuce.Util.EnviarPost(l)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-EncuestaCategoria-Principal");b.getStore().remove(b.selModel.getSelection())},onSelectCombo:function(g,f,h){var e=Ext.getCmp("Grid-EncuestaCategoria-Principal");e.getStore().load({params:{idDomVista:f.data.id}})}});Ext.define("CoomuceMod.view.Parametros.InformacionOrientacion.EncuestaCategoriaModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-informacionorientacion-encuestacategoria",stores:{getVista:{fields:[{name:"id",type:"string"},{name:"nombre",type:"string"}],data:[["CoomuceEncuestaIPS","Encuesta de Satisfacción de usuario de la I.P.S de primer Nivel"],["CoomuceEncuestaEPS","Encuesta de Satisfacción de usuario de la EPS-S"]]},getEncuestaCategoria:{autoLoad:false,model:"CoomuceMod.model.Parametros.InformacionOrientacion.EncuestaCategoria",listeners:{load:function(l,g,i,h,j){var k=Ext.decode(h._response.responseText);l.identity=k.identity}},identity:0,proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetEncuestaCategoriaAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Parametros.InformacionOrientacion.EncuestaCategoria",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.InformacionOrientacion.EncuestaCategoriaController","CoomuceMod.view.Parametros.InformacionOrientacion.EncuestaCategoriaModel"],controller:"parametros-informacionorientacion-encuestacategoria",viewModel:{type:"parametros-informacionorientacion-encuestacategoria"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"top",ui:"footer",items:[{xtype:"combo",bind:{store:"{getVista}"},displayField:"nombre",emptyText:"-- Seleccione encuesta --",id:"idDomVista",listeners:{select:"onSelectCombo"},queryMode:"local",valueField:"id",width:400}]},{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getEncuestaCategoria}"},columns:[{dataIndex:"idEncuestaCategoria",header:"Id Encuesta Categoria",hidden:true},{dataIndex:"idDomVista",header:"Id Encuesta",hidden:true},{dataIndex:"codigoEncuestaCategoria",header:"Código",width:100,editor:{allowBlank:false}},{dataIndex:"nombreEncuestaCategoria",header:"Nombre",width:300,editor:{allowBlank:false}},{dataIndex:"ordenEncuestaCategoria",header:"Orden",width:80,editor:{xtype:"numberfield",allowBlank:false}}],columnLines:true,id:"Grid-EncuestaCategoria-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Parametros.InformacionOrientacion.EncuestaLiteralController",{extend:"Ext.app.ViewController",alias:"controller.parametros-informacionorientacion-encuestaliteral",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var n=this;var i=n.lookupReference("vista");var k=n.lookupReference("categoria");var l=n.lookupReference("pregunta");if(Ext.isEmpty(i.getValue())){Coomuce.Util.ShowMessage({type:"ERROR",title:n.getTitleView(),msg:"Debe seleccionar un formato de encuesta."});return false}if(Ext.isEmpty(k.getValue())){Coomuce.Util.ShowMessage({type:"ERROR",title:n.getTitleView(),msg:"Debe seleccionar una categoria."});return false}if(Ext.isEmpty(l.getValue())){Coomuce.Util.ShowMessage({type:"ERROR",title:n.getTitleView(),msg:"Debe seleccionar una pregunta."});return false}var p=Ext.getCmp("Grid-EncuestaLiteral-Principal").getStore();var j=p.max("idEncuestaLiteral");var o=p.identity;if(j>o){o=j}var m=[{idEncuestaLiteral:(o==undefined?1:o+1),idEncuestaPregunta:l.getValue(),liteEncuestaLiteral:"",textoEncuestaLiteral:"",valorEncuestaLiteral:0}];p.insert(0,m)},onBotonCancelarClick:function(){var b=this;Ext.Msg.confirm(b.getTitleView(),"Desea cancelar las modificaciones?",function(f){if(f==="yes"){var a=Ext.getCmp("Grid-EncuestaLiteral-Principal").getStore();a.rejectChanges();var e=Ext.getCmp("CoomuceEncuentaLiteral");e.destroy()}})},onBotonGuardarClick:function(){var d=this;var e=d.getTitleView();var f=d.lookupReference("pregunta");Ext.Msg.confirm(e,"Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-EncuestaLiteral-Principal");var b=r.getStore();var m=[];var p=[];var a=[];var n=[];Ext.each(b.data.items,function(g,i,h){if(g.dirty){if(g.phantom){m.push(g.data)}else{p.push(g.data)}n.push(g)}});Ext.each(b.getRemovedRecords(),function(g,h){if(!g.phantom){a.push(g.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:e,msg:q.msg});return false}}var c={url:Coomuce.Url.Parametros+"EncuestaLiteralCUD",data:{nuevos:m,viejos:p,eliminados:a},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(g){b.load({params:{idEncuestaPregunta:f.getValue()}})}};Coomuce.Util.EnviarPost(c)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-EncuestaLiteral-Principal");b.getStore().remove(b.selModel.getSelection())},onSelectCombo:function(j,h,l){var k=this;if(j.categoriaField!==undefined){var i=k.lookupReference("categoria");i.getStore().load({params:{idDomVista:h.data.id}})}if(j.preguntaField!==undefined){var i=k.lookupReference("pregunta");i.getStore().load({params:{idEncuestaCategoria:h.data.idEncuestaCategoria}})}else{if(j.gridField!==undefined){var g=Ext.getCmp("Grid-EncuestaLiteral-Principal");g.getStore().load({params:{idEncuestaPregunta:h.data.idEncuestaPregunta}})}}}});Ext.define("CoomuceMod.view.Parametros.InformacionOrientacion.EncuestaLiteralModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-informacionorientacion-encuestaliteral",stores:{getVista:{fields:[{name:"id",type:"string"},{name:"nombre",type:"string"}],data:[["CoomuceEncuestaIPS","Encuesta de Satisfacción de usuario de la I.P.S de primer Nivel"],["CoomuceEncuestaEPS","Encuesta de Satisfacción de usuario de la EPS-S"]]},getEncuestaCategoria:{autoLoad:false,model:"CoomuceMod.model.Parametros.InformacionOrientacion.EncuestaCategoria",listeners:{load:function(l,g,i,h,j){var k=Ext.decode(h._response.responseText);l.identity=k.identity}},identity:0,proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetEncuestaCategoriaAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getEncuestaPregunta:{autoLoad:false,model:"CoomuceMod.model.Parametros.InformacionOrientacion.EncuestaPregunta",listeners:{load:function(l,g,i,h,j){var k=Ext.decode(h._response.responseText);l.identity=k.identity}},identity:0,proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetEncuestaPreguntaAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getEncuestaLiteral:{autoLoad:false,model:"CoomuceMod.model.Parametros.InformacionOrientacion.EncuestaLiteral",listeners:{load:function(l,g,i,h,j){var k=Ext.decode(h._response.responseText);l.identity=k.identity}},identity:0,proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetEncuestaLiteralAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Parametros.InformacionOrientacion.EncuestaLiteral",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.InformacionOrientacion.EncuestaLiteralController","CoomuceMod.view.Parametros.InformacionOrientacion.EncuestaLiteralModel"],controller:"parametros-informacionorientacion-encuestaliteral",viewModel:{type:"parametros-informacionorientacion-encuestaliteral"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"top",ui:"footer",items:[{xtype:"combo",bind:{store:"{getVista}"},displayField:"nombre",emptyText:"-- Seleccione encuesta --",categoriaField:true,listeners:{select:"onSelectCombo"},queryMode:"local",reference:"vista",valueField:"id",width:300},{xtype:"combo",bind:{store:"{getEncuestaCategoria}"},displayField:"compEncuestaCategoria",emptyText:"-- Seleccione categoria --",preguntaField:true,listeners:{select:"onSelectCombo"},queryMode:"local",reference:"categoria",valueField:"idEncuestaCategoria",width:300},{xtype:"combo",bind:{store:"{getEncuestaPregunta}"},displayField:"compEncuestaPregunta",emptyText:"-- Seleccione pregunta --",gridField:true,listeners:{select:"onSelectCombo"},queryMode:"local",reference:"pregunta",valueField:"idEncuestaPregunta",width:300}]},{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getEncuestaLiteral}"},columns:[{dataIndex:"idEncuestaLiteral",header:"Id Encuesta Literal",hidden:true},{dataIndex:"liteEncuestaLiteral",header:"Literal",width:100,editor:{allowBlank:false}},{dataIndex:"textoEncuestaLiteral",header:"Texto",width:300,editor:{allowBlank:false}},{dataIndex:"valorEncuestaLiteral",header:"Valor",width:100,editor:{xtype:"numberfield",allowBlank:false}},{xtype:"checkcolumn",dataIndex:"checkedEncuestaLiteral",header:"Selección Default"}],columnLines:true,id:"Grid-EncuestaLiteral-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Parametros.InformacionOrientacion.EncuestaPreguntaController",{extend:"Ext.app.ViewController",alias:"controller.parametros-informacionorientacion-encuestapregunta",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var l=this;var h=l.lookupReference("vista");var j=l.lookupReference("categoria");if(Ext.isEmpty(h.getValue())){Coomuce.Util.ShowMessage({type:"ERROR",title:l.getTitleView(),msg:"Debe seleccionar un formato de encuesta."});return false}if(Ext.isEmpty(j.getValue())){Coomuce.Util.ShowMessage({type:"ERROR",title:l.getTitleView(),msg:"Debe seleccionar una categoria."});return false}var n=Ext.getCmp("Grid-EncuestaPregunta-Principal").getStore();var i=n.max("idEncuestaPregunta");var m=n.identity;if(i>m){m=i}var k=[{idEncuestaPregunta:(m==undefined?1:m+1),idEncuestaCategoria:j.getValue(),codigoEncuestaPregunta:"",textoEncuestaPregunta:"",tipoPreEncuestaPregunta:1,valorEncuestaPregunta:0}];n.insert(0,k)},onBotonCancelarClick:function(){var b=this;Ext.Msg.confirm(b.getTitleView(),"Desea cancelar las modificaciones?",function(f){if(f==="yes"){var a=Ext.getCmp("Grid-EncuestaPregunta-Principal").getStore();a.rejectChanges();var e=Ext.getCmp("CoomuceEncuestaPregunta");e.destroy()}})},onBotonGuardarClick:function(){var d=this;var e=d.getTitleView();var f=d.lookupReference("categoria");Ext.Msg.confirm(e,"Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-EncuestaPregunta-Principal");var b=r.getStore();var m=[];var p=[];var a=[];var n=[];Ext.each(b.data.items,function(g,i,h){if(g.dirty){if(g.phantom){m.push(g.data)}else{p.push(g.data)}n.push(g)}});Ext.each(b.getRemovedRecords(),function(g,h){if(!g.phantom){a.push(g.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:e,msg:q.msg});return false}}var c={url:Coomuce.Url.Parametros+"EncuestaPreguntaCUD",data:{nuevos:m,viejos:p,eliminados:a},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(g){b.load({params:{idEncuestaCategoria:f.getValue()}})}};Coomuce.Util.EnviarPost(c)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-EncuestaPregunta-Principal");b.getStore().remove(b.selModel.getSelection())},onSelectCombo:function(j,h,l){var k=this;if(j.categoriaField!==undefined){var i=k.lookupReference("categoria");i.getStore().load({params:{idDomVista:h.data.id}})}else{if(j.gridField!==undefined){var g=Ext.getCmp("Grid-EncuestaPregunta-Principal");g.getStore().load({params:{idEncuestaCategoria:h.data.idEncuestaCategoria}})}}}});Ext.define("CoomuceMod.view.Parametros.InformacionOrientacion.EncuestaPreguntaModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-informacionorientacion-encuestapregunta",stores:{getVista:{fields:[{name:"id",type:"string"},{name:"nombre",type:"string"}],data:[["CoomuceEncuestaIPS","Encuesta de Satisfacción de usuario de la I.P.S de primer Nivel"],["CoomuceEncuestaEPS","Encuesta de Satisfacción de usuario de la EPS-S"]]},getTipoPregunta:{fields:[{name:"id",type:"int"},{name:"nombre",type:"string"}],data:[[1,"ÚNICA RESPUESTA"],[2,"MÚLTIPLES RESPUESTAS"],[3,"SELECCIONE UNA"]]},getEncuestaCategoria:{autoLoad:false,model:"CoomuceMod.model.Parametros.InformacionOrientacion.EncuestaCategoria",listeners:{load:function(l,g,i,h,j){var k=Ext.decode(h._response.responseText);l.identity=k.identity}},identity:0,proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetEncuestaCategoriaAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getEncuestaPregunta:{autoLoad:false,model:"CoomuceMod.model.Parametros.InformacionOrientacion.EncuestaPregunta",listeners:{load:function(l,g,i,h,j){var k=Ext.decode(h._response.responseText);l.identity=k.identity}},identity:0,proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetEncuestaPreguntaAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Parametros.InformacionOrientacion.EncuestaPregunta",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.InformacionOrientacion.EncuestaPreguntaController","CoomuceMod.view.Parametros.InformacionOrientacion.EncuestaPreguntaModel"],controller:"parametros-informacionorientacion-encuestapregunta",viewModel:{type:"parametros-informacionorientacion-encuestapregunta"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"top",ui:"footer",items:[{xtype:"combo",bind:{store:"{getVista}"},displayField:"nombre",emptyText:"-- Seleccione encuesta --",categoriaField:true,listeners:{select:"onSelectCombo"},queryMode:"local",reference:"vista",valueField:"id",width:400},{xtype:"combo",bind:{store:"{getEncuestaCategoria}"},displayField:"compEncuestaCategoria",emptyText:"-- Seleccione categoria --",gridField:true,listeners:{select:"onSelectCombo"},queryMode:"local",reference:"categoria",valueField:"idEncuestaCategoria",width:400}]},{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getEncuestaPregunta}"},columns:[{dataIndex:"idEncuestaPregunta",header:"Id Encuesta Pregunta",hidden:true},{dataIndex:"codigoEncuestaPregunta",header:"Código",width:100,editor:{allowBlank:false}},{dataIndex:"textoEncuestaPregunta",header:"Texto",width:300,editor:{allowBlank:false}},{dataIndex:"tipoPreEncuestaPregunta",header:"Tipo Pregunta",width:150,editor:{xtype:"combo",allowBlank:false,bind:{store:"{getTipoPregunta}"},displayField:"nombre",queryMode:"local",valueField:"id"}},{dataIndex:"valorEncuestaPregunta",header:"Valor",width:100,editor:{xtype:"numberfield",allowBlank:false}}],columnLines:true,id:"Grid-EncuestaPregunta-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Parametros.ParticipacionSocial.EjeController",{extend:"Ext.app.ViewController",alias:"controller.parametros-participacionsocial-eje",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var h=this;var f=Ext.getCmp("Grid-Eje-Principal").getStore();var e=f.max("idEje");var g=[{idEje:(e===undefined?1:e+1),codigoEje:"",nombreEje:""}];f.insert(0,g)},onBotonCancelarClick:function(){var b=this;Ext.Msg.confirm(b.getTitleView(),"Desea cancelar las modificaciones?",function(f){if(f==="yes"){var a=Ext.getCmp("Grid-Eje-Principal").getStore();a.rejectChanges();var e=Ext.getCmp("CoomuceEje");e.destroy()}})},onBotonGuardarClick:function(){var c=this;var d=c.getTitleView();Ext.Msg.confirm(d,"Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-Eje-Principal");var b=r.getStore();var m=[];var p=[];var a=[];var n=[];Ext.each(b.data.items,function(f,e,g){if(f.dirty){if(f.phantom){m.push(f.data)}else{p.push(f.data)}n.push(f)}});Ext.each(b.getRemovedRecords(),function(f,e){if(!f.phantom){a.push(f.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:d,msg:q.msg});return false}}var l={url:Coomuce.Url.Parametros+"EjeCUD",data:{nuevos:m,viejos:p,eliminados:a},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(e){b.load()}};Coomuce.Util.EnviarPost(l)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-Eje-Principal");b.getStore().remove(b.selModel.getSelection())}});Ext.define("CoomuceMod.view.Parametros.ParticipacionSocial.EjeModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-participacionsocial-eje",stores:{getEje:{autoLoad:true,model:"CoomuceMod.model.Parametros.ParticipacionSocial.Eje",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetEjeAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Parametros.ParticipacionSocial.Eje",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.ParticipacionSocial.EjeController","CoomuceMod.view.Parametros.ParticipacionSocial.EjeModel"],controller:"parametros-participacionsocial-eje",viewModel:{type:"parametros-participacionsocial-eje"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getEje}"},columns:[{dataIndex:"idEje",header:"Id",hidden:true},{dataIndex:"codigoEje",header:"Código",width:100,editor:{allowBlank:false}},{dataIndex:"nombreEje",header:"Nombre",width:300,editor:{allowBlank:false}}],columnLines:true,id:"Grid-Eje-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Parametros.ParticipacionSocial.ModuloController",{extend:"Ext.app.ViewController",alias:"controller.parametros-participacionsocial-modulo",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var k=this;var n=k.lookupReference("eje");var h=k.lookupReference("unidad");if(Ext.isEmpty(n.getValue())){Coomuce.Util.ShowMessage({type:"ERROR",title:k.getTitleView(),msg:"Debe seleccionar un eje."});return false}if(Ext.isEmpty(h.getValue())){Coomuce.Util.ShowMessage({type:"ERROR",title:k.getTitleView(),msg:"Debe seleccionar una unidad."});return false}var m=Ext.getCmp("Grid-Modulo-Principal").getStore();var i=m.max("idModulo");var l=m.identity;if(i>l){l=i}var j=[{idModulo:(l==undefined?1:l+1),idUnidad:h.getValue(),codigoModulo:"",nombreModulo:""}];m.insert(0,j)},onBotonCancelarClick:function(){var b=this;Ext.Msg.confirm(b.getTitleView(),"Desea cancelar las modificaciones?",function(f){if(f==="yes"){var a=Ext.getCmp("Grid-Modulo-Principal").getStore();a.rejectChanges();var e=Ext.getCmp("CoomuceModulo");e.destroy()}})},onBotonGuardarClick:function(){var f=this;var d=f.getTitleView();var e=f.lookupReference("unidad");Ext.Msg.confirm(d,"Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-Modulo-Principal");var b=r.getStore();var m=[];var p=[];var a=[];var n=[];Ext.each(b.data.items,function(g,i,h){if(g.dirty){if(g.phantom){m.push(g.data)}else{p.push(g.data)}n.push(g)}});Ext.each(b.getRemovedRecords(),function(g,h){if(!g.phantom){a.push(g.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:d,msg:q.msg});return false}}var c={url:Coomuce.Url.Parametros+"ModuloCUD",data:{nuevos:m,viejos:p,eliminados:a},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(g){b.load({params:{idUnidad:e.getValue()}})}};Coomuce.Util.EnviarPost(c)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-Modulo-Principal");b.getStore().remove(b.selModel.getSelection())},onSelectCombo:function(i,g,k){var j=this;if(i.unidadField!==undefined){var h=j.lookupReference("unidad");h.getStore().load({params:{idEje:g.data.idEje}})}else{if(i.gridField!==undefined){var l=Ext.getCmp("Grid-Modulo-Principal");l.getStore().load({params:{idUnidad:g.data.idUnidad}})}}}});Ext.define("CoomuceMod.view.Parametros.ParticipacionSocial.ModuloModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-participacionsocial-modulo",stores:{getEje:{autoLoad:true,model:"CoomuceMod.model.Parametros.ParticipacionSocial.Eje",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetEjeAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getUnidad:{autoLoad:false,model:"CoomuceMod.model.Parametros.ParticipacionSocial.Unidad",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetUnidadAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getModulo:{autoLoad:false,model:"CoomuceMod.model.Parametros.ParticipacionSocial.Modulo",listeners:{load:function(l,g,i,h,j){var k=Ext.decode(h._response.responseText);l.identity=k.identity}},identity:0,proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetModuloAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Parametros.ParticipacionSocial.Modulo",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.ParticipacionSocial.ModuloController","CoomuceMod.view.Parametros.ParticipacionSocial.ModuloModel"],controller:"parametros-participacionsocial-modulo",viewModel:{type:"parametros-participacionsocial-modulo"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"top",ui:"footer",items:[{xtype:"combo",bind:{store:"{getEje}"},displayField:"compEje",emptyText:"-- Seleccione eje --",unidadField:true,listeners:{select:"onSelectCombo"},queryMode:"local",reference:"eje",valueField:"idEje",width:300},{xtype:"combo",bind:{store:"{getUnidad}"},displayField:"compUnidad",emptyText:"-- Seleccione unidad --",gridField:true,listeners:{select:"onSelectCombo"},queryMode:"local",reference:"unidad",valueField:"idUnidad",width:300}]},{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getModulo}"},columns:[{dataIndex:"idModulo",header:"IdLiteral",hidden:true},{dataIndex:"codigoModulo",header:"Código",width:100,editor:{allowBlank:false}},{dataIndex:"nombreModulo",header:"Nombre",width:300,editor:{allowBlank:false}}],columnLines:true,id:"Grid-Modulo-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.Parametros.ParticipacionSocial.UnidadController",{extend:"Ext.app.ViewController",alias:"controller.parametros-participacionsocial-unidad",getTitleView:function(){return this.getView().getTitle()},onGridSelectionChange:function(c,d){this.getReferences().eliminarButton.setDisabled(d.length===0)},onBotonAdicionarClick:function(){var j=this;var g=j.lookupReference("eje");if(Ext.isEmpty(g.getValue())){Coomuce.Util.ShowMessage({type:"ERROR",title:j.getTitleView(),msg:"Debe seleccionar un eje."});return false}var l=Ext.getCmp("Grid-Unidad-Principal").getStore();var h=l.max("idUnidad");var k=l.identity;if(h>k){k=h}var i=[{idUnidad:(k==undefined?1:k+1),idEje:g.getValue(),codigoUnidad:"",nombreUnidad:""}];l.insert(0,i)},onBotonCancelarClick:function(){var b=this;Ext.Msg.confirm(b.getTitleView(),"Desea cancelar las modificaciones?",function(f){if(f==="yes"){var a=Ext.getCmp("Grid-Unidad-Principal").getStore();a.rejectChanges();var e=Ext.getCmp("CoomuceUnidad");e.destroy()}})},onBotonGuardarClick:function(){var f=this;var d=f.getTitleView();var e=f.lookupReference("eje");Ext.Msg.confirm(d,"Desea guardar las modificaciones?",function(o){if(o==="yes"){var r=Ext.getCmp("Grid-Unidad-Principal");var b=r.getStore();var m=[];var p=[];var a=[];var n=[];Ext.each(b.data.items,function(g,i,h){if(g.dirty){if(g.phantom){m.push(g.data)}else{p.push(g.data)}n.push(g)}});Ext.each(b.getRemovedRecords(),function(g,h){if(!g.phantom){a.push(g.getData())}});if(n.length>0){var q=Coomuce.Util.dataValidate(n);if(!q.success){Coomuce.Util.ShowMessage({type:"ERROR",title:d,msg:q.msg});return false}}var c={url:Coomuce.Url.Parametros+"UnidadCUD",data:{nuevos:m,viejos:p,eliminados:a},targetMask:r,msgMask:"Guardando datos...",fnSuccess:function(g){b.load({params:{idEje:e.getValue()}})}};Coomuce.Util.EnviarPost(c)}})},onBotonEliminarClick:function(){var b=Ext.getCmp("Grid-Unidad-Principal");b.getStore().remove(b.selModel.getSelection())},onSelectCombo:function(h,g,j){var i=this;var f=Ext.getCmp("Grid-Unidad-Principal");f.getStore().load({params:{idEje:g.data.idEje}})}});Ext.define("CoomuceMod.view.Parametros.ParticipacionSocial.UnidadModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.parametros-participacionsocial-unidad",stores:{getEje:{autoLoad:true,model:"CoomuceMod.model.Parametros.ParticipacionSocial.Eje",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetEjeAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getUnidad:{autoLoad:false,model:"CoomuceMod.model.Parametros.ParticipacionSocial.Unidad",listeners:{load:function(l,g,i,h,j){var k=Ext.decode(h._response.responseText);l.identity=k.identity}},identity:0,proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetUnidadAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Parametros.ParticipacionSocial.Unidad",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Parametros.ParticipacionSocial.UnidadController","CoomuceMod.view.Parametros.ParticipacionSocial.UnidadModel"],controller:"parametros-participacionsocial-unidad",viewModel:{type:"parametros-participacionsocial-unidad"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"top",ui:"footer",items:[{xtype:"combo",bind:{store:"{getEje}"},displayField:"compEje",emptyText:"-- Seleccione eje --",gridField:true,listeners:{select:"onSelectCombo"},queryMode:"local",reference:"eje",valueField:"idEje",width:400}]},{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},{xtype:"toolbar",dock:"top",ui:"footer",items:[{text:"Adicionar",iconCls:"x-fa fa-file-o",handler:"onBotonAdicionarClick"},"-",{text:"Eliminar",iconCls:"x-fa fa-eraser",handler:"onBotonEliminarClick",reference:"eliminarButton",disabled:true}]}],items:[{xtype:"grid",bind:{store:"{getUnidad}"},columns:[{dataIndex:"idUnidad",header:"Id",hidden:true},{dataIndex:"codigoUnidad",header:"Código",width:100,editor:{allowBlank:false}},{dataIndex:"nombreUnidad",header:"Nombre",width:300,editor:{allowBlank:false}}],columnLines:true,id:"Grid-Unidad-Principal",loadMask:true,plugins:{ptype:"cellediting",clicksToEdit:1},selModel:{type:"checkboxmodel",checkOnly:true,listeners:{selectionchange:"onGridSelectionChange"}},sortableColumns:false}]});Ext.define("CoomuceMod.view.ParticipacionSocial.ListadoAsistenciaGeneralController",{extend:"Ext.app.ViewController",alias:"controller.participacionsocial-listadoasistenciageneral",getTitleView:function(){return this.getView().getTitle()},onBotonGuardarClick:function(){var i=this;var f=i.getTitleView();var j=Ext.getCmp("Form-ListadoAsistenciaGeneral-Principal");if(!j.getForm().isValid()){Coomuce.Util.ShowMessage({type:"ERROR",title:f,msg:"Se encontraron campos obligatorios que deben ser diligenciados."});return false}var g=Ext.getCmp("Grid-ListadoAsistenciaGeneral").getStore();var h=[];Ext.each(g.data.items,function(c,b,a){if(c.dirty){if(c.phantom&&c.data.idFuanAfiliado!==0){var d=0;console.log(c.data);h.forEach(function(e){if(c.data.identificacionFuanAfiliado==h.identificacionFuanAfiliado){d++}});if(d==0){h.push(c.data)}}}});if(h.length===0){Coomuce.Util.ShowMessage({type:"ERROR",title:f,msg:"Debe agregar items en la lista."});return false}Ext.Msg.confirm(f,"Desea guardar las modificaciones?",function(a){if(a==="yes"){var c=j.getForm().getValues();c.idAsistenciaGeneral=Ext.isEmpty(c.idAsistenciaGeneral)?0:parseInt(c.idAsistenciaGeneral);c.idUsuario=Coomuce.Util.DatosUsuario.idUsuario;var b={url:Coomuce.Url.Funciones+"ListaAsistenciaGeneralGuardar",data:{infoAsistencia:c,listaAsistencia:h},targetMask:j,msgMask:"Guardando datos...",fnSuccess:function(e){j.getForm().reset();g.removeAll();var d=Ext.getCmp("CoomuceListadoAsistenciaGeneral");d.destroy()}};Coomuce.Util.EnviarPost(b)}})},onBotonCancelarClick:function(){var b=this;Ext.Msg.confirm(b.getTitleView(),"Desea cancelar las modificaciones?",function(h){if(h==="yes"){var g=Ext.getCmp("Form-ListadoAsistenciaGeneral-Principal");g.getForm().reset();var a=Ext.getCmp("Grid-ListadoAsistenciaGeneral").getStore();a.removeAll();var f=Ext.getCmp("CoomuceListadoAsistenciaGeneral");f.destroy()}})},onBotonConsultarClick:function(){var h=this;var f=h.getViewModel().getStore("getAsistenciaGeneral");var e=Ext.create("Ext.grid.Panel",{columns:[{dataIndex:"idAsistenciaGeneral",header:"No. Formato",width:100},{xtype:"datecolumn",dataIndex:"fechaAsistenciaGeneral",format:"d/m/Y",header:"Fecha",width:100},{dataIndex:"formadorAsistenciaGeneral",header:"Formador",width:200}],columnLines:true,listeners:{rowdblclick:function(u,t,d,c,s,r){var b=h.lookupReference("idCiudad");var a=h.lookupReference("idUnidad");var w=h.lookupReference("idModulo");b.getStore().load({params:{idDepartamento:t.get("idDepartamento")}});a.getStore().load({params:{idEje:t.get("idEje")}});w.getStore().load({params:{idUnidad:t.get("idUnidad")}});var v=Ext.getCmp("Form-ListadoAsistenciaGeneral-Principal");var q=Ext.getCmp("Grid-ListadoAsistenciaGeneral").getStore();v.loadRecord(t);q.add(t.data.listaAsistencia);g.close()}},store:f});var g=Ext.create("Ext.window.Window",{height:400,items:[e],layout:"fit",modal:true,title:"Consulta Asistencia General",width:500});g.show();f.load()},onBotonGridAdicionarClick:function(){var l=this;var i=l.lookupReference("idAsistenciaGeneral");var n=Ext.getCmp("Grid-ListadoAsistenciaGeneral");var h=n.getStore();var m=h.getCount();var j=Ext.isEmpty(i.getValue())?0:parseInt(i.getValue());var k=[{idAsistenciaGeneral:j,idFuanAfiliado:0,nombreCompletoAfiliado:"",codigoTipoIdentificacion:"",identificacionFuanAfiliado:"",direccionFuanAfiliado:"",areaEntidadListaAsistenciaGeneral:"",telefonoFuanAfiliado:"",firmaListaAsistenciaGeneral:""}];h.insert(m,k);n.focus();n.getSelectionModel().select(m)},onBotonGridRemoverClick:function(){var b=Ext.getCmp("Grid-ListadoAsistenciaGeneral");b.getStore().remove(b.selModel.getSelection())},onSelectCombo:function(m,j,o){var n=this;console.log(m);if(!m.dependent){var k=Ext.getCmp("Grid-ListadoAsistenciaGeneral").selModel.getSelection();if(m.updateRecords!==undefined){for(var p=0;p<m.campos.length;p++){k[0].set(m.campos[p],j.get(m.campos[p]))}}else{k[0].set(m.idCampo,j.get(m.idCampo))}}else{if(m.campoReference!=undefined){var i=n.lookupReference(m.campoReference);i.setValue(j.get(m.campo))}else{var i=n.lookupReference(m.campoDependent);console.log(i.getStore());var l={};l[m.name]=j.get(m.name);i.getStore().load({params:l})}}},onUploadDataComplete:function(g,h){var e=this.getTitleView();var f=g.getWidgetRecord();f.set("firmaListaAsistenciaGeneral",h.data);Coomuce.Util.ShowMessage({type:"INFO",title:e,msg:"Archivo de firma importado correctamente."})},onUploadError:function(h,j){var f=this;var g=f.getTitleView();var i="ErrorType: "+j.errorType;switch(j.errorType){case"FileSize":i="Este archivo es demasiado grande: "+Ext.util.Format.fileSize(j.fileSize)+". El tamaño máximo de subida es "+Ext.util.Format.fileSize(j.maxFileSize)+".";break;case"QueueLength":i="La longitud de la cola es demasiado larga: "+j.queueLength+". La longitud máxima de la cola es "+j.maxQueueLength+".";break}Coomuce.Util.ShowMessage({type:"ERROR",title:g,msg:i})},onBotonEliminarArchivoClick:function(c){var d=c.getWidgetRecord();d.set("firmaListaAsistenciaGeneral","")}});Ext.define("CoomuceMod.view.ParticipacionSocial.ListadoAsistenciaGeneralModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.participacionsocial-listadoasistenciageneral",stores:{getGruposFocales:{autoLoad:true,model:"CoomuceMod.model.Parametros.Generales.GruposFocales",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetGruposFocalesAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getDepartamento:{autoLoad:true,model:"CoomuceMod.model.Administracion.Departamento",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Administracion+"GetDepartamentoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getCiudad:{autoLoad:false,model:"CoomuceMod.model.Administracion.Ciudad",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Administracion+"GetCiudadAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getEje:{autoLoad:true,model:"CoomuceMod.model.Parametros.ParticipacionSocial.Eje",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetEjeAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getUnidad:{autoLoad:false,model:"CoomuceMod.model.Parametros.ParticipacionSocial.Unidad",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetUnidadAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getModulo:{autoLoad:false,model:"CoomuceMod.model.Parametros.ParticipacionSocial.Modulo",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Parametros+"GetModuloAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},setListadoAsistencia:{fields:["idListaAsistenciaGeneral","idFuanAfiliado","nombreCompletoAfiliado","codigoTipoIdentificacion","identificacionFuanAfiliado","direccionFuanAfiliado","telefonoFuanAfiliado","areaEntidadListaAsistenciaGeneral","firmaListaAsistenciaGeneral"]},getAsistenciaGeneral:{autoLoad:false,fields:["idAsistenciaGeneral",{name:"fechaAsistenciaGeneral",convert:Coomuce.Util.parseDate},"idDepartamento","compDepartamento","idCiudad","compCiudad","idGruposFocales","idEje","idUnidad","idModulo","temaAsistenciaGeneral","formadorAsistenciaGeneral","listaAsistencia"],proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Funciones+"GetAsistenciaGeneralAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.ParticipacionSocial.ListadoAsistenciaGeneral",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.ParticipacionSocial.ListadoAsistenciaGeneralController","CoomuceMod.view.ParticipacionSocial.ListadoAsistenciaGeneralModel"],controller:"participacionsocial-listadoasistenciageneral",viewModel:{type:"participacionsocial-listadoasistenciageneral"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"top",ui:"footer",layout:{pack:"right"},items:[{minWidth:80,iconCls:"x-fa fa-list-alt",text:"Consultar",handler:"onBotonConsultarClick"}]},{xtype:"toolbar",dock:"bottom",ui:"footer",layout:{pack:"left"},items:[{minWidth:80,text:"Guardar",handler:"onBotonGuardarClick",reference:"botonGuardar"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick",reference:"botonCancelar"}]}],items:[{xtype:"form",bodyPadding:10,scrollable:true,id:"Form-ListadoAsistenciaGeneral-Principal",items:[{xtype:"datefield",fieldLabel:"Fecha",format:"d/m/Y",name:"fechaAsistenciaGeneral",value:new Date(),width:300},{layout:{type:"table",columns:3},items:[{items:[{xtype:"numberfield",hidden:true,name:"idAsistenciaGeneral",reference:"idAsistenciaGeneral"},{xtype:"combo",allowBlank:false,bind:{store:"{getDepartamento}"},campoDependent:"idCiudad",dependent:true,displayField:"compDepartamento",editable:false,fieldLabel:"Departamento",listeners:{select:"onSelectCombo"},name:"idDepartamento",queryMode:"local",reference:"idDepartamento",valueField:"idDepartamento",width:300}]},{items:[{xtype:"combo",allowBlank:false,bind:{store:"{getCiudad}"},displayField:"compCiudad",editable:false,fieldLabel:"Municipio",name:"idCiudad",queryMode:"local",reference:"idCiudad",valueField:"idCiudad",width:300}]},{items:[{xtype:"combo",allowBlank:false,bind:{store:"{getEje}"},campoDependent:"idUnidad",dependent:true,displayField:"compEje",editable:false,fieldLabel:"Eje",listeners:{select:"onSelectCombo"},name:"idEje",queryMode:"local",reference:"idEje",valueField:"idEje",width:300}]},{items:[{xtype:"combo",allowBlank:false,bind:{store:"{getGruposFocales}"},displayField:"compGruposFocales",editable:false,fieldLabel:"Grupo Focal",name:"idGruposFocales",queryMode:"local",valueField:"idGruposFocales",width:300}]},{items:[{xtype:"textfield",allowBlank:false,fieldLabel:"Tema",name:"temaAsistenciaGeneral",readOnly:true,reference:"temaAsistenciaGeneral",width:300}]},{items:[{xtype:"combo",allowBlank:false,bind:{store:"{getUnidad}"},campoDependent:"idModulo",dependent:true,displayField:"compUnidad",editable:false,fieldLabel:"Unidad",listeners:{select:"onSelectCombo"},name:"idUnidad",queryMode:"local",reference:"idUnidad",valueField:"idUnidad",width:300}]},{colspan:2,items:[{xtype:"textfield",allowBlank:false,fieldLabel:"Formador",name:"formadorAsistenciaGeneral",value:Coomuce.Util.DatosUsuario.nombreUsuario,width:600}]},{items:[{xtype:"combo",allowBlank:false,bind:{store:"{getModulo}"},campo:"nombreModulo",campoReference:"temaAsistenciaGeneral",dependent:true,displayField:"codigoModulo",editable:false,fieldLabel:"Modulo",listeners:{select:"onSelectCombo"},name:"idModulo",queryMode:"local",reference:"idModulo",valueField:"idModulo",width:300}]}]},{xtype:"grid",bind:{store:"{setListadoAsistencia}"},border:true,columns:[{xtype:"rownumberer"},{dataIndex:"identificacionFuanAfiliado",header:"No. Documento de Identidad",width:200},{xtype:"widgetcolumn",header:"",width:40,widget:{xtype:"button",componentReference:["idFuanAfiliado","codigoTipoIdentificacion","identificacionFuanAfiliado","nombreCompletoAfiliado","direccionFuanAfiliado","telefonoFuanAfiliado"],handler:Coomuce.Util.buscarAfiliado,inGrid:true,iconCls:"x-fa fa-list-alt",tooltip:"Lista de Afiliados"}},{dataIndex:"codigoTipoIdentificacion",header:"Tipo Documento",width:150},{dataIndex:"nombreCompletoAfiliado",header:"Nombre y Apellido",width:300},{dataIndex:"direccionFuanAfiliado",header:"Dirección",width:200},{dataIndex:"telefonoFuanAfiliado",header:"Teléfono",width:200},{dataIndex:"areaEntidadListaAsistenciaGeneral",header:"Entidad",width:150},{xtype:"widgetcolumn",header:"",width:60,widget:{xtype:"uploader",uploadConfig:{uploadUrl:Coomuce.Url.Funciones+"ImportarFirma",maxFileSize:10*1024*1024},inputAttrTpl:"data-qtip='Seleccione el archivo.'",listeners:{uploaddatacomplete:"onUploadDataComplete",uploaderror:"onUploadError"}}},{xtype:"widgetcolumn",dataIndex:"firmaListaAsistenciaGeneral",header:"Archivo de firma",width:200,widget:{xtype:"button",iconCls:"x-fa fa-minus-circle",textAlign:"left",handler:"onBotonEliminarArchivoClick"}}],columnLines:true,height:350,id:"Grid-ListadoAsistenciaGeneral",plugins:{ptype:"cellediting",clicksToEdit:1},sortableColumns:false,tbar:{items:[{handler:"onBotonGridAdicionarClick",iconCls:"x-fa fa-plus-circle",text:"Adicionar"},{handler:"onBotonGridRemoverClick",iconCls:"x-fa fa-minus-circle",text:"Remover"}]}}]}]});Ext.define("CoomuceMod.view.ReportesIndividuales.GenerarController",{extend:"Ext.app.ViewController",alias:"controller.reportes-individuales-generar",onBotonAbrirTabClick:function(){var j=this;var g=j.lookupReference("gridListaReportesIndividuales");var k=g.selModel.getSelection();var l=j.lookupReference("tabReportes");var i=l.items.findIndex("$className",k[0].data.vista);console.log(i);if(i>-1){l.setActiveTab(i);return false}Ext.destroy(k[0].data.vista);var h=Ext.create(k[0].data.vista,{border:true,closable:true,idReporte:k[0].data.idReporte,iconCls:"x-fa fa-book",listeners:{destroy:function(b,a){Ext.destroy(k[0].data.vista)}},title:"Reporte de "+k[0].data.nombreReporte});l.add(h);l.setActiveTab(h)},onBotonCancelarClick:function(){var b=this;Ext.Msg.confirm("Atención","Desea cancelar las modificaciones?",function(a){if(a==="yes"){var d=Ext.getCmp("CoomuceGenerarReporteIndividual");d.destroy()}})}});Ext.define("CoomuceMod.view.ReportesIndividuales.GenerarModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.reportes-individuales-generar",stores:{getListaReportesIndividuales:{autoLoad:true,proxy:{type:"ajax",url:"../resources/ListaReportesIndividuales.json",reader:{type:"json",rootProperty:"data"}}}}});Ext.define("CoomuceMod.view.ReportesIndividuales.Generar",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.ReportesIndividuales.GenerarController","CoomuceMod.view.ReportesIndividuales.GenerarModel"],controller:"reportes-individuales-generar",viewModel:{type:"reportes-individuales-generar"},layout:"border",items:[{xtype:"grid",bind:{store:"{getListaReportesIndividuales}"},border:true,columns:[{dataIndex:"nombreReporte",header:"Seleccione reporte",width:300}],columnLines:true,loadMask:true,reference:"gridListaReportesIndividuales",region:"west",split:true,tbar:{ui:"footer",items:[{text:"Abrir vista de reporte",handler:"onBotonAbrirTabClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},width:250},{xtype:"tabpanel",reference:"tabReportes",region:"center",split:true}]});Ext.define("CoomuceMod.view.ReportesIndividuales.Interfaces.ConsolidadoAsistenciaGeneralController",{extend:"Ext.app.ViewController",alias:"controller.reportes-individuales-interfaces-consolidadoasistenciageneral",onBotonGenerarReporteClick:function(){var b="&documento="+Ext.getCmp("CAG-ParamDocumento").getValue();console.log(b);Coomuce.Util.lanzarReporte(this.getView(),{idReporte:this.getView().idReporte,optional:b})}});Ext.define("CoomuceMod.view.ReportesIndividuales.Interfaces.ConsolidadoAsistenciaGeneralModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.reportes-individuales-interfaces-consolidadoasistenciageneral"});Ext.define("CoomuceMod.view.ReportesIndividuales.Interfaces.ConsolidadoAsistenciaGeneral",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.ReportesIndividuales.Interfaces.ConsolidadoAsistenciaGeneralController","CoomuceMod.view.ReportesIndividuales.Interfaces.ConsolidadoAsistenciaGeneralModel"],controller:"reportes-individuales-interfaces-consolidadoasistenciageneral",viewModel:{type:"reportes-individuales-interfaces-consolidadoasistenciageneral"},layout:"fit",dockedItems:[{xtype:"toolbar",layout:{align:"middle"},items:[{xtype:"textfield",fieldLabel:"Documento del Afiliado",hideLabel:false,id:"CAG-ParamDocumento",width:300},"->",{text:"Generar",handler:"onBotonGenerarReporteClick"}],ui:"footer"}]});Ext.define("CoomuceMod.view.ReportesIndividuales.Interfaces.ConsolidadoFactorRiesgoController",{extend:"Ext.app.ViewController",alias:"controller.reportes-individuales-interfaces-consolidadofactorriesgo",onBotonGenerarReporteClick:function(){var b="&documento="+Ext.getCmp("CFR-ParamDocumento").getValue()+"&fechahistoria="+Ext.getCmp("CFR-ParamFichas").getValue();Coomuce.Util.lanzarReporte(this.getView(),{idReporte:this.getView().idReporte,optional:b})},onBotonBuscarClick:function(){var c=Ext.getCmp("Form-Hfdfr-Report");var d={url:Coomuce.Url.Funciones+"HfdfrConsultar",data:{documento:Ext.getCmp("CFR-ParamDocumento").getValue()},targetMask:c,msgMask:"Buscando Historias...",fnSuccess:function(b){if(b.data.length>0){var a=Ext.getStore("getHistoriasStore");a.removeAll();a.add(b.data)}}};console.log(d);Coomuce.Util.EnviarPost(d)}});Ext.define("CoomuceMod.view.ReportesIndividuales.Interfaces.ConsolidadoFactorRiesgoModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.reportes-individuales-interfaces-consolidadofactorriesgo",stores:{getHistorias:{storeId:"getHistoriasStore",autoLoad:true,fields:["IdHistoria","fechaHistoria"],data:[]}}});Ext.define("CoomuceMod.view.ReportesIndividuales.Interfaces.ConsolidadoFactorRiesgo",{extend:"Ext.panel.Panel",id:"Form-Hfdfr-Report",requires:["CoomuceMod.view.ReportesIndividuales.Interfaces.ConsolidadoFactorRiesgoController","CoomuceMod.view.ReportesIndividuales.Interfaces.ConsolidadoFactorRiesgoModel"],controller:"reportes-individuales-interfaces-consolidadofactorriesgo",viewModel:{type:"reportes-individuales-interfaces-consolidadofactorriesgo"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"top",layout:{align:"middle"},items:[{xtype:"textfield",fieldLabel:"Documento del Afiliado",hideLabel:false,id:"CFR-ParamDocumento",width:300},"->",{text:"Buscar",handler:"onBotonBuscarClick"}],ui:"footer"},{xtype:"toolbar",dock:"top",items:[{xtype:"combo",bind:{store:"{getHistorias}"},displayField:"fechaVisitaHfdfr",editable:false,fieldLabel:"Historias Disponibles",id:"CFR-ParamFichas",queryMode:"local",valueField:"fechaVisitaHfdfr"},"->",{text:"Generar",handler:"onBotonGenerarReporteClick"}],ui:"footer"}]});Ext.define("CoomuceMod.view.ReportesIndividuales.Interfaces.ConsolidadoPlanillaUnicaController",{extend:"Ext.app.ViewController",alias:"controller.reportes-individuales-interfaces-consolidadoplanillaunica",onBotonGenerarReporteClick:function(){var b="&documento="+Ext.getCmp("CPU-ParamDocumento").getValue();console.log(b);Coomuce.Util.lanzarReporte(this.getView(),{idReporte:this.getView().idReporte,optional:b})}});Ext.define("CoomuceMod.view.ReportesIndividuales.Interfaces.ConsolidadoPlanillaUnicaModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.reportes-individuales-interfaces-consolidadoplanillaunica"});Ext.define("CoomuceMod.view.ReportesIndividuales.Interfaces.ConsolidadoPlanillaUnica",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.ReportesIndividuales.Interfaces.ConsolidadoPlanillaUnicaController","CoomuceMod.view.ReportesIndividuales.Interfaces.ConsolidadoPlanillaUnicaModel"],controller:"reportes-individuales-interfaces-consolidadoplanillaunica",viewModel:{type:"reportes-individuales-interfaces-consolidadoplanillaunica"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"top",layout:{align:"middle"},items:[{xtype:"textfield",fieldLabel:"Documento del Afiliado",hideLabel:false,id:"CPU-ParamDocumento",width:300},"->",{text:"Generar",handler:"onBotonGenerarReporteClick"}],ui:"footer"}]});Ext.define("CoomuceMod.view.ReportesIndividuales.Interfaces.FichaIdentificacionController",{extend:"Ext.app.ViewController",alias:"controller.reportes-individuales-interfaces-fichaidentificacion",onBotonGenerarReporteClick:function(){var b="&documento="+Ext.getCmp("FDI-ParamDocumento").getValue()+"&fechaFicha="+Ext.getCmp("FDI-ParamFichas").getValue();Coomuce.Util.lanzarReporte(this.getView(),{idReporte:this.getView().idReporte,optional:b})},onBotonBuscarClick:function(){var c=Ext.getCmp("Form-Ifppir-Report");var d={url:Coomuce.Url.Funciones+"IfppirConsultar",data:{documento:Ext.getCmp("FDI-ParamDocumento").getValue()},targetMask:c,msgMask:"Buscando Fichas...",fnSuccess:function(b){if(b.data.length>0){var a=Ext.getStore("getFichasStore");a.removeAll();a.add(b.data)}}};Coomuce.Util.EnviarPost(d)}});Ext.define("CoomuceMod.view.ReportesIndividuales.Interfaces.FichaIdentificacionModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.reportes-individuales-interfaces-fichaidentificacion",stores:{getFichas:{storeId:"getFichasStore",autoLoad:true,fields:["IdFicha","fechaFicha"],data:[]}}});Ext.define("CoomuceMod.view.ReportesIndividuales.Interfaces.FichaIdentificacion",{extend:"Ext.panel.Panel",id:"Form-Ifppir-Report",requires:["CoomuceMod.view.ReportesIndividuales.Interfaces.FichaIdentificacionController","CoomuceMod.view.ReportesIndividuales.Interfaces.FichaIdentificacionModel"],controller:"reportes-individuales-interfaces-fichaidentificacion",viewModel:{type:"reportes-individuales-interfaces-fichaidentificacion"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"top",layout:{align:"middle"},items:[{xtype:"textfield",fieldLabel:"Documento del Afiliado",hideLabel:false,id:"FDI-ParamDocumento",width:300},"->",{text:"Buscar",handler:"onBotonBuscarClick",width:200}],ui:"footer"},{xtype:"toolbar",dock:"top",items:[{xtype:"combo",bind:{store:"{getFichas}"},displayField:"fechaAplicacionIfppir",editable:false,fieldLabel:"Fichas Disponibles",id:"FDI-ParamFichas",queryMode:"local",valueField:"fechaAplicacionIfppir",width:300},"->",{text:"Generar",handler:"onBotonGenerarReporteClick",width:200}],ui:"footer"}]});Ext.define("CoomuceMod.view.Reportes.GenerarController",{extend:"Ext.app.ViewController",alias:"controller.reportes-generar",onBotonAbrirTabClick:function(){var j=this;var g=j.lookupReference("gridListaReportes");var k=g.selModel.getSelection();var l=j.lookupReference("tabReportes");var i=l.items.findIndex("$className",k[0].data.vista);console.log(i);if(i>-1){l.setActiveTab(i);return false}Ext.destroy(k[0].data.vista);var h=Ext.create(k[0].data.vista,{border:true,closable:true,idReporte:k[0].data.idReporte,iconCls:"x-fa fa-book",listeners:{destroy:function(b,a){Ext.destroy(k[0].data.vista)}},title:"Reporte de "+k[0].data.nombreReporte});l.add(h);l.setActiveTab(h)},onBotonCancelarClick:function(){var b=this;Ext.Msg.confirm("Atención","Desea cancelar las modificaciones?",function(a){if(a==="yes"){var d=Ext.getCmp("CoomuceGenerarReporte");d.destroy()}})}});Ext.define("CoomuceMod.view.Reportes.GenerarModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.reportes-generar",stores:{getListaReportes:{autoLoad:true,proxy:{type:"ajax",url:"../resources/ListaReportes.json",reader:{type:"json",rootProperty:"data"}}}}});Ext.define("CoomuceMod.view.Reportes.Generar",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Reportes.GenerarController","CoomuceMod.view.Reportes.GenerarModel"],controller:"reportes-generar",viewModel:{type:"reportes-generar"},layout:"border",items:[{xtype:"grid",bind:{store:"{getListaReportes}"},border:true,columns:[{dataIndex:"nombreReporte",header:"Seleccione reporte",width:300}],columnLines:true,loadMask:true,reference:"gridListaReportes",region:"west",split:true,tbar:{ui:"footer",items:[{text:"Abrir vista de reporte",handler:"onBotonAbrirTabClick"},{minWidth:80,text:"Cancelar",handler:"onBotonCancelarClick"}]},width:250},{xtype:"tabpanel",reference:"tabReportes",region:"center",split:true}]});Ext.define("CoomuceMod.view.Reportes.Interfaces.CicloVitalController",{extend:"Ext.app.ViewController",alias:"controller.reportes-interfaces-ciclovital",onToolbarBeforeRender:function(e,f){var d=Coomuce.Util.barraFiltroReportes([["edadMinCicloVital","Edad Min.","int"],["edadMaxCicloVital","Edad Max.","int"]],this,{idReporte:this.getView().idReporte});e.add(d.items)}});Ext.define("CoomuceMod.view.Reportes.Interfaces.CicloVitalModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.reportes-interfaces-ciclovital"});Ext.define("CoomuceMod.view.Reportes.Interfaces.CicloVital",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Reportes.Interfaces.CicloVitalController","CoomuceMod.view.Reportes.Interfaces.CicloVitalModel"],controller:"reportes-interfaces-ciclovital",viewModel:{type:"reportes-interfaces-ciclovital"},layout:"fit",tbar:{xtype:"toolbar",layout:{align:"middle"},listeners:{beforerender:"onToolbarBeforeRender"},ui:"footer"}});Ext.define("CoomuceMod.view.Reportes.Interfaces.CondicionDiscapacidadController",{extend:"Ext.app.ViewController",alias:"controller.reportes-interfaces-condiciondiscapacidad",onToolbarBeforeRender:function(e,f){var d=Coomuce.Util.barraFiltroReportes([["codigoCondicionDiscapacidad","Código","string"],["nombreCondicionDiscapacidad","Nombre","string"]],this,{idReporte:this.getView().idReporte});e.add(d.items)}});Ext.define("CoomuceMod.view.Reportes.Interfaces.CondicionDiscapacidadModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.reportes-interfaces-condiciondiscapacidad"});Ext.define("CoomuceMod.view.Reportes.Interfaces.CondicionDiscapacidad",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Reportes.Interfaces.CondicionDiscapacidadController","CoomuceMod.view.Reportes.Interfaces.CondicionDiscapacidadModel"],controller:"reportes-interfaces-condiciondiscapacidad",viewModel:{type:"reportes-interfaces-condiciondiscapacidad"},layout:"fit",tbar:{xtype:"toolbar",layout:{align:"middle"},listeners:{beforerender:"onToolbarBeforeRender"},ui:"footer"}});Ext.define("CoomuceMod.view.Reportes.Interfaces.CondicionesViviendaController",{extend:"Ext.app.ViewController",alias:"controller.reportes-interfaces-condicionesvivienda",onToolbarBeforeRender:function(e,f){var d=Coomuce.Util.barraFiltroReportes([["nombreCondicionVivienda","Nombre","string"]],this,{idReporte:this.getView().idReporte});e.add(d.items)}});Ext.define("CoomuceMod.view.Reportes.Interfaces.CondicionesViviendaModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.reportes-interfaces-condicionesvivienda"});Ext.define("CoomuceMod.view.Reportes.Interfaces.CondicionesVivienda",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Reportes.Interfaces.CondicionesViviendaController","CoomuceMod.view.Reportes.Interfaces.CondicionesViviendaModel"],controller:"reportes-interfaces-condicionesvivienda",viewModel:{type:"reportes-interfaces-condicionesvivienda"},layout:"fit",tbar:{xtype:"toolbar",layout:{align:"middle"},listeners:{beforerender:"onToolbarBeforeRender"},ui:"footer"}});Ext.define("CoomuceMod.view.Reportes.Interfaces.ConsolidadoAsistenciaGeneralController",{extend:"Ext.app.ViewController",alias:"controller.reportes-interfaces-consolidadoasistenciageneral",onBotonGenerarReporteClick:function(){var b="&fechaInicio="+Ext.getCmp("CAG-ParamFechaInicio").getSubmitValue()+"&fechaFin="+Ext.getCmp("CAG-ParamFechaFin").getSubmitValue()+"&idCiudad="+Ext.getCmp("CAG-ParamCiudad").getValue();console.log(b);Coomuce.Util.lanzarReporte(this.getView(),{idReporte:this.getView().idReporte,optional:b})},onSelectCombo:function(h,g,f){var i=this;if(h.ubicacion!==undefined){var j=Ext.getCmp(h.ciudadReference);console.log(j);j.getStore().load({params:{idDepartamento:g.get("idDepartamento")}})}}});Ext.define("CoomuceMod.view.Reportes.Interfaces.ConsolidadoAsistenciaGeneralModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.reportes-interfaces-consolidadoasistenciageneral",stores:{getUsuario:{autoLoad:true,fields:[{name:"idUsuario",type:"int"},{name:"idTipoIdentificacion",type:"int"},{name:"nombreTipoIdentificacion",type:"string"},{name:"identificacionUsuario",type:"string"},{name:"primerApellidoUsuario",type:"string"},{name:"segundoApellidoUsuario",type:"string"},{name:"primerNombreUsuario",type:"string"},{name:"segundoNombreUsuario",type:"string"},{name:"nombreCompletoGestor",convert:function(c,d){return d.get("primerApellidoUsuario")+" "+d.get("segundoApellidoUsuario")+" "+d.get("primerNombreUsuario")+" "+d.get("segundoNombreUsuario")}}],proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Administracion+"GetUsuarioAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getCiudad:{autoLoad:false,model:"CoomuceMod.model.Administracion.Ciudad",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Administracion+"GetCiudadAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getDepartamento:{autoLoad:true,model:"CoomuceMod.model.Administracion.Departamento",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Administracion+"GetDepartamentoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Reportes.Interfaces.ConsolidadoAsistenciaGeneral",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Reportes.Interfaces.ConsolidadoAsistenciaGeneralController","CoomuceMod.view.Reportes.Interfaces.ConsolidadoAsistenciaGeneralModel"],controller:"reportes-interfaces-consolidadoasistenciageneral",viewModel:{type:"reportes-interfaces-consolidadoasistenciageneral"},layout:"fit",dockedItems:[{xtype:"toolbar",layout:{align:"middle"},items:[{xtype:"datefield",fieldLabel:"Fecha Inicio",format:"Y-m-d",id:"CAG-ParamFechaInicio",labelWidth:70,maxValue:new Date(),submitFormat:"Y-m-d",value:new Date(),width:200},{xtype:"datefield",fieldLabel:"Fecha Fin",format:"Y-m-d",id:"CAG-ParamFechaFin",labelWidth:60,maxValue:new Date(),submitFormat:"Y-m-d",value:new Date(),width:200},"->",{text:"Generar",handler:"onBotonGenerarReporteClick"}],ui:"footer"},{xtype:"toolbar",dock:"top",items:[{xtype:"combo",bind:{store:"{getDepartamento}"},ciudadReference:"CAG-ParamCiudad",displayField:"compDepartamento",editable:false,fieldLabel:"Departamento",id:"CAG-ParamDepartamento",listeners:{select:"onSelectCombo"},queryMode:"local",ubicacion:true,valueField:"idDepartamento"},{xtype:"combo",bind:{store:"{getCiudad}"},displayField:"compCiudad",editable:false,fieldLabel:"Municipio/Distrito",id:"CAG-ParamCiudad",queryMode:"local",valueField:"idCiudad"}],ui:"footer"}]});Ext.define("CoomuceMod.view.Reportes.Interfaces.ConsolidadoFactorRiesgoController",{extend:"Ext.app.ViewController",alias:"controller.reportes-interfaces-consolidadofactorriesgo",onBotonGenerarReporteClick:function(){var b="&fechaInicio="+Ext.getCmp("CFR-ParamFechaInicio").getSubmitValue()+"&fechaFin="+Ext.getCmp("CFR-ParamFechaFin").getSubmitValue()+"&idCiudad="+Ext.getCmp("CFR-ParamCiudad").getValue();Coomuce.Util.lanzarReporte(this.getView(),{idReporte:this.getView().idReporte,optional:b})},onSelectCombo:function(h,g,f){var i=this;if(h.ubicacion!==undefined){var j=Ext.getCmp(h.ciudadReference);console.log(j);j.getStore().load({params:{idDepartamento:g.get("idDepartamento")}})}}});Ext.define("CoomuceMod.view.Reportes.Interfaces.ConsolidadoFactorRiesgoModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.reportes-interfaces-consolidadofactorriesgo",stores:{getCiudad:{autoLoad:false,model:"CoomuceMod.model.Administracion.Ciudad",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Administracion+"GetCiudadAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getDepartamento:{autoLoad:true,model:"CoomuceMod.model.Administracion.Departamento",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Administracion+"GetDepartamentoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Reportes.Interfaces.ConsolidadoFactorRiesgo",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Reportes.Interfaces.ConsolidadoFactorRiesgoController","CoomuceMod.view.Reportes.Interfaces.ConsolidadoFactorRiesgoModel"],controller:"reportes-interfaces-consolidadofactorriesgo",viewModel:{type:"reportes-interfaces-consolidadofactorriesgo"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"top",layout:{align:"middle"},items:[{xtype:"datefield",fieldLabel:"Fecha Inicio",format:"Y-m-d",id:"CFR-ParamFechaInicio",labelWidth:70,maxValue:new Date(),submitFormat:"Y-m-d",value:new Date(),width:200},{xtype:"datefield",fieldLabel:"Fecha Fin",format:"Y-m-d",id:"CFR-ParamFechaFin",labelWidth:60,maxValue:new Date(),submitFormat:"Y-m-d",value:new Date(),width:200},"->",{text:"Generar",handler:"onBotonGenerarReporteClick"}],ui:"footer"},{xtype:"toolbar",dock:"top",items:[{xtype:"combo",bind:{store:"{getDepartamento}"},ciudadReference:"CFR-ParamCiudad",displayField:"compDepartamento",editable:false,fieldLabel:"Departamento",id:"CFR-ParamDepartamento",listeners:{select:"onSelectCombo"},queryMode:"local",ubicacion:true,valueField:"idDepartamento"},{xtype:"combo",bind:{store:"{getCiudad}"},displayField:"compCiudad",editable:false,fieldLabel:"Municipio/Distrito",id:"CFR-ParamCiudad",queryMode:"local",valueField:"idCiudad"}],ui:"footer"}]});Ext.define("CoomuceMod.view.Reportes.Interfaces.ConsolidadoPlanillaUnicaController",{extend:"Ext.app.ViewController",alias:"controller.reportes-interfaces-consolidadoplanillaunica",onBotonGenerarReporteClick:function(){var b="&fechaInicio="+Ext.getCmp("CPU-ParamFechaInicio").getSubmitValue()+"&fechaFin="+Ext.getCmp("CPU-ParamFechaFin").getSubmitValue()+"&idCiudad="+Ext.getCmp("CPU-ParamCiudad").getValue();console.log(b);Coomuce.Util.lanzarReporte(this.getView(),{idReporte:this.getView().idReporte,optional:b})},onSelectCombo:function(h,g,f){var i=this;if(h.ubicacion!==undefined){var j=Ext.getCmp(h.ciudadReference);console.log(j);j.getStore().load({params:{idDepartamento:g.get("idDepartamento")}})}}});Ext.define("CoomuceMod.view.Reportes.Interfaces.ConsolidadoPlanillaUnicaModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.reportes-interfaces-consolidadoplanillaunica",stores:{getCiudad:{autoLoad:false,model:"CoomuceMod.model.Administracion.Ciudad",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Administracion+"GetCiudadAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getDepartamento:{autoLoad:true,model:"CoomuceMod.model.Administracion.Departamento",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Administracion+"GetDepartamentoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Reportes.Interfaces.ConsolidadoPlanillaUnica",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Reportes.Interfaces.ConsolidadoPlanillaUnicaController","CoomuceMod.view.Reportes.Interfaces.ConsolidadoPlanillaUnicaModel"],controller:"reportes-interfaces-consolidadoplanillaunica",viewModel:{type:"reportes-interfaces-consolidadoplanillaunica"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"top",layout:{align:"middle"},items:[{xtype:"datefield",fieldLabel:"Fecha Inicio",format:"Y-m-d",id:"CPU-ParamFechaInicio",labelWidth:70,maxValue:new Date(),submitFormat:"Y-m-d",value:new Date(),width:200},{xtype:"datefield",fieldLabel:"Fecha Fin",format:"Y-m-d",id:"CPU-ParamFechaFin",labelWidth:60,maxValue:new Date(),submitFormat:"Y-m-d",value:new Date(),width:200},"->",{text:"Generar",handler:"onBotonGenerarReporteClick"}],ui:"footer"},{xtype:"toolbar",dock:"top",items:[{xtype:"combo",bind:{store:"{getDepartamento}"},ciudadReference:"CPU-ParamCiudad",displayField:"compDepartamento",editable:false,fieldLabel:"Departamento",id:"CPU-ParamDepartamento",listeners:{select:"onSelectCombo"},queryMode:"local",ubicacion:true,valueField:"idDepartamento"},{xtype:"combo",bind:{store:"{getCiudad}"},displayField:"compCiudad",editable:false,fieldLabel:"Municipio/Distrito",id:"CPU-ParamCiudad",queryMode:"local",valueField:"idCiudad"}],ui:"footer"}]});Ext.define("CoomuceMod.view.Reportes.Interfaces.DeclaracionAutorizacionController",{extend:"Ext.app.ViewController",alias:"controller.reportes-interfaces-declaracionautorizacion",onToolbarBeforeRender:function(e,f){var d=Coomuce.Util.barraFiltroReportes([["codigoDeclaracionAutorizacion","Código","string"],["descripcionDeclaracionAutorizacion","Descripción","string"]],this,{idReporte:this.getView().idReporte});e.add(d.items)}});Ext.define("CoomuceMod.view.Reportes.Interfaces.DeclaracionAutorizacionModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.reportes-interfaces-declaracionautorizacion"});Ext.define("CoomuceMod.view.Reportes.Interfaces.DeclaracionAutorizacion",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Reportes.Interfaces.DeclaracionAutorizacionController","CoomuceMod.view.Reportes.Interfaces.DeclaracionAutorizacionModel"],controller:"reportes-interfaces-declaracionautorizacion",viewModel:{type:"reportes-interfaces-declaracionautorizacion"},layout:"fit",tbar:{xtype:"toolbar",layout:{align:"middle"},listeners:{beforerender:"onToolbarBeforeRender"},ui:"footer"}});Ext.define("CoomuceMod.view.Reportes.Interfaces.EjeUnidadModuloController",{extend:"Ext.app.ViewController",alias:"controller.reportes-interfaces-ejeunidadmodulo",onToolbarBeforeRender:function(e,f){var d=Coomuce.Util.barraFiltroReportes([["codigoEje","Código Eje","string"],["nombreEje","Eje","string"],["codigoUnidad","Código Unidad","string"],["nombreUnidad","Unidad","string"],["codigoModulo","Código Modulo","string"],["nombreModulo","Modulo","string"]],this,{idReporte:this.getView().idReporte});e.add(d.items)}});Ext.define("CoomuceMod.view.Reportes.Interfaces.EjeUnidadModuloModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.reportes-interfaces-ejeunidadmodulo"});Ext.define("CoomuceMod.view.Reportes.Interfaces.EjeUnidadModulo",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Reportes.Interfaces.EjeUnidadModuloController","CoomuceMod.view.Reportes.Interfaces.EjeUnidadModuloModel"],controller:"reportes-interfaces-ejeunidadmodulo",viewModel:{type:"reportes-interfaces-ejeunidadmodulo"},layout:"fit",tbar:{xtype:"toolbar",layout:{align:"middle"},listeners:{beforerender:"onToolbarBeforeRender"},ui:"footer"}});Ext.define("CoomuceMod.view.Reportes.Interfaces.FactorRiesgoController",{extend:"Ext.app.ViewController",alias:"controller.reportes-interfaces-factorriesgo",onToolbarBeforeRender:function(e,f){var d=Coomuce.Util.barraFiltroReportes([["codigoFactorRiesgo","Código Factor","string"],["nombreFactorRiesgo","Factor","string"],["codigoSubFactorRiesgo","Código Sub Factor","string"],["nombreSubFactorRiesgo","Sub Factor","string"]],this,{idReporte:this.getView().idReporte});e.add(d.items)}});Ext.define("CoomuceMod.view.Reportes.Interfaces.FactorRiesgoModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.reportes-interfaces-factorriesgo"});Ext.define("CoomuceMod.view.Reportes.Interfaces.FactorRiesgo",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Reportes.Interfaces.FactorRiesgoController","CoomuceMod.view.Reportes.Interfaces.FactorRiesgoModel"],controller:"reportes-interfaces-factorriesgo",viewModel:{type:"reportes-interfaces-factorriesgo"},layout:"fit",tbar:{xtype:"toolbar",layout:{align:"middle"},listeners:{beforerender:"onToolbarBeforeRender"},ui:"footer"}});Ext.define("CoomuceMod.view.Reportes.Interfaces.FichaIdentificacionController",{extend:"Ext.app.ViewController",alias:"controller.reportes-interfaces-fichaidentificacion",onBotonGenerarReporteClick:function(){var b="&fechaInicio="+Ext.getCmp("FDI-ParamFechaInicio").getSubmitValue()+"&fechaFin="+Ext.getCmp("FDI-ParamFechaFin").getSubmitValue()+"&idCiudad="+Ext.getCmp("FDI-ParamCiudad").getValue();Coomuce.Util.lanzarReporte(this.getView(),{idReporte:this.getView().idReporte,optional:b})},onSelectCombo:function(h,g,f){var i=this;if(h.ubicacion!==undefined){var j=Ext.getCmp(h.ciudadReference);console.log(j);j.getStore().load({params:{idDepartamento:g.get("idDepartamento")}})}}});Ext.define("CoomuceMod.view.Reportes.Interfaces.FichaIdentificacionModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.reportes-interfaces-fichaidentificacion",stores:{getCiudad:{autoLoad:false,model:"CoomuceMod.model.Administracion.Ciudad",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Administracion+"GetCiudadAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getDepartamento:{autoLoad:true,model:"CoomuceMod.model.Administracion.Departamento",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Administracion+"GetDepartamentoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Reportes.Interfaces.FichaIdentificacion",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Reportes.Interfaces.FichaIdentificacionController","CoomuceMod.view.Reportes.Interfaces.FichaIdentificacionModel"],controller:"reportes-interfaces-fichaidentificacion",viewModel:{type:"reportes-interfaces-fichaidentificacion"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"top",layout:{align:"middle"},items:[{xtype:"datefield",fieldLabel:"Fecha Inicio",format:"Y-m-d",id:"FDI-ParamFechaInicio",labelWidth:70,maxValue:new Date(),submitFormat:"Y-m-d",value:new Date(),width:200},{xtype:"datefield",fieldLabel:"Fecha Fin",format:"Y-m-d",id:"FDI-ParamFechaFin",labelWidth:60,maxValue:new Date(),submitFormat:"Y-m-d",value:new Date(),width:200},"->",{text:"Generar",handler:"onBotonGenerarReporteClick"}],ui:"footer"},{xtype:"toolbar",dock:"top",items:[{xtype:"combo",bind:{store:"{getDepartamento}"},ciudadReference:"FDI-ParamCiudad",displayField:"compDepartamento",editable:false,fieldLabel:"Departamento",id:"FDI-ParamDepartamento",listeners:{select:"onSelectCombo"},queryMode:"local",ubicacion:true,valueField:"idDepartamento"},{xtype:"combo",bind:{store:"{getCiudad}"},displayField:"compCiudad",editable:false,fieldLabel:"Municipio/Distrito",id:"FDI-ParamCiudad",queryMode:"local",valueField:"idCiudad"}],ui:"footer"}]});Ext.define("CoomuceMod.view.Reportes.Interfaces.FindriskController",{extend:"Ext.app.ViewController",alias:"controller.reportes-interfaces-findrisk",onBotonGenerarReporteClick:function(){var b="&fechaInicio="+Ext.getCmp("FIN-ParamFechaInicio").getSubmitValue()+"&fechaFin="+Ext.getCmp("FIN-ParamFechaFin").getSubmitValue()+"&idCiudad="+Ext.getCmp("FIN-ParamCiudad").getValue();console.log(b);Coomuce.Util.lanzarReporte(this.getView(),{idReporte:this.getView().idReporte,optional:b})},onSelectCombo:function(h,g,f){var i=this;if(h.ubicacion!==undefined){var j=Ext.getCmp(h.ciudadReference);console.log(j);j.getStore().load({params:{idDepartamento:g.get("idDepartamento")}})}}});Ext.define("CoomuceMod.view.Reportes.Interfaces.FindriskModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.reportes-interfaces-findrisk",stores:{getCiudad:{autoLoad:false,model:"CoomuceMod.model.Administracion.Ciudad",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Administracion+"GetCiudadAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getDepartamento:{autoLoad:true,model:"CoomuceMod.model.Administracion.Departamento",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Administracion+"GetDepartamentoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Reportes.Interfaces.Findrisk",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Reportes.Interfaces.FindriskController","CoomuceMod.view.Reportes.Interfaces.FindriskModel"],controller:"reportes-interfaces-findrisk",viewModel:{type:"reportes-interfaces-findrisk"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"top",layout:{align:"middle"},items:[{xtype:"datefield",fieldLabel:"Fecha Inicio",format:"Y-m-d",id:"FIN-ParamFechaInicio",labelWidth:70,maxValue:new Date(),submitFormat:"Y-m-d",value:new Date(),width:200},{xtype:"datefield",fieldLabel:"Fecha Fin",format:"Y-m-d",id:"FIN-ParamFechaFin",labelWidth:60,maxValue:new Date(),submitFormat:"Y-m-d",value:new Date(),width:200},"->",{text:"Generar",handler:"onBotonGenerarReporteClick"}],ui:"footer"},{xtype:"toolbar",dock:"top",items:[{xtype:"combo",bind:{store:"{getDepartamento}"},ciudadReference:"FIN-ParamCiudad",displayField:"compDepartamento",editable:false,fieldLabel:"Departamento",id:"FIN-ParamDepartamento",listeners:{select:"onSelectCombo"},queryMode:"local",ubicacion:true,valueField:"idDepartamento"},{xtype:"combo",bind:{store:"{getCiudad}"},displayField:"compCiudad",editable:false,fieldLabel:"Municipio/Distrito",id:"FIN-ParamCiudad",queryMode:"local",valueField:"idCiudad"}],ui:"footer"}]});Ext.define("CoomuceMod.view.Reportes.Interfaces.FramighamController",{extend:"Ext.app.ViewController",alias:"controller.reportes-interfaces-framigham",onBotonGenerarReporteClick:function(){var b="&fechaInicio="+Ext.getCmp("FRA-ParamFechaInicio").getSubmitValue()+"&fechaFin="+Ext.getCmp("FRA-ParamFechaFin").getSubmitValue()+"&idCiudad="+Ext.getCmp("FRA-ParamCiudad").getValue();console.log(b);Coomuce.Util.lanzarReporte(this.getView(),{idReporte:this.getView().idReporte,optional:b})},onSelectCombo:function(h,g,f){var i=this;if(h.ubicacion!==undefined){var j=Ext.getCmp(h.ciudadReference);console.log(j);j.getStore().load({params:{idDepartamento:g.get("idDepartamento")}})}}});Ext.define("CoomuceMod.view.Reportes.Interfaces.FramighamModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.reportes-interfaces-framigham",stores:{getCiudad:{autoLoad:false,model:"CoomuceMod.model.Administracion.Ciudad",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Administracion+"GetCiudadAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getDepartamento:{autoLoad:true,model:"CoomuceMod.model.Administracion.Departamento",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Administracion+"GetDepartamentoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Reportes.Interfaces.Framigham",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Reportes.Interfaces.FramighamController","CoomuceMod.view.Reportes.Interfaces.FramighamModel"],controller:"reportes-interfaces-framigham",viewModel:{type:"reportes-interfaces-framigham"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"top",layout:{align:"middle"},items:[{xtype:"datefield",fieldLabel:"Fecha Inicio",format:"Y-m-d",id:"FRA-ParamFechaInicio",labelWidth:70,maxValue:new Date(),submitFormat:"Y-m-d",value:new Date(),width:200},{xtype:"datefield",fieldLabel:"Fecha Fin",format:"Y-m-d",id:"FRA-ParamFechaFin",labelWidth:60,maxValue:new Date(),submitFormat:"Y-m-d",value:new Date(),width:200},"->",{text:"Generar",handler:"onBotonGenerarReporteClick"}],ui:"footer"},{xtype:"toolbar",dock:"top",items:[{xtype:"combo",bind:{store:"{getDepartamento}"},ciudadReference:"FRA-ParamCiudad",displayField:"compDepartamento",editable:false,fieldLabel:"Departamento",id:"FRA-ParamDepartamento",listeners:{select:"onSelectCombo"},queryMode:"local",ubicacion:true,valueField:"idDepartamento"},{xtype:"combo",bind:{store:"{getCiudad}"},displayField:"compCiudad",editable:false,fieldLabel:"Municipio/Distrito",id:"FRA-ParamCiudad",queryMode:"local",valueField:"idCiudad"}],ui:"footer"}]});Ext.define("CoomuceMod.view.Reportes.Interfaces.GestionFormatosController",{extend:"Ext.app.ViewController",alias:"controller.reportes-interfaces-gestionformatos",onBotonGenerarReporteClick:function(){var b="&nombreTabla="+Ext.getCmp("ParamFormatos").getValue()+"&fechaInicio="+Ext.getCmp("ParamFechaInicio").getSubmitValue()+"&fechaFin="+Ext.getCmp("ParamFechaFin").getSubmitValue()+"&idUsuario="+Ext.getCmp("ParamGestores").getValue();Coomuce.Util.lanzarReporte(this.getView(),{idReporte:this.getView().idReporte,optional:b})},onSelectCombo:function(h,g,f){var i=this;if(h.ubicacion!==undefined){var j=Ext.getCmp(h.ciudadReference);j.getStore().load({params:{idDepartamento:g.get("idDepartamento")}})}}});Ext.define("CoomuceMod.view.Reportes.Interfaces.GestionFormatosModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.reportes-interfaces-gestionformatos",stores:{getFormatos:{fields:[{name:"nombreTabla",type:"string"},{name:"nombreFormato",type:"string"}],data:[["","- Todos"],["Fuan","- Afiliación"],["FuanReporteNovedad","- Novedades"],["InfoHfdfr","- Historia Familiar para Detección de Factores de Riesgo"],["InfoIfppir","- Identificación y Focalización de pacientes para programas de intervención del riesgo"],["InfoPurisu","- Planilla Única de Registro de Información y Servicios al Usuario"],["EncuestaIps","- Encuesta de Satisfacción de usuario de la I.P.S de primer Nivel"],["EncuestaEps","- Encuesta de Satisfacción de usuario de la EPS-S"],["AsistenciaGeneral","- Lista asistencia general"]]},getUsuario:{autoLoad:true,fields:[{name:"idUsuario",type:"int"},{name:"idTipoIdentificacion",type:"int"},{name:"nombreTipoIdentificacion",type:"string"},{name:"identificacionUsuario",type:"string"},{name:"primerApellidoUsuario",type:"string"},{name:"segundoApellidoUsuario",type:"string"},{name:"primerNombreUsuario",type:"string"},{name:"segundoNombreUsuario",type:"string"},{name:"nombreCompletoGestor",convert:function(c,d){return d.get("primerApellidoUsuario")+" "+d.get("segundoApellidoUsuario")+" "+d.get("primerNombreUsuario")+" "+d.get("segundoNombreUsuario")}}],proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Administracion+"GetUsuarioAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getCiudad:{autoLoad:false,model:"CoomuceMod.model.Administracion.Ciudad",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Administracion+"GetCiudadAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getDepartamento:{autoLoad:true,model:"CoomuceMod.model.Administracion.Departamento",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Administracion+"GetDepartamentoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Reportes.Interfaces.GestionFormatos",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Reportes.Interfaces.GestionFormatosController","CoomuceMod.view.Reportes.Interfaces.GestionFormatosModel"],controller:"reportes-interfaces-gestionformatos",viewModel:{type:"reportes-interfaces-gestionformatos"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"top",layout:{align:"middle"},items:[{xtype:"combo",bind:{store:"{getFormatos}"},displayField:"nombreFormato",editable:false,fieldLabel:"Formatos",id:"ParamFormatos",labelWidth:70,queryMode:"local",valueField:"nombreTabla",width:400},"->",{text:"Generar",handler:"onBotonGenerarReporteClick"}],ui:"footer"},{xtype:"toolbar",dock:"top",items:[{xtype:"datefield",fieldLabel:"Fecha Inicio",format:"Y-m-d",id:"ParamFechaInicio",labelWidth:70,maxValue:new Date(),submitFormat:"Y-m-d",value:new Date(),width:200},{xtype:"datefield",fieldLabel:"Fecha Fin",format:"Y-m-d",id:"ParamFechaFin",labelWidth:60,maxValue:new Date(),submitFormat:"Y-m-d",value:new Date(),width:200},{xtype:"combo",bind:{store:"{getUsuario}"},displayField:"nombreCompletoGestor",editable:false,fieldLabel:"Gestores",id:"ParamGestores",labelWidth:60,queryMode:"local",valueField:"idUsuario",width:300}]}]});Ext.define("CoomuceMod.view.Reportes.Interfaces.GrupoInteresController",{extend:"Ext.app.ViewController",alias:"controller.reportes-interfaces-grupointeres",onToolbarBeforeRender:function(e,f){var d=Coomuce.Util.barraFiltroReportes([["codigoGrupoInteres","Código","string"]],this,{idReporte:this.getView().idReporte});e.add(d.items)}});Ext.define("CoomuceMod.view.Reportes.Interfaces.GrupoInteresModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.reportes-interfaces-grupointeres"});Ext.define("CoomuceMod.view.Reportes.Interfaces.GrupoInteres",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Reportes.Interfaces.GrupoInteresController","CoomuceMod.view.Reportes.Interfaces.GrupoInteresModel"],controller:"reportes-interfaces-grupointeres",viewModel:{type:"reportes-interfaces-grupointeres"},layout:"fit",tbar:{xtype:"toolbar",layout:{align:"middle"},listeners:{beforerender:"onToolbarBeforeRender"},ui:"footer"}});Ext.define("CoomuceMod.view.Reportes.Interfaces.GrupoPoblacionalController",{extend:"Ext.app.ViewController",alias:"controller.reportes-interfaces-grupopoblacional",onToolbarBeforeRender:function(e,f){var d=Coomuce.Util.barraFiltroReportes([["codigoGrupoPoblacional","Código","string"],["nombreGrupoPoblacional","Nombre","string"]],this,{idReporte:this.getView().idReporte});e.add(d.items)}});Ext.define("CoomuceMod.view.Reportes.Interfaces.GrupoPoblacionalModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.reportes-interfaces-grupopoblacional"});Ext.define("CoomuceMod.view.Reportes.Interfaces.GrupoPoblacional",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Reportes.Interfaces.GrupoPoblacionalController","CoomuceMod.view.Reportes.Interfaces.GrupoPoblacionalModel"],controller:"reportes-interfaces-grupopoblacional",viewModel:{type:"reportes-interfaces-grupopoblacional"},layout:"fit",tbar:{xtype:"toolbar",layout:{align:"middle"},listeners:{beforerender:"onToolbarBeforeRender"},ui:"footer"}});Ext.define("CoomuceMod.view.Reportes.Interfaces.GruposFocalesController",{extend:"Ext.app.ViewController",alias:"controller.reportes-interfaces-gruposfocales",onToolbarBeforeRender:function(e,f){var d=Coomuce.Util.barraFiltroReportes([["codigoGruposFocales","Código","string"],["nombreGruposFocales","Nombre","string"]],this,{idReporte:this.getView().idReporte});e.add(d.items)}});Ext.define("CoomuceMod.view.Reportes.Interfaces.GruposFocalesModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.reportes-interfaces-gruposfocales"});Ext.define("CoomuceMod.view.Reportes.Interfaces.GruposFocales",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Reportes.Interfaces.GruposFocalesController","CoomuceMod.view.Reportes.Interfaces.GruposFocalesModel"],controller:"reportes-interfaces-gruposfocales",viewModel:{type:"reportes-interfaces-gruposfocales"},layout:"fit",tbar:{xtype:"toolbar",layout:{align:"middle"},listeners:{beforerender:"onToolbarBeforeRender"},ui:"footer"}});Ext.define("CoomuceMod.view.Reportes.Interfaces.IpsController",{extend:"Ext.app.ViewController",alias:"controller.reportes-interfaces-ips",onToolbarBeforeRender:function(e,f){var d=Coomuce.Util.barraFiltroReportes([["codigoIps","Código","string"],["razonIps","Razón Social","string"],["identificacionIps","Identificación","string"],["nombreDepartamento","Departamento","string"],["nombreCiudad","Ciudad","string"]],this,{idReporte:this.getView().idReporte});e.add(d.items)}});Ext.define("CoomuceMod.view.Reportes.Interfaces.IpsModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.reportes-interfaces-ips"});Ext.define("CoomuceMod.view.Reportes.Interfaces.Ips",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Reportes.Interfaces.IpsController","CoomuceMod.view.Reportes.Interfaces.IpsModel"],controller:"reportes-interfaces-ips",viewModel:{type:"reportes-interfaces-ips"},layout:"fit",tbar:{xtype:"toolbar",layout:{align:"middle"},listeners:{beforerender:"onToolbarBeforeRender"},ui:"footer"}});Ext.define("CoomuceMod.view.Reportes.Interfaces.MotivoConsultaController",{extend:"Ext.app.ViewController",alias:"controller.reportes-interfaces-motivoconsulta",onToolbarBeforeRender:function(e,f){var d=Coomuce.Util.barraFiltroReportes([["codigoMotivoConsulta","Código","string"]],this,{idReporte:this.getView().idReporte});e.add(d.items)}});Ext.define("CoomuceMod.view.Reportes.Interfaces.MotivoConsultaModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.reportes-interfaces-motivoconsulta"});Ext.define("CoomuceMod.view.Reportes.Interfaces.MotivoConsulta",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Reportes.Interfaces.MotivoConsultaController","CoomuceMod.view.Reportes.Interfaces.MotivoConsultaModel"],controller:"reportes-interfaces-motivoconsulta",viewModel:{type:"reportes-interfaces-motivoconsulta"},layout:"fit",tbar:{xtype:"toolbar",layout:{align:"middle"},listeners:{beforerender:"onToolbarBeforeRender"},ui:"footer"}});Ext.define("CoomuceMod.view.Reportes.Interfaces.MotivoContactoController",{extend:"Ext.app.ViewController",alias:"controller.reportes-interfaces-motivocontacto",onToolbarBeforeRender:function(e,f){var d=Coomuce.Util.barraFiltroReportes([["codigoMotivoContacto","Código","string"]],this,{idReporte:this.getView().idReporte});e.add(d.items)}});Ext.define("CoomuceMod.view.Reportes.Interfaces.MotivoContactoModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.reportes-interfaces-motivocontacto"});Ext.define("CoomuceMod.view.Reportes.Interfaces.MotivoContacto",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Reportes.Interfaces.MotivoContactoController","CoomuceMod.view.Reportes.Interfaces.MotivoContactoModel"],controller:"reportes-interfaces-motivocontacto",viewModel:{type:"reportes-interfaces-motivocontacto"},layout:"fit",tbar:{xtype:"toolbar",layout:{align:"middle"},listeners:{beforerender:"onToolbarBeforeRender"},ui:"footer"}});Ext.define("CoomuceMod.view.Reportes.Interfaces.MotivoTrasladoController",{extend:"Ext.app.ViewController",alias:"controller.reportes-interfaces-motivotraslado",onToolbarBeforeRender:function(e,f){var d=Coomuce.Util.barraFiltroReportes([["codigoMotivoTraslado","Código","string"],["descripcionMotivoTraslado","Descripción","string"]],this,{idReporte:this.getView().idReporte});e.add(d.items)}});Ext.define("CoomuceMod.view.Reportes.Interfaces.MotivoTrasladoModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.reportes-interfaces-motivotraslado"});Ext.define("CoomuceMod.view.Reportes.Interfaces.MotivoTraslado",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Reportes.Interfaces.MotivoTrasladoController","CoomuceMod.view.Reportes.Interfaces.MotivoTrasladoModel"],controller:"reportes-interfaces-motivotraslado",viewModel:{type:"reportes-interfaces-motivotraslado"},layout:"fit",tbar:{xtype:"toolbar",layout:{align:"middle"},listeners:{beforerender:"onToolbarBeforeRender"},ui:"footer"}});Ext.define("CoomuceMod.view.Reportes.Interfaces.PiezasInformativasController",{extend:"Ext.app.ViewController",alias:"controller.reportes-interfaces-piezasinformativas",onToolbarBeforeRender:function(e,f){var d=Coomuce.Util.barraFiltroReportes([["codigoPiezasInformativas","Código","string"]],this,{idReporte:this.getView().idReporte});e.add(d.items)}});Ext.define("CoomuceMod.view.Reportes.Interfaces.PiezasInformativasModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.reportes-interfaces-piezasinformativas"});Ext.define("CoomuceMod.view.Reportes.Interfaces.PiezasInformativas",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Reportes.Interfaces.PiezasInformativasController","CoomuceMod.view.Reportes.Interfaces.PiezasInformativasModel"],controller:"reportes-interfaces-piezasinformativas",viewModel:{type:"reportes-interfaces-piezasinformativas"},layout:"fit",tbar:{xtype:"toolbar",layout:{align:"middle"},listeners:{beforerender:"onToolbarBeforeRender"},ui:"footer"}});Ext.define("CoomuceMod.view.Reportes.Interfaces.ProgramasResolucion412Controller",{extend:"Ext.app.ViewController",alias:"controller.reportes-interfaces-programasresolucion412",onToolbarBeforeRender:function(e,f){var d=Coomuce.Util.barraFiltroReportes([["codigoProgramaResolucion412","Código","string"]],this,{idReporte:this.getView().idReporte});e.add(d.items)}});Ext.define("CoomuceMod.view.Reportes.Interfaces.ProgramasResolucion412Model",{extend:"Ext.app.ViewModel",alias:"viewmodel.reportes-interfaces-programasresolucion412"});Ext.define("CoomuceMod.view.Reportes.Interfaces.ProgramasResolucion412",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Reportes.Interfaces.ProgramasResolucion412Controller","CoomuceMod.view.Reportes.Interfaces.ProgramasResolucion412Model"],controller:"reportes-interfaces-programasresolucion412",viewModel:{type:"reportes-interfaces-programasresolucion412"},layout:"fit",tbar:{xtype:"toolbar",layout:{align:"middle"},listeners:{beforerender:"onToolbarBeforeRender"},ui:"footer"}});Ext.define("CoomuceMod.view.Reportes.Interfaces.ReporteGestantesController",{extend:"Ext.app.ViewController",alias:"controller.reportes-interfaces-reportegestantes",onBotonGenerarReporteClick:function(){var b="&fechaInicio="+Ext.getCmp("GES-ParamFechaInicio").getSubmitValue()+"&fechaFin="+Ext.getCmp("GES-ParamFechaFin").getSubmitValue()+"&idCiudad="+Ext.getCmp("GES-ParamCiudad").getValue();Coomuce.Util.lanzarReporte(this.getView(),{idReporte:this.getView().idReporte,optional:b})},onSelectCombo:function(h,g,f){var i=this;if(h.ubicacion!==undefined){var j=Ext.getCmp(h.ciudadReference);console.log(j);j.getStore().load({params:{idDepartamento:g.get("idDepartamento")}})}}});Ext.define("CoomuceMod.view.Reportes.Interfaces.ReporteGestantesModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.reportes-interfaces-reportegestantes",stores:{getCiudad:{autoLoad:false,model:"CoomuceMod.model.Administracion.Ciudad",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Administracion+"GetCiudadAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}},getDepartamento:{autoLoad:true,model:"CoomuceMod.model.Administracion.Departamento",proxy:{timeout:600000,useDefaultXhrHeader:false,type:"ajax",url:Coomuce.Url.Administracion+"GetDepartamentoAll",reader:{type:"json",rootProperty:"data",totalProperty:"total"}}}}});Ext.define("CoomuceMod.view.Reportes.Interfaces.ReporteGestantes",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Reportes.Interfaces.ReporteGestantesController","CoomuceMod.view.Reportes.Interfaces.ReporteGestantesModel"],controller:"reportes-interfaces-reportegestantes",viewModel:{type:"reportes-interfaces-reportegestantes"},layout:"fit",dockedItems:[{xtype:"toolbar",dock:"top",layout:{align:"middle"},items:[{xtype:"datefield",fieldLabel:"Fecha Inicio",format:"Y-m-d",id:"GES-ParamFechaInicio",labelWidth:70,maxValue:new Date(),submitFormat:"Y-m-d",value:new Date(),width:200},{xtype:"datefield",fieldLabel:"Fecha Fin",format:"Y-m-d",id:"GES-ParamFechaFin",labelWidth:60,maxValue:new Date(),submitFormat:"Y-m-d",value:new Date(),width:200},"->",{text:"Generar",handler:"onBotonGenerarReporteClick"}],ui:"footer"},{xtype:"toolbar",dock:"top",items:[{xtype:"combo",bind:{store:"{getDepartamento}"},ciudadReference:"GES-ParamCiudad",displayField:"compDepartamento",editable:false,fieldLabel:"Departamento",id:"GES-ParamDepartamento",listeners:{select:"onSelectCombo"},queryMode:"local",ubicacion:true,valueField:"idDepartamento"},{xtype:"combo",bind:{store:"{getCiudad}"},displayField:"compCiudad",editable:false,fieldLabel:"Municipio/Distrito",id:"GES-ParamCiudad",queryMode:"local",valueField:"idCiudad"}],ui:"footer"}]});Ext.define("CoomuceMod.view.Reportes.Interfaces.SeguimientoProgramasIntervencionRiesgoController",{extend:"Ext.app.ViewController",alias:"controller.reportes-interfaces-seguimientoprogramasintervencionriesgo",onToolbarBeforeRender:function(e,f){var d=Coomuce.Util.barraFiltroReportes([["codigoSeguimientoProgramasIntervencionRiesgo","Código","string"],["nombreSeguimientoProgramasIntervencionRiesgo","Nombre","string"]],this,{idReporte:this.getView().idReporte});e.add(d.items)}});Ext.define("CoomuceMod.view.Reportes.Interfaces.SeguimientoProgramasIntervencionRiesgoModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.reportes-interfaces-seguimientoprogramasintervencionriesgo"});Ext.define("CoomuceMod.view.Reportes.Interfaces.SeguimientoProgramasIntervencionRiesgo",{extend:"Ext.panel.Panel",requires:["CoomuceMod.view.Reportes.Interfaces.SeguimientoProgramasIntervencionRiesgoController","CoomuceMod.view.Reportes.Interfaces.SeguimientoProgramasIntervencionRiesgoModel"],controller:"reportes-interfaces-condiciondiscapacidad",viewModel:{type:"reportes-interfaces-condiciondiscapacidad"},layout:"fit",tbar:{xtype:"toolbar",layout:{align:"middle"},listeners:{beforerender:"onToolbarBeforeRender"},ui:"footer"}});